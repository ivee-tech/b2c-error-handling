"use strict";(self.webpackChunkb2c_frontend=self.webpackChunkb2c_frontend||[]).push([[792],{109:(Cn,ln,Cu)=>{let eo;function Cs(){return eo}function Jn(t){const e=eo;return eo=t,e}Cu(935);const Kg=Symbol("NotFound");class Wg extends Error{name="\u0275NotFound";constructor(e){super(e)}}function Mo(t){return t===Kg||"\u0275NotFound"===t?.name}let Et=null,to=!1,Nn=1;const yt=Symbol("SIGNAL");function ge(t){const e=Et;return Et=t,e}const Yn={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gt(t){if(to)throw new Error("");if(null===Et)return;Et.consumerOnSignalRead(t);const e=Et.nextProducerIndex++;nn(Et),e<Et.producerNode.length&&Et.producerNode[e]!==t&&No(Et)&&vi(Et.producerNode[e],Et.producerIndexOfThis[e]),Et.producerNode[e]!==t&&(Et.producerNode[e]=t,Et.producerIndexOfThis[e]=No(Et)?Xa(t,Et,e):0),Et.producerLastReadVersion[e]=t.version}function no(t){if((!No(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Nn)){if(!t.producerMustRecompute(t)&&!oo(t))return void ro(t);t.producerRecomputeValue(t),ro(t)}}function Iu(t){if(void 0===t.liveConsumerNode)return;const e=to;to=!0;try{for(const n of t.liveConsumerNode)n.dirty||Tu(n)}finally{to=e}}function Tu(t){t.dirty=!0,Iu(t),t.consumerMarkedDirty?.(t)}function ro(t){t.dirty=!1,t.lastCleanEpoch=Nn}function Nr(t){return t&&(t.nextProducerIndex=0),ge(t)}function ko(t,e){if(ge(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(No(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vi(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function oo(t){nn(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(no(n),r!==n.version))return!0}return!1}function Es(t){if(nn(t),No(t))for(let e=0;e<t.producerNode.length;e++)vi(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Xa(t,e,n){if(Oo(t),0===t.liveConsumerNode.length&&Zn(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Xa(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function vi(t,e){if(Oo(t),1===t.liveConsumerNode.length&&Zn(t))for(let r=0;r<t.producerNode.length;r++)vi(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];nn(o),o.producerIndexOfThis[r]=e}}function No(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function nn(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Oo(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Zn(t){return void 0!==t.producerNode}let un=function Jg(){throw new Error};function Ei(t,e){(function Za(){return!1!==Et?.consumerAllowSignalWrites})()||function tc(t){un(t)}(t),t.equal(t.value,e)||(t.value=e,function Xg(t){t.version++,function Qg(){Nn++}(),Iu(t)}(t))}const rc={...Yn,equal:function _i(t,e){return Object.is(t,e)},value:void 0,kind:"signal"};function at(t){return"function"==typeof t}function Is(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ts=Is(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ti(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Wt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(at(r))try{r()}catch(i){e=i instanceof Ts?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Ru(i)}catch(s){e=e??[],s instanceof Ts?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ts(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ru(e);else{if(e instanceof Wt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ti(n,e)}remove(e){const{_finalizers:n}=this;n&&Ti(n,e),e instanceof Wt&&e._removeParent(this)}}Wt.EMPTY=(()=>{const t=new Wt;return t.closed=!0,t})();const bu=Wt.EMPTY;function Au(t){return t instanceof Wt||t&&"closed"in t&&at(t.remove)&&at(t.add)&&at(t.unsubscribe)}function Ru(t){at(t)?t():t.unsubscribe()}const io={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ws={setTimeout(t,e,...n){const{delegate:r}=ws;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=ws;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Mu(t){ws.setTimeout(()=>{const{onUnhandledError:e}=io;if(!e)throw t;e(t)})}function Ss(){}const y=_("C",void 0,void 0);function _(t,e,n){return{kind:t,value:e,error:n}}let D=null;function F(t){if(io.useDeprecatedSynchronousErrorHandling){const e=!D;if(e&&(D={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=D;if(D=null,n)throw r}}else t()}class J extends Wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Au(e)&&e.add(this)):this.destination=Ht}static create(e,n,r){return new de(e,n,r)}next(e){this.isStopped?et(function k(t){return _("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?et(function C(t){return _("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?et(y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const re=Function.prototype.bind;function _e(t,e){return re.call(t,e)}class Y{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){De(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){De(r)}else De(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){De(n)}}}class de extends J{constructor(e,n,r){let o;if(super(),at(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&io.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&_e(e.next,i),error:e.error&&_e(e.error,i),complete:e.complete&&_e(e.complete,i)}):o=e}this.destination=new Y(o)}}function De(t){io.useDeprecatedSynchronousErrorHandling?function ee(t){io.useDeprecatedSynchronousErrorHandling&&D&&(D.errorThrown=!0,D.error=t)}(t):Mu(t)}function et(t,e){const{onStoppedNotification:n}=io;n&&ws.setTimeout(()=>n(t,e))}const Ht={closed:!0,next:Ss,error:function ze(t){throw t},complete:Ss},xt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qe(t){return t}function z(t){return 0===t.length?Qe:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}let le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function tt(t){return t&&t instanceof J||function It(t){return t&&at(t.next)&&at(t.error)&&at(t.complete)}(t)&&Au(t)}(n)?n:new de(n,r,o);return F(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=$e(r))((o,i)=>{const s=new de({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[xt](){return this}pipe(...n){return z(n)(this)}toPromise(n){return new(n=$e(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function $e(t){var e;return null!==(e=t??io.Promise)&&void 0!==e?e:Promise}const ne=Is(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Re=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new be(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ne}next(n){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?bu:(this.currentObservers=null,i.push(n),new Wt(()=>{this.currentObservers=null,Ti(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new le;return n.source=this,n}}return t.create=(e,n)=>new be(e,n),t})();class be extends Re{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:bu}}class Z extends Re{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}class R extends Error{code;constructor(e,n){super(function pe(t,e){return`${function vt(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}(e,n)),this.code=e}}const j=globalThis;function V(t){for(let e in t)if(t[e]===V)return e;throw Error("")}function Oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(Oe).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function Be(t,e){return t?e?`${t} ${e}`:t:e||""}const mr=V({__forward_ref__:V});function Pn(t){return t.__forward_ref__=Pn,t.toString=function(){return Oe(this())},t}function ie(t){return U(t)?t():t}function U(t){return"function"==typeof t&&t.hasOwnProperty(mr)&&t.__forward_ref__===Pn}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Si(t){return function xn(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,Ou)}function Nu(t){return t&&t.hasOwnProperty(np)?t[np]:null}const Ou=V({\u0275prov:V}),np=V({\u0275inj:V});class L{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function op(t){return t&&!!t.\u0275providers}const ip=V({\u0275cmp:V}),zO=V({\u0275dir:V}),KO=V({\u0275pipe:V}),bE=V({\u0275mod:V}),Ai=V({\u0275fac:V}),ac=V({__NG_ELEMENT_ID__:V}),AE=V({__NG_ENV_ID__:V});function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function RE(t,e){throw new R(-200,t)}function sp(t,e){throw new R(-201,!1)}let ap;function ME(){return ap}function En(t){const e=ap;return ap=t,e}function kE(t,e,n){const r=Si(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void sp()}const Ri={};class JO{injector;constructor(e){this.injector=e}retrieve(e,n){const r=cc(n)||0;try{return this.injector.get(e,8&r?null:Ri,r)}catch(o){if(Mo(o))return o;throw o}}}const Pu="ngTempTokenPath",ZO=/\n/gm,NE="__source";function e0(t,e=0){const n=Cs();if(void 0===n)throw new R(-203,!1);if(null===n)return kE(t,void 0,e);{const r=function t0(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),o=n.retrieve(t,r);if(Mo(o)){if(r.optional)return null;throw o}return o}}function G(t,e=0){return(ME()||e0)(ie(t),e)}function M(t,e){return G(t,cc(e))}function cc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lp(t){const e=[];for(let n=0;n<t.length;n++){const r=ie(t[n]);if(Array.isArray(r)){if(0===r.length)throw new R(900,!1);let o,i=0;for(let s=0;s<r.length;s++){const a=r[s],c=n0(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(G(o,i))}else e.push(G(r))}return e}function n0(t){return t.__NG_DI_FLAG__}function Mi(t,e){return t.hasOwnProperty(Ai)?t[Ai]:null}function Ds(t,e){t.forEach(n=>Array.isArray(n)?Ds(n,e):e(n))}function PE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const xr={},ft=[],Lo=new L(""),FE=new L("",-1),dp=new L("");class Bu{get(e,n=Ri){if(n===Ri)throw new Wg(`NullInjectorError: No provider for ${Oe(e)}!`);return n}}function Lr(t){return t[bE]||null}function Ke(t){return t[ip]||null}function dn(t){return t[zO]||null}function Fr(t){return t[KO]||null}function Uu(t){return{\u0275providers:t}}function l0(...t){return{\u0275providers:hp(0,t),\u0275fromNgModule:!0}}function hp(t,...e){const n=[],r=new Set;let o;const i=s=>{n.push(s)};return Ds(e,s=>{const a=s;Hu(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&BE(o,i),n}function BE(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:o}=t[n];gp(o,i=>{e(i,r)})}}function Hu(t,e,n,r){if(!(t=ie(t)))return!1;let o=null,i=Nu(t);const s=!i&&Ke(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const c=t.ngModule;if(i=Nu(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Hu(l,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(o);try{Ds(i.imports,u=>{Hu(u,e,n,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&BE(l,e)}if(!a){const l=Mi(o)||(()=>new o);e({provide:o,useFactory:l,deps:ft},o),e({provide:dp,useValue:o,multi:!0},o),e({provide:Lo,useValue:()=>G(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const l=t;gp(c,u=>{e(u,l)})}}}return o!==t&&void 0!==t.providers}function gp(t,e){for(let n of t)op(n)&&(n=n.\u0275providers),Array.isArray(n)?gp(n,e):e(n)}const u0=V({provide:String,useValue:V});function pp(t){return null!==t&&"object"==typeof t&&u0 in t}function Fo(t){return"function"==typeof t}const mp=new L(""),ju={},jE={};let _p;function yp(){return void 0===_p&&(_p=new Bu),_p}class Qt{}class ki extends Qt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Cp(e,s=>this.processProvider(s)),this.records.set(FE,As(void 0,this)),o.has("environment")&&this.records.set(Qt,As(void 0,this));const i=this.records.get(mp);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(dp,ft,{self:!0}))}retrieve(e,n){const r=cc(n)||0;try{return this.get(e,Ri,r)}catch(o){if(Mo(o))return o;throw o}}destroy(){dc(this),this._destroyed=!0;const e=ge(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return dc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){dc(this);const n=Jn(this),r=En(void 0);try{return e()}finally{Jn(n),En(r)}}get(e,n=Ri,r){if(dc(this),e.hasOwnProperty(AE))return e[AE](this);const o=cc(r),s=Jn(this),a=En(void 0);try{if(!(4&o)){let l=this.records.get(e);if(void 0===l){const u=function m0(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&Si(e);l=u&&this.injectableDefInScope(u)?As(vp(e),ju):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(2&o?yp():this.parent).get(e,n=8&o&&n===Ri?null:n)}catch(c){if(Mo(c)){if((c[Pu]=c[Pu]||[]).unshift(Oe(e)),s)throw c;return function r0(t,e,n,r){const o=t[Pu];throw e[NE]&&o.unshift(e[NE]),t.message=function o0(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let o=Oe(e);if(Array.isArray(e))o=e.map(Oe).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Oe(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(ZO,"\n  ")}`}("\n"+t.message,o,n,r),t.ngTokenPath=o,t[Pu]=null,t}(c,e,"R3InjectorError",this.source)}throw c}finally{En(a),Jn(s)}}resolveInjectorInitializers(){const e=ge(null),n=Jn(this),r=En(void 0);try{const i=this.get(Lo,ft,{self:!0});for(const s of i)s()}finally{Jn(n),En(r),ge(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Oe(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=Fo(e=ie(e))?e:ie(e&&e.provide);const r=function h0(t){return pp(t)?As(void 0,t.useValue):As(function VE(t,e,n){let r;if(Fo(t)){const o=ie(t);return Mi(o)||vp(o)}if(pp(t))r=()=>ie(t.useValue);else if(function HE(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...lp(t.deps||[]));else if(function UE(t){return!(!t||!t.useExisting)}(t))r=()=>G(ie(t.useExisting));else{const o=ie(t&&(t.useClass||t.provide));if(!function g0(t){return!!t.deps}(t))return Mi(o)||vp(o);r=()=>new o(...lp(t.deps))}return r}(t),ju)}(e);if(!Fo(e)&&!0===e.multi){let o=this.records.get(n);o||(o=As(void 0,ju,!0),o.factory=()=>lp(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=ge(null);try{return n.value===jE?RE(Oe(e)):n.value===ju&&(n.value=jE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function p0(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ie(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function vp(t){const e=Si(t),n=null!==e?e.factory:Mi(t);if(null!==n)return n;if(t instanceof L)throw new R(204,!1);if(t instanceof Function)return function f0(t){if(t.length>0)throw new R(204,!1);const n=function er(t){return(t?.[Ou]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new R(204,!1)}function dc(t){if(t.destroyed)throw new R(205,!1)}function As(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Cp(t,e){for(const n of t)Array.isArray(n)?Cp(n,e):n&&op(n)?Cp(n.\u0275providers,e):e(n)}function nr(t,e){let n;t instanceof ki?(dc(t),n=t):n=new JO(t);const o=Jn(n),i=En(void 0);try{return e()}finally{Jn(o),En(i)}}function Ep(){return void 0!==ME()||null!=Cs()}function Nt(t){return Array.isArray(t)&&"object"==typeof t[1]}function fn(t){return Array.isArray(t)&&!0===t[1]}function wp(t){return!!(4&t.flags)}function Ho(t){return t.componentOffset>-1}function $u(t){return!(1&~t.flags)}function Fn(t){return!!t.template}function jo(t){return!!(512&t[2])}function Vo(t){return!(256&~t[2])}function qt(t){for(;Array.isArray(t);)t=t[0];return t}function In(t,e){return qt(e[t.index])}function Ps(t,e){return t.data[e]}function hn(t,e){const n=e[t];return Nt(n)?n:n[0]}function Dp(t){return!(128&~t[2])}function Tn(t,e){return null==e?null:t[e]}function JE(t){t[17]=0}function YE(t){1024&t[2]||(t[2]|=1024,Dp(t)&&xs(t))}function zu(t){return!!(9216&t[2]||t[24]?.dirty)}function bp(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),zu(t)&&xs(t)}function xs(t){t[10].changeDetectionScheduler?.notify(0);let e=lo(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Dp(e));)e=lo(e)}function Ku(t,e){if(Vo(t))throw new R(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function lo(t){const e=t[3];return fn(e)?e[3]:e}const ve={lFrame:uI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Mp=!1;function kp(){return ve.bindingsEnabled}function N(){return ve.lFrame.lView}function Ae(){return ve.lFrame.tView}function Wu(t){return ve.lFrame.contextLView=t,t[8]}function Qu(t){return ve.lFrame.contextLView=null,t}function Le(){let t=nI();for(;null!==t&&64===t.type;)t=t.parent;return t}function nI(){return ve.lFrame.currentTNode}function yr(t,e){const n=ve.lFrame;n.currentTNode=t,n.isParent=e}function Np(){return ve.lFrame.isParent}function iI(){return Mp}function Ju(t){const e=Mp;return Mp=t,e}function Bn(){return ve.lFrame.bindingIndex++}function N0(t,e){const n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,Pp(e)}function Pp(t){ve.lFrame.currentDirectiveIndex=t}function Yu(t){ve.lFrame.currentQueryIndex=t}function P0(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function cI(t,e,n){if(4&n){let o=e,i=t;for(;!(o=o.parent,null!==o||1&n||(o=P0(i),null===o||(i=i[14],10&o.type))););if(null===o)return!1;e=o,t=i}const r=ve.lFrame=lI();return r.currentTNode=e,r.lView=t,!0}function Fp(t){const e=lI(),n=t[1];ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function lI(){const t=ve.lFrame,e=null===t?null:t.child;return null===e?uI(t):e}function uI(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function dI(){const t=ve.lFrame;return ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const fI=dI;function Bp(){const t=dI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Jt(){return ve.lFrame.selectedIndex}function Fi(t){ve.lFrame.selectedIndex=t}let hI=!0;function pc(){return hI}function mc(t){hI=t}function gI(t,e=null,n=null,r){const o=pI(t,e,n,r);return o.resolveInjectorInitializers(),o}function pI(t,e=null,n=null,r,o=new Set){const i=[n||ft,l0(t)];return r=r||("object"==typeof t?void 0:Oe(t)),new ki(i,e||yp(),r||null,o)}class Un{static THROW_IF_NOT_FOUND=Ri;static NULL=new Bu;static create(e,n){if(Array.isArray(e))return gI({name:""},n,e,"");{const r=e.name??"";return gI({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:Un,providedIn:"any",factory:()=>G(FE)});static __NG_ELEMENT_ID__=-1}const pn=new L("");let ho=(()=>class t{static __NG_ELEMENT_ID__=j0;static __NG_ENV_ID__=n=>n})();class mI extends ho{_lView;constructor(e){super(),this._lView=e}onDestroy(e){const n=this._lView;return Ku(n,e),()=>function Ap(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function j0(){return new mI(N())}class Fs{_console=console;handleError(e){this._console.error("ERROR",e)}}const vr=new L("",{providedIn:"root",factory:()=>{const t=M(Qt);let e;return n=>{e??=t.get(Fs),e.handleError(n)}}}),V0={provide:Lo,useValue:()=>{M(Fs)},multi:!0};class Bs{}const vI=new L("",{providedIn:"root",factory:()=>!1}),CI=new L(""),EI=new L("");let jp=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=$0})();function $0(){return new jp(N(),Le())}let Bi=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Z(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})(),Zu=(()=>{class t{internalPendingTasks=M(Bi);scheduler=M(Bs);errorHandler=M(vr);add(){const n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){const r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})();function _c(...t){}let II=(()=>{class t{static \u0275prov=q({token:t,providedIn:"root",factory:()=>new G0})}return t})();class G0{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}function TI(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(r,o)}function E(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(c){TI(i,r,o,s,a,"next",c)}function a(c){TI(i,r,o,s,a,"throw",c)}s(void 0)})}}function wI(t){return at(t?.lift)}function Yt(t){return e=>{if(wI(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $t(t,e,n,r,o){return new z0(t,e,n,r,o)}class z0 extends J{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function He(t,e){return Yt((n,r)=>{let o=0;n.subscribe($t(r,i=>{r.next(t.call(e,i,o++))}))})}function go(t){return{toString:t}.toString()}class rP{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function bI(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const qs=(()=>{const t=()=>AI;return t.ngInherit=!0,t})();function AI(t){return t.type.prototype.ngOnChanges&&(t.setInput=iP),oP}function oP(){const t=MI(this),e=t?.current;if(e){const n=t.previous;if(n===xr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function iP(t,e,n,r,o){const i=this.declaredInputs[r],s=MI(t)||function sP(t,e){return t[RI]=e}(t,{previous:xr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new rP(l&&l.currentValue,n,c===xr),bI(t,e,o,n)}const RI="__ngSimpleChanges__";function MI(t){return t[RI]||null}const Ui=[],rt=function(t,e=null,n){for(let r=0;r<Ui.length;r++)(0,Ui[r])(t,e,n)};function zp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function ed(t,e,n){kI(t,e,3,n)}function td(t,e,n,r){(3&t[2])===n&&kI(t,e,n,r)}function Kp(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function kI(t,e,n,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<i||-1==i)&&(dP(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function NI(t,e){rt(4,t,e);const n=ge(null);try{e.call(t)}finally{ge(n),rt(5,t,e)}}function dP(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];o?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,NI(a,i)):NI(a,i)}class vc{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}}function PI(t){return 3===t||4===t||6===t}function xI(t){return 64===t.charCodeAt(0)}function Gs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||LI(t,n,o,0,-1===n||2===n?e[++r]:null)}}return t}function LI(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n)return void(null!==o&&(t[i+1]=o));i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==o&&t.splice(i++,0,o)}function Qp(t){return-1!==t}function Cc(t){return 32767&t}function Ec(t,e){let n=function pP(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let Jp=!0;function nd(t){const e=Jp;return Jp=t,e}let mP=0;const Ur={};function rd(t,e){const n=UI(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Yp(r.data,t),Yp(e,null),Yp(r.blueprint,null));const o=od(t,e),i=t.injectorIndex;if(Qp(o)){const s=Cc(o),a=Ec(o,e),c=a[1].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function Yp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function UI(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function od(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){if(r=zI(o),null===r)return-1;if(n++,o=o[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Zp(t,e,n){!function _P(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ac)&&(r=n[ac]),null==r&&(r=n[ac]=mP++);const o=255&r;e.data[t+(o>>5)]|=1<<o}(t,e,n)}function HI(t,e,n){if(8&n||void 0!==t)return t;sp()}function jI(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const o=t[9],i=En(void 0);try{return o?o.get(e,r,8&n):kE(e,r,8&n)}finally{En(i)}}return HI(r,0,n)}function VI(t,e,n,r=0,o){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function IP(t,e,n,r,o){let i=t,s=e;for(;null!==i&&null!==s&&2048&s[2]&&!jo(s);){const a=qI(i,s,n,2|r,Ur);if(a!==Ur)return a;let c=i.parent;if(!c){const l=s[20];if(l){const u=l.get(n,Ur,r);if(u!==Ur)return u}c=zI(s),s=s[14]}i=c}return o}(t,e,n,r,Ur);if(s!==Ur)return s}const i=qI(t,e,n,r,Ur);if(i!==Ur)return i}return jI(e,n,r,o)}function qI(t,e,n,r,o){const i=function CP(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ac)?t[ac]:void 0;return"number"==typeof e?e>=0?255&e:EP:e}(n);if("function"==typeof i){if(!cI(e,t,r))return 1&r?HI(o,0,r):jI(e,n,r,o);try{let s;if(s=i(r),null!=s||8&r)return s;sp()}finally{fI()}}else if("number"==typeof i){let s=null,a=UI(t,e),c=-1,l=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?od(t,e):e[a+8],-1!==c&&GI(r,!1)?(s=e[1],a=Cc(c),e=Ec(c,e)):a=-1);-1!==a;){const u=e[1];if($I(i,a,u.data)){const d=vP(a,e,n,s,r,l);if(d!==Ur)return d}c=e[a+8],-1!==c&&GI(r,e[1].data[a+8]===l)&&$I(i,a,e)?(s=u,a=Cc(c),e=Ec(c,e)):a=-1}}return o}function vP(t,e,n,r,o,i){const s=e[1],a=s.data[t+8],u=function id(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,c=t.directiveStart,u=i>>20,f=o?a+u:t.directiveEnd;for(let h=r?a:a+u;h<f;h++){const g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(o){const h=s[c];if(h&&Fn(h)&&h.type===n)return c}return null}(a,s,n,null==r?Ho(a)&&Jp:r!=s&&!!(3&a.type),1&o&&i===a);return null!==u?Ic(e,s,u,a):Ur}function Ic(t,e,n,r){let o=t[n];const i=e.data;if(o instanceof vc){const s=o;s.resolving&&RE(function Ge(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(i[n]));const a=nd(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?En(s.injectImpl):null;cI(t,r,0);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function uP(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=AI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}(n,i[n],e)}finally{null!==u&&En(u),nd(a),s.resolving=!1,fI()}}return o}function $I(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function GI(t,e){return!(2&t||1&t&&e)}class Rt{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return VI(this._tNode,this._lView,e,cc(r),n)}}function EP(){return new Rt(Le(),N())}function Xp(t){return go(()=>{const e=t.prototype.constructor,n=e[Ai]||em(e),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[Ai]||em(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function em(t){return U(t)?()=>{const e=em(ie(t));return e&&e()}:Mi(t)}function zI(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function MP(){return zs(Le(),N())}function zs(t,e){return new $o(In(t,e))}let $o=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=MP})();function wc(t){return!(128&~t.flags)}Symbol;var ad=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ad||{});const cd=new Map;let xP=0;function rm(t){cd.delete(t[19])}const im="__ngContext__";function Sn(t,e){Nt(e)?(t[im]=e[19],function FP(t){cd.set(t[19],t)}(e)):t[im]=e}function cT(t){return uT(t[12])}function lT(t){return uT(t[4])}function uT(t){for(;null!==t&&!fn(t);)t=t[4];return t}let sm;const ud=new L("",{providedIn:"root",factory:()=>ix}),ix="ng",_T=new L(""),am=new L("",{providedIn:"platform",factory:()=>"unknown"}),yT=new L("",{providedIn:"root",factory:()=>function ji(){if(void 0!==sm)return sm;if(typeof document<"u")return document;throw new R(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),gx=new L("",{providedIn:"root",factory:()=>!1});function jT(t,e){const n=t.contentQueries;if(null!==n){const r=ge(null);try{for(let o=0;o<n.length;o+=2){const s=n[o+1];if(-1!==s){const a=t.data[s];Yu(n[o]),a.contentQueries(2,e[s],s)}}}finally{ge(r)}}}function wm(t,e,n){Yu(0);const r=ge(null);try{e(t,n)}finally{ge(r)}}function Sm(t,e,n){if(wp(e)){const r=ge(null);try{const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ge(r)}}}var po=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(po||{});function Hr(t){return t instanceof Function?t():t}function DL(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}const fw="ng-template";function bL(t,e,n,r){let o=0;if(r){for(;o<e.length&&"string"==typeof e[o];o+=2)if("class"===e[o]&&-1!==DL(e[o+1].toLowerCase(),n,0))return!0}else if(Om(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&"string"==typeof(i=e[o]);)if(i.toLowerCase()===n)return!0}return!1}function Om(t){return 4===t.type&&t.value!==fw}function AL(t,e,n){return e===(4!==t.type||n?t.value:fw)}function RL(t,e,n){let r=4;const o=t.attrs,i=null!==o?function NL(t){for(let e=0;e<t.length;e++)if(PI(t[e]))return e;return t.length}(o):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!AL(t,c,n)||""===c&&1===e.length){if(Cr(r))return!1;s=!0}}else if(8&r){if(null===o||!bL(t,o,c,n)){if(Cr(r))return!1;s=!0}}else{const l=e[++a],u=ML(c,o,Om(t),n);if(-1===u){if(Cr(r))return!1;s=!0;continue}if(""!==l){let d;if(d=u>i?"":o[u+1].toLowerCase(),2&r&&l!==d){if(Cr(r))return!1;s=!0}}}}else{if(!s&&!Cr(r)&&!Cr(c))return!1;if(s&&Cr(c))continue;s=!1,r=c|1&r}}return Cr(r)||s}function Cr(t){return!(1&t)}function ML(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function OL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function hw(t,e,n=!1){for(let r=0;r<e.length;r++)if(RL(t,e[r],n))return!0;return!1}function gw(t,e){return t?":not("+e.trim()+")":e}function xL(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Cr(s)&&(e+=gw(i,o),o=""),r=s,i=i||!Cr(r);n++}return""!==o&&(e+=gw(i,o)),e}const Ye={};function Ed(t,e,n){return t.createElement(e,n)}function qi(t,e,n,r,o){t.insertBefore(e,n,r,o)}function mw(t,e,n){t.appendChild(e,n)}function _w(t,e,n,r,o){null!==r?qi(t,e,n,r,o):mw(t,e,n)}function vw(t,e,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&function gP(t,e,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{const i=o,s=n[++r];xI(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}}(t,e,r),null!==o&&function UL(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,o),null!==i&&function BL(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}function Lm(t,e,n,r,o,i,s,a,c,l,u){const d=26+r,f=d+o,h=function HL(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ye);return n}(d,f),g="function"==typeof l?l():l;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function Id(t,e,n,r,o,i,s,a,c,l,u){const d=e.blueprint.slice();return d[0]=o,d[2]=1228|r,(null!==l||t&&2048&t[2])&&(d[2]|=2048),JE(d),d[3]=d[14]=t,d[8]=n,d[10]=s||t&&t[10],d[11]=a||t&&t[11],d[9]=c||t&&t[9]||null,d[5]=i,d[19]=function LP(){return xP++}(),d[6]=u,d[20]=l,d[15]=2==e.type?t[15]:d,d}function Fm(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Nc(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Bm(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function Oc(t=1){Ew(Ae(),N(),Jt()+t,!1)}function Ew(t,e,n,r){if(!r)if(3&~e[2]){const i=t.preOrderHooks;null!==i&&td(e,i,0,n)}else{const i=t.preOrderCheckHooks;null!==i&&ed(e,i,n)}Fi(n)}var Td=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Td||{});function Pc(t,e,n,r){const o=ge(null);try{const[i,s,a]=t.inputs[n];let c=null;0!==(s&Td.SignalBased)&&(c=e[i][yt]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,i):bI(e,c,i,r)}finally{ge(o)}}function Iw(t,e,n,r,o){const i=Jt(),s=2&r;try{Fi(-1),s&&e.length>26&&Ew(t,e,26,!1),rt(s?2:0,o,n),n(r,o)}finally{Fi(i),rt(s?3:1,o,n)}}function wd(t,e,n){(function KL(t,e,n){const r=n.directiveStart,o=n.directiveEnd;Ho(n)&&function jL(t,e,n){const r=In(e,t),o=function Cw(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Lm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),i=t[10].rendererFactory,s=Bm(t,Id(t,o,null,Fm(n),r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||rd(n,e);const i=n.initialInputs;for(let s=r;s<o;s++){const a=t.data[s],c=Ic(e,t,s,n);Sn(c,e),null!==i&&YL(0,s-r,c,a,0,i),Fn(a)&&(hn(n.index,e)[8]=Ic(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function WL(t,e,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function O0(){return ve.lFrame.currentDirectiveIndex}();try{Fi(i);for(let a=r;a<o;a++){const c=t.data[a],l=e[a];Pp(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&QL(c,l)}}finally{Fi(-1),Pp(s)}}(t,e,n)}function Um(t,e,n=In){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}let Tw=()=>null;function QL(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Vm(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let o=0;o<n.length;o++){const i=n[o];hw(e,i.selectors,!1)&&(r??=[],Fn(i)?r.unshift(i):r.push(i))}return r}function YL(t,e,n,r,o,i){const s=i[e];if(null!==s)for(let a=0;a<s.length;a+=2)Pc(r,n,s[a],s[a+1])}function Gm(t,e,n,r,o){const i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const l=s[c];Pc(e.data[l],n[l],s[c+1],o),a=!0}if(i)for(const c of i)Pc(e.data[c],n[c],r,o),a=!0;return a}function XL(t,e){const n=hn(e,t),r=n[1];!function eF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const o=n[0];null!==o&&null===n[6]&&(n[6]=null),rt(18),Sd(r,n,n[8]),rt(19,n[8])}function Sd(t,e,n){Fp(e);try{const r=t.viewQuery;null!==r&&wm(1,r,n);const o=t.template;null!==o&&Iw(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&jT(t,e),t.staticViewQueries&&wm(2,t.viewQuery,n);const i=t.components;null!==i&&function tF(t,e){for(let n=0;n<e.length;n++)XL(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Bp()}}function $i(t,e){return!e||null===e.firstChild||wc(t)}function Km(t,e){return undefined(t,e)}var Ko=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ko||{});function Gi(t){return!(32&~t.flags)}function ta(t,e,n,r,o){if(null!=r){let i,s=!1;fn(r)?i=r:Nt(r)&&(s=!0,r=r[0]);const a=qt(r);0===t&&null!==n?null==o?mw(e,n,a):qi(e,n,a,o||null,!0):1===t&&null!==n?qi(e,n,a,o||null,!0):2===t?function kc(t,e,n){t.removeChild(null,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function lF(t,e,n,r,o){const i=n[7];i!==qt(n)&&ta(e,t,r,i,o);for(let a=10;a<n.length;a++){const c=n[a];bd(c[1],c,t,e,r,i)}}(e,t,i,n,o)}}function Aw(t,e){e[10].changeDetectionScheduler?.notify(9),bd(t,e,e[11],2,null,null)}function Wm(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function xc(t,e){if(Vo(e))return;const n=e[11];n.destroyNode&&bd(t,e,n,3,null,null),function iF(t){let e=t[12];if(!e)return Qm(t[1],t);for(;e;){let n=null;if(Nt(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Nt(e)&&Qm(e[1],e),e=e[3];null===e&&(e=t),Nt(e)&&Qm(e[1],e),n=e&&e[4]}e=n}}(e)}function Qm(t,e){if(Vo(e))return;const n=ge(null);try{e[2]&=-129,e[2]|=256,e[24]&&Es(e[24]),function aF(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof vc)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];rt(4,a,c);try{c.call(a)}finally{rt(5,a,c)}}else{rt(4,o,i);try{i.call(o)}finally{rt(5,o,i)}}}}}(t,e),function sF(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const o=e[21];if(null!==o){e[21]=null;for(let s=0;s<o.length;s++)(0,o[s])()}const i=e[23];if(null!==i){e[23]=null;for(const s of i)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&fn(e[3])){r!==e[3]&&Wm(r,e);const o=e[18];null!==o&&o.detachView(t)}rm(e)}finally{ge(n)}}function Jm(t,e,n){return function Rw(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(Ho(r)){const{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===po.None||o===po.Emulated)return null}return In(r,n)}(t,e.parent,n)}let Nw=function kw(t,e,n){return 40&t.type?In(t,n):null};function Dd(t,e,n,r){const o=Jm(t,r,e),i=e[11],a=function Mw(t,e,n){return Nw(t,e,n)}(r.parent||e[5],r,e);if(null!=o)if(Array.isArray(n))for(let c=0;c<n.length;c++)_w(i,o,n[c],a,!1);else _w(i,o,n,a,!1)}function zi(t,e){if(null!==e){const n=e.type;if(3&n)return In(e,t);if(4&n)return Zm(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return zi(t,r);{const o=t[e.index];return fn(o)?Zm(-1,o):qt(o)}}if(128&n)return zi(t,e.next);if(32&n)return Km(e,t)()||qt(t[e.index]);{const r=Pw(t,e);return null!==r?Array.isArray(r)?r[0]:zi(lo(t[15]),r):zi(t,e.next)}}return null}function Pw(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Zm(t,e){const n=10+t+1;if(n<e.length){const r=e[n],o=r[1].firstChild;if(null!==o)return zi(r,o)}return e[7]}function Xm(t,e,n,r,o,i,s){for(;null!=n;){if(128===n.type){n=n.next;continue}const a=r[n.index],c=n.type;if(s&&0===e&&(a&&Sn(qt(a),r),n.flags|=2),!Gi(n))if(8&c)Xm(t,e,n.child,r,o,i,!1),ta(e,t,o,a,i);else if(32&c){const l=Km(n,r);let u;for(;u=l();)ta(e,t,o,u,i);ta(e,t,o,a,i)}else 16&c?xw(t,e,r,n,o,i):ta(e,t,o,a,i);n=s?n.projectionNext:n.next}}function bd(t,e,n,r,o,i){Xm(n,r,t.firstChild,e,o,i,!1)}function xw(t,e,n,r,o,i){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)ta(e,t,o,c[l],i);else{let l=c;const u=s[3];wc(r)&&(l.flags|=128),Xm(t,e,l,u,o,i,!0)}}function Lc(t,e,n,r,o=!1){for(;null!==n;){if(128===n.type){n=o?n.projectionNext:n.next;continue}const i=e[n.index];null!==i&&r.push(qt(i)),fn(i)&&dF(i,r);const s=n.type;if(8&s)Lc(t,e,n.child,r);else if(32&s){const a=Km(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Pw(e,n);if(Array.isArray(a))r.push(...a);else{const c=lo(e[15]);Lc(c[1],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function dF(t,e){for(let n=10;n<t.length;n++){const r=t[n],o=r[1].firstChild;null!==o&&Lc(r[1],r,o,e)}t[7]!==t[0]&&e.push(t[7])}function Lw(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let Fw=[];const pF={...Yn,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{xs(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},_F={...Yn,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=lo(t.lView);for(;e&&!Bw(e[1]);)e=lo(e);e&&YE(e)},consumerOnSignalRead(){this.lView[24]=this}};function Bw(t){return 2!==t.type}function Uw(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function Ad(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function vF(t,e){const n=iI();try{Ju(!0),e_(t,e);let r=0;for(;zu(t);){if(100===r)throw new R(103,!1);r++,e_(t,1)}}finally{Ju(n)}}(t,e)}finally{r.end?.()}}function Hw(t,e,n,r){if(Vo(e))return;const o=e[2];Fp(e);let a=!0,c=null,l=null;Bw(t)?(l=function fF(t){return t[24]??function hF(t){const e=Fw.pop()??Object.create(pF);return e.lView=t,e}(t)}(e),c=Nr(l)):null===function yi(){return Et}()?(a=!1,l=function mF(t){const e=t[24]??Object.create(_F);return e.lView=t,e}(e),c=Nr(l)):e[24]&&(Es(e[24]),e[24]=null);try{JE(e),function sI(t){return ve.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Iw(t,e,n,2,r);const u=!(3&~o);if(u){const h=t.preOrderCheckHooks;null!==h&&ed(e,h,null)}else{const h=t.preOrderHooks;null!==h&&td(e,h,0,null),Kp(e,0)}if(function EF(t){for(let e=cT(t);null!==e;e=lT(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)YE(n[r])}}(e),Uw(e),jw(e,0),null!==t.contentQueries&&jT(t,e),u){const h=t.contentCheckHooks;null!==h&&ed(e,h)}else{const h=t.contentHooks;null!==h&&td(e,h,1),Kp(e,1)}!function TF(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Fi(~o);else{const i=o,s=n[++r],a=n[++r];N0(s,i);const c=e[i];rt(24,c),a(2,c),rt(25,c)}}}finally{Fi(-1)}}(t,e);const d=t.components;null!==d&&qw(e,d,0);const f=t.viewQuery;if(null!==f&&wm(2,f,r),u){const h=t.viewCheckHooks;null!==h&&ed(e,h)}else{const h=t.viewHooks;null!==h&&td(e,h,2),Kp(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const h of e[22])h();e[22]=null}Lw(e),e[2]&=-73}catch(u){throw xs(e),u}finally{null!==l&&(ko(l,c),a&&function gF(t){t.lView[24]!==t&&(t.lView=null,Fw.push(t))}(l)),Bp()}}function jw(t,e){for(let n=cT(t);null!==n;n=lT(n))for(let r=10;r<n.length;r++)Vw(n[r],e)}function IF(t,e,n){rt(18);const r=hn(e,t);Vw(r,n),rt(19,r[8])}function Vw(t,e){Dp(t)&&e_(t,e)}function e_(t,e){const r=t[1],o=t[2],i=t[24];let s=!!(0===e&&16&o);if(s||=!!(64&o&&0===e),s||=!!(1024&o),s||=!(!i?.dirty||!oo(i)),s||=!1,i&&(i.dirty=!1),t[2]&=-9217,s)Hw(r,t,r.template,t[8]);else if(8192&o){Uw(t),jw(t,1);const a=r.components;null!==a&&qw(t,a,1),Lw(t)}}function qw(t,e,n){for(let r=0;r<e.length;r++)IF(t,e[r],n)}function Fc(t,e){const n=iI()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=lo(t);if(jo(t)&&!r)return t;t=r}return null}function $w(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function na(t,e,n,r=!0){const o=e[1];if(function wF(t,e,n,r){const o=10+r,i=n.length;r>0&&(n[o-1][4]=e),r<i-10?(e[4]=n[o],PE(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&zw(s,e);const a=e[18];null!==a&&a.insertView(t),bp(e),e[2]|=128}(o,e,t,n),r){const s=Zm(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function oF(t,e,n,r,o,i){r[0]=o,r[5]=e,bd(t,r,n,1,o,i)}(o,t[5],a,e,c,s)}const i=e[6];null!==i&&null!==i.firstChild&&(i.firstChild=null)}function Bc(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[16];null!==o&&o!==t&&Wm(o,r),e>0&&(t[n-1][4]=r[4]);const i=xu(t,10+e);!function bw(t,e){Aw(t,e),e[0]=null,e[5]=null}(r[1],r);const s=i[18];null!==s&&s.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function zw(t,e){const n=t[9],r=e[3];(Nt(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Uc{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return Lc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Vo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(fn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Bc(e,r),xu(n,r))}this._attachedToViewContainer=!1}xc(this._lView[1],this._lView)}onDestroy(e){Ku(this._lView,e)}markForCheck(){Fc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){bp(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,Ad(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=jo(this._lView),n=this._lView[16];null!==n&&!e&&Wm(n,this._lView),Aw(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e;const n=jo(this._lView),r=this._lView[16];null!==r&&!n&&zw(r,this._lView),bp(this._lView)}}function ra(t,e,n,r,o){let i=t.data[e];if(null===i)i=function i_(t,e,n,r,o){const i=nI(),s=Np(),c=t.data[e]=function PF(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return function tI(){return null!==ve.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return function OF(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,i,s),c}(t,e,n,r,o),function k0(){return ve.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function gc(){const t=ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return yr(i,!0),i}let mB=class{},_S=class{};class _B{resolveComponentFactory(e){throw new R(917,!1)}}let Fd=class{static NULL=new _B};class f_{}let vB=(()=>{class t{static \u0275prov=q({token:t,providedIn:"root",factory:()=>null})}return t})();const g_={};class ia{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const o=this.injector.get(e,g_,r);return o!==g_||n===g_?o:this.parentInjector.get(e,n,r)}}function p_(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=Be(o,a):2==i&&(r=Be(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function ue(t,e=0){const n=N();return null===n?G(t,e):VI(Le(),n,ie(t),e)}function m_(t,e,n,r,o){const i=null===r?null:{"":-1},s=o(t,n);if(null!==s){let a=s,c=null,l=null;for(const u of s)if(null!==u.resolveHostDirectives){[a,c,l]=u.resolveHostDirectives(s);break}!function SB(t,e,n,r,o,i,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const h=r[f];!c&&Fn(h)&&(c=!0,wB(t,n,f)),Zp(rd(n,e),t,h.type)}!function kB(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=Nc(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const h=r[f];if(n.mergedAttrs=Gs(n.mergedAttrs,h.hostAttrs),bB(t,n,e,d,h),MB(d,h,o),null!==s&&s.has(h)){const[m,T]=s.get(h);n.directiveToIndex.set(h.type,[d,m+n.directiveStart,T+n.directiveStart])}else(null===i||!i.has(h))&&n.directiveToIndex.set(h.type,d);null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}!function DB(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const o=t.data[r];if(null!==n&&n.has(o)){const i=n.get(o);ES(0,e,i,r),ES(1,e,i,r),TS(e,r,!0)}else CS(0,e,o,r),CS(1,e,o,r),TS(e,r,!1)}}(t,n,i)}(t,e,n,a,i,c,l)}null!==i&&null!==r&&function TB(t,e,n){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new R(-301,!1);r.push(e[o],i)}}(n,r,i)}function wB(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function CS(t,e,n,r){const o=0===t?n.inputs:n.outputs;for(const i in o)if(o.hasOwnProperty(i)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[i]??=[],s[i].push(r),IS(e,i)}}function ES(t,e,n,r){const o=0===t?n.inputs:n.outputs;for(const i in o)if(o.hasOwnProperty(i)){const s=o[i];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),IS(e,s)}}function IS(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function TS(t,e,n){const{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(null===r||!n&&null===o||n&&null===i||Om(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&o.hasOwnProperty(c)){const l=o[c];for(const u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&i.hasOwnProperty(c)){const l=i[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function bB(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=Mi(o.type)),s=new vc(i,Fn(o),ue);t.blueprint[r]=s,n[r]=s,function AB(t,e,n,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function RB(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,i)}}(t,e,r,Nc(t,n,o.hostVars,Ye),o)}function MB(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fn(e)&&(n[""]=t)}}function wS(t,e,n,r,o,i,s,a){const c=e.consts,u=ra(e,t,2,r,Tn(c,s));return i&&m_(e,n,u,Tn(c,a),o),u.mergedAttrs=Gs(u.mergedAttrs,u.attrs),null!==u.attrs&&p_(u,u.attrs,!1),null!==u.mergedAttrs&&p_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}function SS(t,e){zp(t,e),wp(e)&&t.queries.elementEnd(e)}function Ct(t,e,n){return n!==Ye&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function Vd(t,e,n){return function r(o){Fc(Ho(t)?hn(t.index,e):e,5);const s=e[8];let a=DS(e,s,n,o),c=r.__ngNextListenerFn__;for(;c;)a=DS(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function DS(t,e,n,r){const o=ge(null);try{return rt(6,e,n),!1!==n(r)}catch(i){return function $m(t,e){const n=t[9];n&&n.get(vr,null)?.(e)}(t,i),!1}finally{rt(7,e,n),ge(o)}}function bS(t,e,n,r,o,i,s){const a=e.firstCreatePass?function eI(t){return t.cleanup??=[]}(e):null,c=function XE(t){return t[7]??=[]}(n),l=c.length;c.push(o,i),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function qd(t,e,n,r,o,i){const a=e[1],d=e[n][a.data[n].outputs[r]].subscribe(i);bS(t.index,a,e,o,i,d,!0)}const Qo=Symbol("BINDING");class AS extends Fd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ke(e);return new $d(n,this.ngModule)}}class $d extends _S{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function $B(t){return Object.keys(t).map(e=>{const[n,r,o]=t[e],i={propName:n,templateName:e,isSignal:0!==(r&Td.SignalBased)};return o&&(i.transform=o),i})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function GB(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function LL(t){return t.map(xL).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o,i,s){rt(22);const a=ge(null);try{const c=this.componentDef,l=function QB(t,e,n,r){const o=t?["ng-version","20.0.0"]:function FL(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!Cr(o))break;o=i}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let i=null,s=null,a=0;if(n)for(const u of n)a+=u[Qo].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){const d=r[u];if("function"!=typeof d)for(const f of d.bindings){a+=f[Qo].requiredVars;const h=u+1;f.create&&(f.targetIdx=h,(i??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}const c=[e];if(r)for(const u of r){const f=dn("function"==typeof u?u:u.type);c.push(f)}return Lm(0,null,function JB(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(i,s),1,a,c,null,null,null,[o],null)}(r,c,s,i),u=function zB(t,e,n){let r=e instanceof Qt?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new ia(n,r):n}(c,o||this.ngModule,e),d=function KB(t){const e=t.get(f_,null);if(null===e)throw new R(407,!1);return{rendererFactory:e,sanitizer:t.get(vB,null),changeDetectionScheduler:t.get(Bs,null),ngReflect:!1}}(u),f=d.rendererFactory.createRenderer(null,c),h=r?function VL(t,e,n,r){const i=r.get(gx,!1)||n===po.ShadowDom,s=t.selectRootElement(e,i);return function qL(t){Tw(t)}(s),s}(f,r,c.encapsulation,u):function WB(t,e){const n=(t.selectors[0][0]||"div").toLowerCase();return Ed(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),g=s?.some(RS)||i?.some(b=>"function"!=typeof b&&b.bindings.some(RS)),m=Id(null,l,null,512|Fm(c),null,null,d,f,u,null,null);m[26]=h,Fp(m);let T=null;try{const b=wS(26,l,m,"#host",()=>l.directiveRegistry,!0,0);h&&(vw(f,h,b),Sn(h,m)),wd(l,m,b),Sm(l,b,m),SS(l,b),void 0!==n&&function ZB(t,e,n){const r=t.projection=[];for(let o=0;o<e.length;o++){const i=n[o];r.push(null!=i&&i.length?Array.from(i):null)}}(b,this.ngContentSelectors,n),T=hn(b.index,m),m[8]=T[8],Sd(l,m,null)}catch(b){throw null!==T&&rm(T),rm(m),b}finally{rt(23),Bp()}return new YB(this.componentType,m,!!g)}finally{ge(a)}}}function RS(t){const e=t[Qo].kind;return"input"===e||"twoWay"===e}class YB extends mB{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ps(n[1],26),this.location=zs(this._tNode,n),this.instance=hn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Uc(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;Gm(r,o[1],o,e,n),this.previousInputValues.set(e,n),Fc(hn(r.index,o),1)}get injector(){return new Rt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let Er=(()=>class t{static __NG_ELEMENT_ID__=XB})();function XB(){return function NS(t,e){let n;const r=e[t.index];return fn(r)?n=r:(n=$w(r,e,null,t),e[t.index]=n,Bm(e,n)),OS(n,e,t,r),new MS(n,t,e)}(Le(),N())}const e1=Er,MS=class extends e1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return zs(this._hostTNode,this._hostLView)}get injector(){return new Rt(this._hostTNode,this._hostLView)}get parentInjector(){const e=od(this._hostTNode,this._hostLView);if(Qp(e)){const n=Ec(e,this._hostLView),r=Cc(e);return new Rt(n[1].data[r+8],n)}return new Rt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=kS(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,o,$i(this._hostTNode,null)),a}createComponent(e,n,r,o,i,s,a){const c=e&&!function yc(t){return"function"==typeof t}(e);let l;if(c)l=n;else{const T=n||{};l=T.index,r=T.injector,o=T.projectableNodes,i=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}const u=c?e:new $d(Ke(e)),d=r||this.parentInjector;if(!i&&null==u.ngModule){const b=(c?d:this.parentInjector).get(Qt,null);b&&(i=b)}Ke(u.componentType??{});const m=u.create(d,o,null,i,s,a);return this.insertImpl(m.hostView,l,$i(this._hostTNode,null)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const o=e._lView;if(function I0(t){return fn(t[3])}(o)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=o[3],l=new MS(c,c[5],c[3]);l.detach(l.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;return na(s,o,i,r),e.attachToViewContainerRef(),PE(y_(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=kS(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Bc(this._lContainer,n);r&&(xu(y_(this._lContainer),n),xc(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Bc(this._lContainer,n);return r&&null!=xu(y_(this._lContainer),n)?new Uc(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kS(t){return t[8]}function y_(t){return t[8]||(t[8]=[])}let OS=function xS(t,e,n,r){if(t[7])return;let o;o=8&n.type?qt(r):function t1(t,e){const n=t[11],r=n.createComment(""),o=In(e,t),i=n.parentNode(o);return qi(n,i,r,n.nextSibling(o),!1),r}(e,n),t[7]=o};const KS=new Set;function Hn(t){KS.has(t)||(KS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}let Ji=class{},WS=class{};class R_ extends Ji{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new AS(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;const i=Lr(e);this._bootstrapComponents=Hr(i.bootstrap),this._r3Injector=pI(e,n,[{provide:Ji,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver},...r],Oe(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class QS extends WS{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new R_(this.moduleType,e,[])}}class E1 extends Ji{injector;componentFactoryResolver=new AS(this);instance=null;constructor(e){super();const n=new ki([...e.providers,{provide:Ji,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],e.parent||yp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Gd(t,e,n=null){return new E1({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let I1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=hp(0,n.type),o=r.length>0?Gd([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:t,providedIn:"environment",factory:()=>new t(G(Qt))})}return t})();function zd(t){return go(()=>{const e=JS(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ad.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(I1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||po.Emulated,styles:t.styles||ft,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&Hn("NgStandalone"),YS(n);const r=t.dependencies;return n.directiveDefs=Kd(r,!1),n.pipeDefs=Kd(r,!0),n.id=function A1(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function T1(t){return Ke(t)||dn(t)}function w1(t){return null!==t}function Jo(t){return go(()=>({type:t.type,bootstrap:t.bootstrap||ft,declarations:t.declarations||ft,imports:t.imports||ft,exports:t.exports||ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function S1(t,e){if(null==t)return xr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const o=t[r];let i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=Td.None,c=null),n[i]=[r,a,c],e[i]=s}return n}function D1(t){if(null==t)return xr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function mn(t){return go(()=>{const e=JS(t);return YS(e),e})}function JS(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||ft,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:S1(t.inputs,e),outputs:D1(t.outputs),debugInfo:null}}function YS(t){t.features?.forEach(e=>e(t))}function Kd(t,e){if(!t)return null;const n=e?Fr:T1;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(w1)}function Yi(t,e,n,r,o,i,s,a,c,l,u){const d=n+26,f=e.firstCreatePass?function H1(t,e,n,r,o,i,s,a,c){const l=e.consts,u=ra(e,t,4,s||null,a||null);kp()&&m_(e,n,u,Tn(l,c),Vm),u.mergedAttrs=Gs(u.mergedAttrs,u.attrs),zp(e,u);const d=u.tView=Lm(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(d,e,t,r,o,i,s,a,l):e.data[d];c&&(f.flags|=c),yr(f,!1);const h=iD(e,t,f,n);pc()&&Dd(e,t,h,f),Sn(h,t);const g=$w(h,t,h,f);return t[d]=g,Bm(t,g),$u(f)&&wd(e,t,f),null!=l&&Um(t,f,u),f}let iD=function sD(t,e,n,r){return mc(!0),e[11].createComment("")};var N_=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(N_||{});const Xc=new L(""),dD=!1,jn=class z1 extends Re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Ep()&&(this.destroyRef=M(ho,{optional:!0})??void 0,this.pendingTasks=M(Bi,{optional:!0})??void 0)}emit(e){const n=ge(null);try{super.next(e)}finally{ge(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof Wt&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function fD(t){let e,n;function r(){t=_c;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hD(t){return queueMicrotask(()=>t()),()=>{t=_c}}const O_="isAngularZone",Yd=O_+"_ID";let K1=0;class We{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new jn(!1);onMicrotaskEmpty=new jn(!1);onStable=new jn(!1);onError=new jn(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=dD}=e;if(typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,function J1(t){const e=()=>{!function Q1(t){function e(){fD(()=>{t.callbackScheduled=!1,x_(t),t.isCheckStableRunning=!0,P_(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),x_(t))}(t)},n=K1++;t._inner=t._inner.fork({name:"angular",properties:{[O_]:!0,[Yd]:n,[Yd+n]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(function Y1(t){return mD(t,"__ignore_ng_zone__")}(c))return r.invokeTask(i,s,a,c);try{return gD(t),r.invokeTask(i,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),pD(t)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return gD(t),r.invoke(i,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function Z1(t){return mD(t,"__scheduler_tick__")}(c)&&e(),pD(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,x_(t),P_(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(O_)}static assertInAngularZone(){if(!We.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(We.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,W1,_c,_c);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const W1={};function P_(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function x_(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function gD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pD(t){t._nesting--,P_(t)}class L_{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new jn;onMicrotaskEmpty=new jn;onStable=new jn;onError=new jn;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}function mD(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let _D=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})();const yD=[0,1,2,3];let eU=(()=>{class t{ngZone=M(We);scheduler=M(Bs);errorHandler=M(Fs,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Xc,{optional:!0})}execute(){const n=this.sequences.size>0;n&&rt(16),this.executing=!0;for(const r of yD)for(const o of this.sequences)if(!o.erroredOrDestroyed&&o.hooks[r])try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,o.hooks[r])(o.pipelinedValue),o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&rt(17)}register(n){const{view:r}=n;void 0!==r?((r[25]??=[]).push(n),xs(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(N_.AFTER_NEXT_RENDER,n):n()}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})();class vD{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,o,i,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const e=this.view?.[25];e&&(this.view[25]=e.filter(n=>n!==this))}}function F_(t,e){!e?.injector&&function _0(){if(!Ep())throw new R(-203,!1)}();const n=e?.injector??M(Un);return Hn("NgAfterNextRender"),function CD(t,e,n,r){const o=e.get(_D);o.impl??=e.get(eU);const i=e.get(Xc,null,{optional:!0}),s=!0!==n?.manualCleanup?e.get(ho):null,a=e.get(jp,null,{optional:!0}),c=new vD(o.impl,function nU(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t),a?.view,r,s,i?.snapshot(null));return o.impl.register(c),c}(t,n,e,!0)}let RD=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const VD=new L(""),tf=new L("");let K_,G_=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(n,r,o){this._ngZone=n,this.registry=r,Ep()&&(this._destroyRef=M(ho,{optional:!0})??void 0),K_||(function iH(t){K_=t}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){const n=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{n.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n()},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}static \u0275fac=function(r){return new(r||t)(G(We),G(z_),G(tf))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),z_=(()=>{class t{_applications=new Map;registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return K_?.findTestabilityInTree(this,n,r)??null}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function nf(t){return!!t&&"function"==typeof t.then}function qD(t){return!!t&&"function"==typeof t.subscribe}const $D=new L("");function GD(t){return Uu([{provide:$D,multi:!0,useValue:t}])}let zD=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M($D,{optional:!0})??[];injector=M(Un);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const i=nr(this.injector,o);if(nf(i))n.push(i);else if(qD(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const KD=new L("");function WD(t,e){return Array.isArray(e)?e.reduce(WD,t):{...t,...e}}let Zo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(vr);afterRenderManager=M(_D);zonelessEnabled=M(vI);rootEffectScheduler=M(II);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Re;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Bi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(He(n=>!n))}constructor(){M(Xc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(Qt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Un.NULL){return this._injector.get(We).run(()=>{rt(10);const s=n instanceof _S;if(!this._injector.get(zD).done)throw new R(405,"");let c;c=s?n:this._injector.get(Fd).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const l=function aH(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Ji),d=c.create(o,[],r||c.selector,l),f=d.location.nativeElement,h=d.injector.get(VD,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),rf(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),rt(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){rt(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(N_.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new R(101,!1);const n=ge(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ge(n),this.afterTick.next(),rt(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(f_,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)rt(14),this.synchronizeOnce(),rt(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews)(r||zu(o))&&(Ad(o,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>zu(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;rf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(KD,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>rf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function sf(t,e,n,r,o,i,s,a){Hn("NgControlFlow");const c=N(),l=Ae();return Yi(c,l,t,e,n,r,o,Tn(l.consts,i),256,s,a),ty}function ty(t,e,n,r,o,i,s,a){Hn("NgControlFlow");const c=N(),l=Ae();return Yi(c,l,t,e,n,r,o,Tn(l.consts,i),512,s,a),ty}function af(t,e){Hn("NgControlFlow");const n=N(),r=Bn(),o=n[r]!==Ye?n[r]:-1,i=-1!==o?cf(n,26+o):void 0;if(Ct(n,r,t)){const a=ge(null);try{if(void 0!==i&&function t_(t,e){const n=Bc(t,e);return void 0!==n&&xc(n[1],n),n}(i,0),-1!==t){const c=26+t,l=cf(n,c),u=function ny(t,e){return Ps(t,e)}(n[1],c),d=null;na(l,function ea(t,e,n,r){const o=ge(null);try{const i=e.tView,c=Id(t,i,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const u=t[18];return null!==u&&(c[18]=u.createEmbeddedView(i)),Sd(i,c,n),c}finally{ge(o)}}(n,u,e,{dehydratedView:d}),0,$i(u,d))}}finally{ge(a)}}else if(void 0!==i){const a=function Gw(t,e){const n=10+e;if(n<t.length)return t[n]}(i,0);void 0!==a&&(a[8]=e)}}function cf(t,e){return t[e]}function ry(t,e,n,r,o){Gm(e,t,n,o?"class":"style",r)}function sr(t,e,n,r){const o=N(),i=Ae(),s=26+t,a=o[11],c=i.firstCreatePass?wS(s,i,o,e,Vm,kp(),n,r):i.data[s],l=ab(i,o,c,a,e,t);o[s]=l;const u=$u(c);return yr(c,!0),vw(a,l,c),!Gi(c)&&pc()&&Dd(i,o,l,c),(0===function w0(){return ve.lFrame.elementDepthCount}()||u)&&Sn(l,o),function S0(){ve.lFrame.elementDepthCount++}(),u&&(wd(i,o,c),Sm(i,c,o)),null!==r&&Um(o,c),sr}function Vn(){let t=Le();Np()?function Op(){ve.lFrame.isParent=!1}():(t=t.parent,yr(t,!1));const e=t;(function b0(t){return ve.skipHydrationRootTNode===t})(e)&&function M0(){ve.skipHydrationRootTNode=null}(),function D0(){ve.lFrame.elementDepthCount--}();const n=Ae();return n.firstCreatePass&&SS(n,e),null!=e.classesWithoutHost&&function fP(t){return!!(8&t.flags)}(e)&&ry(n,e,N(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function hP(t){return!!(16&t.flags)}(e)&&ry(n,e,N(),e.stylesWithoutHost,!1),Vn}function lf(t,e,n,r){return sr(t,e,n,r),Vn(),lf}let ab=(t,e,n,r,o,i)=>(mc(!0),Ed(r,o,function H0(){return ve.lFrame.currentNamespace}()));function uf(){return N()}const df="en-US";let gb=df;function ga(t,e,n){const r=N(),o=Ae(),i=Le();return function cy(t,e,n,r,o,i,s){let a=!0,c=null;if((3&r.type||s)&&(c??=Vd(r,e,i),function xB(t,e,n,r,o,i,s,a){const c=$u(t);let l=!1,u=null;if(!r&&c&&(u=function LB(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[7],c=o[i+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(e,n,i,t.index)),null!==u)(u.__ngLastListenerFn__||u).__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0;else{const d=In(t,n),f=r?r(d):d,h=o.listen(f,i,a);bS(r?m=>r(qt(m[t.index])):t.index,e,n,i,a,h,!1)}return l}(r,t,e,s,n,o,i,c)&&(a=!1)),a){const l=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let d=0;d<u.length;d+=2){const f=u[d],h=u[d+1];c??=Vd(r,e,i),qd(r,e,f,h,o,c)}if(l&&l.length)for(const d of l)c??=Vd(r,e,i),qd(r,e,d,o,o,c)}}(o,r,r[11],i,t,e,n),ga}function cl(t=1){return function x0(t){return(ve.lFrame.contextLView=function ZE(t,e){for(;t>0;)e=e[14],t--;return e}(t,ve.lFrame.contextLView))[8]}(t)}function yo(t,e=""){const n=N(),r=Ae(),o=t+26,i=r.firstCreatePass?ra(r,o,1,e,null):r.data[o],s=Xb(r,n,i,e,t);n[o]=s,pc()&&Dd(r,n,s,i),yr(i,!1)}let Xb=(t,e,n,r,o)=>(mc(!0),function Pm(t,e){return t.createText(e)}(e[11],r));function hy(t){return gy("",t),hy}function gy(t,e,n){const r=N(),o=function tA(t,e,n,r=""){return Ct(t,Bn(),n)?e+Te(n)+r:Ye}(r,t,e,n);return o!==Ye&&function vo(t,e,n){const r=function Os(t,e){return qt(e[t])}(e,t);!function pw(t,e,n){t.setValue(e,n)}(t[11],r,n)}(r,Jt(),o),gy}class Uq{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Hq=(()=>{class t{compileModuleSync(n){return new QS(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=Hr(Lr(n).declarations).reduce((s,a)=>{const c=Ke(a);return c&&s.push(new $d(c)),s},[]);return new Uq(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vq=(()=>{class t{zone=M(We);changeDetectionScheduler=M(Bs);applicationRef=M(Zo);applicationErrorHandler=M(vr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new We({...Ty(),scheduleInRootZone:n}),[{provide:We,useFactory:t},{provide:Lo,multi:!0,useFactory:()=>{const r=M(Vq,{optional:!0});return()=>r.initialize()}},{provide:Lo,multi:!0,useFactory:()=>{const r=M($q);return()=>{r.initialize()}}},!0===e?{provide:CI,useValue:!0}:[],{provide:EI,useValue:n??dD},{provide:vr,useFactory:()=>{const r=M(We),o=M(Qt);let i;return s=>{i??=o.get(Fs),r.runOutsideAngular(()=>i.handleError(s))}}}]}function Ty(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let $q=(()=>{class t{subscription=new Wt;initialized=!1;zone=M(We);pendingTasks=M(Bi);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WA=(()=>{class t{applicationErrorHandler=M(vr);appRef=M(Zo);taskService=M(Bi);ngZone=M(We);zonelessEnabled=M(vI);tracing=M(Xc,{optional:!0});disableScheduling=M(CI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Wt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(EI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof L_||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const o=this.useMicrotaskScheduler?hD:fD;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>o(()=>this.tick())):this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ti=new L("",{providedIn:"root",factory:()=>M(ti,{optional:!0,skipSelf:!0})||function Gq(){return typeof $localize<"u"&&$localize.locale||df}()}),If=Symbol("InputSignalNode#UNSET"),ZA={...rc,transformFn:void 0,applyValueToInputSignal(t,e){Ei(t,e)}};function XA(t,e){const n=Object.create(ZA);function r(){if(gt(n),n.value===If)throw new R(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[yt]=n,r}function eR(t,e){return XA(t,e)}new L("").__NG_ELEMENT_ID__=t=>{const e=Le();if(null===e)throw new R(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new R(204,!1)};const n$=(eR.required=function t$(t){return XA(If,t)},eR),Tf=new L(""),a$=new L("");function hl(t){return!t.moduleRef}let sR;function aR(){sR=c$}function c$(t,e){const n=t.injector.get(Zo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new R(-403,!1);t.instance.ngDoBootstrap(n)}e.push(t)}let cR=(()=>{class t{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(n){this._injector=n}bootstrapModuleFactory(n,r){const o=r?.scheduleInRootZone,s=r?.ignoreChangesOutsideZone,a=[GA({ngZoneFactory:()=>function X1(t="zone.js",e){return"noop"===t?new L_:"zone.js"===t?new We(e):t}(r?.ngZone,{...Ty({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:o}),ignoreChangesOutsideZone:s}),{provide:Bs,useExisting:WA},V0],c=function C1(t,e,n){return new R_(t,e,n,!1)}(n.moduleType,this.injector,a);return aR(),function iR(t){const e=hl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(We);return n.run(()=>{hl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(vr);let o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),hl(t)){const i=()=>e.destroy(),s=t.platformInjector.get(Tf);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{const i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Tf);s.add(i),t.moduleRef.onDestroy(()=>{rf(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return function l$(t,e,n){try{const r=n();return nf(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const i=e.get(zD);return i.runInitializers(),i.donePromise.then(()=>{if(function lj(t){"string"==typeof t&&(gb=t.toLowerCase().replace(/_/g,"-"))}(e.get(ti,df)||df),!e.get(a$,!0))return hl(t)?e.get(Zo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(hl(t)){const c=e.get(Zo);return void 0!==t.rootComponent&&c.bootstrap(t.rootComponent),c}return sR?.(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(n,r=[]){const o=WD({},r);return aR(),function r$(t,e,n){const r=new QS(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Tf,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||t)(G(Un))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ni=null;const lR=new L("");function uR(t,e,n=[]){const r=`Platform: ${e}`,o=new L(r);return(i=[])=>{let s=Ry();if(!s||s.injector.get(lR,!1)){const a=[...n,...i,{provide:o,useValue:!0}];t?t(a):function u$(t){if(ni&&!ni.get(lR,!1))throw new R(400,!1);(function sH(){!function Du(t){un=t}(()=>{throw new R(600,"")})})(),ni=t;const e=t.get(cR);(function fR(t){const e=t.get(_T,null);nr(t,()=>{e?.forEach(n=>n())})})(t)}(function dR(t=[],e){return Un.create({name:e,providers:[{provide:mp,useValue:"platform"},{provide:Tf,useValue:new Set([()=>ni=null])},...t]})}(a,r))}return function d$(){const e=Ry();if(!e)throw new R(401,!1);return e}()}}function Ry(){return ni?.get(cR)??null}let My=(()=>class t{static __NG_ELEMENT_ID__=h$})();function h$(t){return function g$(t,e,n){if(Ho(t)&&!n){const r=hn(t.index,e);return new Uc(r,r)}return 175&t.type?new Uc(e[15],e):null}(Le(),N(),!(16&~t))}const T$=uR(null,"core",[]);let w$=(()=>{class t{constructor(n){}static \u0275fac=function(r){return new(r||t)(G(Zo))};static \u0275mod=Jo({type:t});static \u0275inj=Xn({})}return t})();let PR=null;function va(){return PR}class Z${}let xy=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>M(e2),providedIn:"platform"})}return t})();const X$=new L("");let e2=(()=>{class t extends xy{_location;_history;_doc=M(pn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return va().getBaseHref(this._doc)}onPopState(n){const r=va().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=va().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Ly(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function xR(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function Co(t){return t&&"?"!==t[0]?`?${t}`:t}let is=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>M(FR),providedIn:"root"})}return t})();const LR=new L("");let FR=(()=>{class t extends is{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(pn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ly(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Co(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Co(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Co(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(G(xy),G(LR,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ri=(()=>{class t{_subject=new Re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function r2(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(xR(BR(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Co(r))}normalize(n){return t.stripTrailingSlash(function n2(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,BR(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Co(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Co(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=Co;static joinWithSlash=Ly;static stripTrailingSlash=xR;static \u0275fac=function(r){return new(r||t)(G(is))};static \u0275prov=q({token:t,factory:()=>function t2(){return new ri(G(is))}(),providedIn:"root"})}return t})();function BR(t){return t.replace(/\/index.html$/,"")}function UR(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}class jR{}Error,Error;let w2=(()=>{class t extends is{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Ly(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Co(i))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Co(i))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(G(xy),G(LR,8))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),Zy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=Xn({})}return t})();const Xy=new L("");let lM=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(G(Xy),G(We))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();class uM{_doc;constructor(e){this._doc=e}manager}const Hf="ng-app-id";function dM(t){for(const e of t)e.remove()}function fM(t,e){const n=e.createElement("style");return n.textContent=t,n}function ev(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let hM=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.isServer=function i2(t){return"server"===t}(i),function BG(t,e,n,r){const o=t.head?.querySelectorAll(`style[${Hf}="${e}"],link[${Hf}="${e}"]`);if(o)for(const i of o)i.removeAttribute(Hf),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const o of n)this.addUsage(o,this.inline,fM);r?.forEach(o=>this.addUsage(o,this.external,ev))}removeStyles(n,r){for(const o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){const i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){const o=r.get(n);o&&(o.usage--,o.usage<=0&&(dM(o.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])dM(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:o}]of this.inline)o.push(this.addElement(n,fM(r,this.doc)));for(const[r,{elements:o}]of this.external)o.push(this.addElement(n,ev(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Hf,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(G(pn),G(ud),G(yT,8),G(am))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();const tv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nv=/%COMP%/g,$G=new L("",{providedIn:"root",factory:()=>!0});function pM(t,e){return e.map(n=>n.replace(nv,t))}let mM=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new rv(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(n,r);return o instanceof yM?o.applyToHost(n):o instanceof ov&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case po.Emulated:i=new yM(c,l,r,this.appId,u,s,a,d,f);break;case po.ShadowDom:return new WG(c,l,n,r,s,a,this.nonce,d,f);default:i=new ov(c,l,r,u,s,a,d,f)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(G(lM),G(hM),G(ud),G($G),G(pn),G(am),G(We),G(yT),G(Xc,8))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();class rv{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,o,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(tv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_M(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_M(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=tv[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=tv[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(Ko.DashCase|Ko.Important)?e.style.setProperty(n,r,o&Ko.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ko.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,o){if("string"==typeof e&&!(e=va().getGlobalEventTarget(this.doc,e)))throw new R(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,o)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function _M(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class WG extends rv{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,o,i,s,a,c,l){super(e,i,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=pM(o.id,u);for(const f of u){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}const d=o.getExternalStyles?.();if(d)for(const f of d){const h=ev(f,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ov extends rv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,o,i,s,a,c,l){super(e,i,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=l?pM(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class yM extends ov{contentAttr;hostAttr;constructor(e,n,r,o,i,s,a,c,l){const u=o+"-"+r.id;super(e,n,r,i,s,a,c,l,u),this.contentAttr=function GG(t){return"_ngcontent-%COMP%".replace(nv,t)}(u),this.hostAttr=function zG(t){return"_nghost-%COMP%".replace(nv,t)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class iv extends Z${supportsDOMEvents=!0;static makeCurrent(){!function Y$(t){PR??=t}(new iv)}onAndCancel(e,n,r,o){return e.addEventListener(n,r,o),()=>{e.removeEventListener(n,r,o)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function QG(){return _l=_l||document.head.querySelector("base"),_l?_l.getAttribute("href"):null}();return null==n?null:function JG(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){_l=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return UR(document.cookie,e)}}let _l=null,ZG=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),XG=(()=>{class t extends uM{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(G(pn))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();const vM=["alt","control","meta","shift"],ez={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let nz=(()=>{class t extends uM{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o,i){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>va().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vM.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=ez[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),vM.forEach(s=>{s!==o&&(0,tz[s])(n)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(G(pn))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();const sz=uR(T$,"browser",[{provide:am,useValue:"browser"},{provide:_T,useValue:function rz(){iv.makeCurrent()},multi:!0},{provide:pn,useFactory:function iz(){return function ox(t){sm=t}(document),document}}]),IM=[{provide:tf,useClass:class YG{addToWindow(e){j.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new R(5103,!1);return i},j.getAllAngularTestabilities=()=>e.getAllTestabilities(),j.getAllAngularRootElements=()=>e.getAllRootElements(),j.frameworkStabilizers||(j.frameworkStabilizers=[]),j.frameworkStabilizers.push(r=>{const o=j.getAllAngularTestabilities();let i=o.length;const s=function(){i--,0==i&&r()};o.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?va().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}}},{provide:VD,useClass:G_,deps:[We,z_,tf]},{provide:G_,useClass:G_,deps:[We,z_,tf]}],TM=[{provide:mp,useValue:"root"},{provide:Fs,useFactory:function oz(){return new Fs}},{provide:Xy,useClass:XG,multi:!0,deps:[pn]},{provide:Xy,useClass:nz,multi:!0,deps:[pn]},mM,hM,lM,{provide:f_,useExisting:mM},{provide:jR,useClass:ZG},[]];let az=(()=>{class t{constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=Xn({providers:[...TM,...IM],imports:[Zy,w$]})}return t})(),cz=(()=>{class t{static \u0275prov=q({token:t,providedIn:"root",factory:()=>new lz(M(pn),window)})}return t})();class lz{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo({...n,left:e[0],top:e[1]})}scrollToAnchor(e,n){const r=function uz(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e,n){const r=e.getBoundingClientRect(),o=r.left+this.window.pageXOffset,i=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo({...n,left:o-s[0],top:i-s[1]})}}function oi(t){return this instanceof oi?(this.v=t,this):new oi(t)}function FM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function fv(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}(a,c,(s=t[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const BM=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function UM(t){return at(t?.then)}function HM(t){return at(t[xt])}function jM(t){return Symbol.asyncIterator&&at(t?.[Symbol.asyncIterator])}function VM(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const qM=function sK(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function $M(t){return at(t?.[qM])}function GM(t){return function LM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(h){return new Promise(function(g,m){i.push([f,h,g,m])>1||a(f,h)})})}function a(f,h){try{!function c(f){f.value instanceof oi?Promise.resolve(f.value.v).then(l,u):d(i[0][2],f)}(r[f](h))}catch(g){d(i[0][3],g)}}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:o}=yield oi(n.read());if(o)return yield oi(void 0);yield yield oi(r)}}finally{n.releaseLock()}})}function zM(t){return at(t?.getReader)}function Io(t){if(t instanceof le)return t;if(null!=t){if(HM(t))return function aK(t){return new le(e=>{const n=t[xt]();if(at(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(BM(t))return function cK(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(UM(t))return function lK(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Mu)})}(t);if(jM(t))return KM(t);if($M(t))return function uK(t){return new le(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(zM(t))return function dK(t){return KM(GM(t))}(t)}throw VM(t)}function KM(t){return new le(e=>{(function fK(t,e){var n,r,o,i;return function PM(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):function o(i){return i instanceof n?i:new n(function(s){s(i)})}(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=FM(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function To(t,e,n,r=0,o=!1){const i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function WM(t,e=0){return Yt((n,r)=>{n.subscribe($t(r,o=>To(r,t,()=>r.next(o),e),()=>To(r,t,()=>r.complete(),e),o=>To(r,t,()=>r.error(o),e)))})}function QM(t,e=0){return Yt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function JM(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{To(n,e,()=>{const r=t[Symbol.asyncIterator]();To(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Ze(t,e){return e?function yK(t,e){if(null!=t){if(HM(t))return function hK(t,e){return Io(t).pipe(QM(e),WM(e))}(t,e);if(BM(t))return function pK(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(UM(t))return function gK(t,e){return Io(t).pipe(QM(e),WM(e))}(t,e);if(jM(t))return JM(t,e);if($M(t))return function mK(t,e){return new le(n=>{let r;return To(n,e,()=>{r=t[qM](),To(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>at(r?.return)&&r.return()})}(t,e);if(zM(t))return function _K(t,e){return JM(GM(t),e)}(t,e)}throw VM(t)}(t,e):Io(t)}function hv(t){return t[t.length-1]}function $f(t){return function vK(t){return t&&at(t.schedule)}(hv(t))?t.pop():void 0}function te(...t){return Ze(t,$f(t))}const{isArray:EK}=Array,{getPrototypeOf:IK,prototype:TK,keys:wK}=Object;const{isArray:bK}=Array;function gv(...t){const e=$f(t),n=function CK(t){return at(hv(t))?t.pop():void 0}(t),{args:r,keys:o}=function SK(t){if(1===t.length){const e=t[0];if(EK(e))return{args:e,keys:null};if(function DK(t){return t&&"object"==typeof t&&IK(t)===TK}(e)){const n=wK(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return Ze([],e);const i=new le(function kK(t,e,n=Qe){return r=>{YM(e,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)YM(e,()=>{const l=Ze(t[c],e);let u=!1;l.subscribe($t(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>function MK(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}(o,s):Qe));return n?i.pipe(function RK(t){return He(e=>function AK(t,e){return bK(e)?t(...e):t(e)}(t,e))}(n)):i}function YM(t,e,n){t?To(n,t,e):e()}const El=Is(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function on(t,e,n=1/0){return at(e)?on((r,o)=>He((i,s)=>e(r,i,o,s))(Io(t(r,o))),n):("number"==typeof e&&(n=e),Yt((r,o)=>function NK(t,e,n,r,o,i,s,a){const c=[];let l=0,u=0,d=!1;const f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?g(m):c.push(m),g=m=>{i&&e.next(m),l++;let T=!1;Io(n(m,u++)).subscribe($t(e,b=>{o?.(b),i?h(b):e.next(b)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){const b=c.shift();s?To(e,s,()=>g(b)):g(b)}f()}catch(b){e.error(b)}}))};return t.subscribe($t(e,h,()=>{d=!0,f()})),()=>{a?.()}}(r,o,t,n)))}function Il(t=1/0){return on(Qe,t)}function pv(...t){return function OK(){return Il(1)}()(Ze(t,$f(t)))}function mv(t){return new le(e=>{Io(t()).subscribe(e)})}function Gf(t,e){const n=at(t)?t:()=>t,r=o=>o.error(n());return new le(e?o=>e.schedule(r,0,o):r)}const ur=new le(t=>t.complete());function _v(){return Yt((t,e)=>{let n=null;t._refCount++;const r=$t(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class ZM extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,wI(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wt;const n=this.getSubject();e.add(this.source.subscribe($t(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wt.EMPTY)}return e}refCount(){return _v()(this)}}function Xt(t,e){return Yt((n,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();n.subscribe($t(r,c=>{o?.unsubscribe();let l=0;const u=i++;Io(t(c,u)).subscribe(o=$t(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Vr(t){return t<=0?()=>ur:Yt((e,n)=>{let r=0;e.subscribe($t(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function $n(t,e){return Yt((n,r)=>{let o=0;n.subscribe($t(r,i=>t.call(e,i,o++)&&r.next(i)))})}function zf(t){return Yt((e,n)=>{let r=!1;e.subscribe($t(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function XM(t=LK){return Yt((e,n)=>{let r=!1;e.subscribe($t(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function LK(){return new El}function ss(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$n((o,i)=>t(o,i,r)):Qe,Vr(1),n?zf(e):XM(()=>new El))}function ii(t,e){return at(e)?on(t,e,1):on(t,1)}function sn(t,e,n){const r=at(t)||e||n?{next:t,error:e,complete:n}:t;return r?Yt((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe($t(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Qe}function si(t){return Yt((e,n)=>{let i,r=null,o=!1;r=e.subscribe($t(n,void 0,void 0,s=>{i=Io(t(s,si(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function yv(t){return t<=0?()=>ur:Yt((e,n)=>{let r=[];e.subscribe($t(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Tl(t){return Yt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ek(t){return Yt((e,n)=>{Io(t).subscribe($t(n,()=>n.complete(),Ss)),!n.closed&&e.subscribe(n)})}let HK=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(G(pn))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ke="primary",Sl=Symbol("RouteTitle");class $K{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ea(t){return new $K(t)}function GK(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(":"===s[0])o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function qr(t,e){const n=t?vv(t):void 0,r=e?vv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!rk(t[o],e[o]))return!1;return!0}function vv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}return t===e}function ok(t){return t.length>0?t[t.length-1]:null}function wo(t){return function Bz(t){return!!t&&(t instanceof le||at(t.lift)&&at(t.subscribe))}(t)?t:nf(t)?Ze(Promise.resolve(t)):te(t)}const KK={exact:function ak(t,e,n){if(!cs(t.segments,e.segments)||!Kf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!ak(t.children[r],e.children[r],n))return!1;return!0},subset:ck},ik={exact:function WK(t,e){return qr(t,e)},subset:function QK(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>rk(t[n],e[n]))},ignored:()=>!0};function sk(t,e,n){return KK[n.paths](t.root,e.root,n.matrixParams)&&ik[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function ck(t,e,n){return lk(t,e,e.segments,n)}function lk(t,e,n,r){if(t.segments.length>n.length){const o=t.segments.slice(0,n.length);return!(!cs(o,n)||e.hasChildren()||!Kf(o,n,r))}if(t.segments.length===n.length){if(!cs(t.segments,n)||!Kf(t.segments,n,r))return!1;for(const o in e.children)if(!t.children[o]||!ck(t.children[o],e.children[o],r))return!1;return!0}{const o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(cs(t.segments,o)&&Kf(t.segments,o,r)&&t.children[ke])&&lk(t.children[ke],e,i,r)}}function Kf(t,e,n){return e.every((r,o)=>ik[n](t[o].parameters,r.parameters))}class as{root;queryParams;fragment;_queryParamMap;constructor(e=new it([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ea(this.queryParams),this._queryParamMap}toString(){return ZK.serialize(this)}}class it{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qf(this)}}class Dl{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ea(this.parameters),this._parameterMap}toString(){return fk(this)}}function cs(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let bl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>new Wf,providedIn:"root"})}return t})();class Wf{parse(e){const n=new l8(e);return new as(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Al(e.root,!0)}`,r=function t8(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Jf(n)}=${Jf(o)}`).join("&"):`${Jf(n)}=${Jf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function XK(t){return encodeURI(t)}(e.fragment)}`:""}`}}const ZK=new Wf;function Qf(t){return t.segments.map(e=>fk(e)).join("/")}function Al(t,e){if(!t.hasChildren())return Qf(t);if(e){const n=t.children[ke]?Al(t.children[ke],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==ke&&r.push(`${o}:${Al(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function YK(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===ke&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==ke&&(n=n.concat(e(o,r)))}),n}(t,(r,o)=>o===ke?[Al(t.children[ke],!1)]:[`${o}:${Al(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ke]?`${Qf(t)}/${n[0]}`:`${Qf(t)}/(${n.join("//")})`}}function uk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jf(t){return uk(t).replace(/%3B/gi,";")}function Cv(t){return uk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yf(t){return decodeURIComponent(t)}function dk(t){return Yf(t.replace(/\+/g,"%20"))}function fk(t){return`${Cv(t.path)}${function e8(t){return Object.entries(t).map(([e,n])=>`;${Cv(e)}=${Cv(n)}`).join("")}(t.parameters)}`}const n8=/^[^\/()?;#]+/;function Ev(t){const e=t.match(n8);return e?e[0]:""}const r8=/^[^\/()?;=#]+/,i8=/^[^=?&#]+/,a8=/^[^&#]+/;class l8{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new it([],{}):new it([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ke]=new it(e,n)),r}parseSegment(){const e=Ev(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new Dl(Yf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function o8(t){const e=t.match(r8);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=Ev(this.remaining);o&&(r=o,this.capture(r))}e[Yf(n)]=Yf(r)}parseQueryParam(e){const n=function s8(t){const e=t.match(i8);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function c8(t){const e=t.match(a8);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=dk(n),i=dk(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ev(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new R(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ke);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[ke]:new it([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}}function hk(t){return t.segments.length>0?new it([],{[ke]:t}):t}function gk(t){const e={};for(const[r,o]of Object.entries(t.children)){const i=gk(o);if(r===ke&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function u8(t){if(1===t.numberOfChildren&&t.children[ke]){const e=t.children[ke];return new it(t.segments.concat(e.segments),e.children)}return t}(new it(t.segments,e))}function ls(t){return t instanceof as}function pk(t){let e;const o=hk(function n(i){const s={};for(const c of i.children){const l=n(c);s[c.outlet]=l}const a=new it(i.url,s);return i===t&&(e=a),a}(t.root));return e??o}function mk(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(0===e.length)return Iv(o,o,o,n,r);const i=function f8(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new yk(!0,0,t);let e=0,n=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new yk(n,e,r)}(e);if(i.toRoot())return Iv(o,o,new it([],{}),n,r);const s=function h8(t,e,n){if(t.isAbsolute)return new Xf(e,!0,0);if(!n)return new Xf(e,!1,NaN);if(null===n.parent)return new Xf(n,!0,0);const r=Zf(t.commands[0])?0:1;return function g8(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new R(4005,!1);o=r.segments.length}return new Xf(r,!1,o-i)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(i,o,t),a=s.processChildren?Ml(s.segmentGroup,s.index,i.commands):vk(s.segmentGroup,s.index,i.commands);return Iv(o,s.segmentGroup,a,n,r)}function Zf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Rl(t){return"object"==typeof t&&null!=t&&t.outlets}function Iv(t,e,n,r,o){let s,i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===e?n:_k(t,e,n);const a=hk(gk(s));return new as(a,i,o)}function _k(t,e,n){const r={};return Object.entries(t.children).forEach(([o,i])=>{r[o]=i===e?n:_k(i,e,n)}),new it(t.segments,r)}class yk{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zf(r[0]))throw new R(4003,!1);const o=r.find(Rl);if(o&&o!==ok(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xf{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function vk(t,e,n){if(t??=new it([],{}),0===t.segments.length&&t.hasChildren())return Ml(t,e,n);const r=function m8(t,e,n){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;const s=t.segments[o],a=n[r];if(Rl(a))break;const c=`${a}`,l=r<n.length-1?n[r+1]:null;if(o>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!Ek(c,l,s))return i;r+=2}else{if(!Ek(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new it(t.segments.slice(0,r.pathIndex),{});return i.children[ke]=new it(t.segments.slice(r.pathIndex),t.children),Ml(i,0,o)}return r.match&&0===o.length?new it(t.segments,{}):r.match&&!t.hasChildren()?Tv(t,e,n):r.match?Ml(t,0,o):Tv(t,e,n)}function Ml(t,e,n){if(0===n.length)return new it(t.segments,{});{const r=function p8(t){return Rl(t[0])?t[0].outlets:{[ke]:t}}(n),o={};if(Object.keys(r).some(i=>i!==ke)&&t.children[ke]&&1===t.numberOfChildren&&0===t.children[ke].segments.length){const i=Ml(t.children[ke],e,n);return new it(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=vk(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new it(t.segments,o)}}function Tv(t,e,n){const r=t.segments.slice(0,e);let o=0;for(;o<n.length;){const i=n[o];if(Rl(i)){const c=_8(i.outlets);return new it(r,c)}if(0===o&&Zf(n[0])){r.push(new Dl(t.segments[e].path,Ck(n[0]))),o++;continue}const s=Rl(i)?i.outlets[ke]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Zf(a)?(r.push(new Dl(s,Ck(a))),o+=2):(r.push(new Dl(s,{})),o++)}return new it(r,{})}function _8(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Tv(new it([],{}),0,r))}),e}function Ck(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ek(t,e,n){return t==n.path&&qr(e,n.parameters)}const kl="imperative";var je=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(je||{});class $r{id;url;constructor(e,n){this.id=e,this.url=n}}class eh extends $r{type=je.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",o=null){super(e,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class So extends $r{urlAfterRedirects;type=je.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Mn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Mn||{}),th=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(th||{});class us extends $r{reason;code;type=je.NavigationCancel;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ia extends $r{reason;code;type=je.NavigationSkipped;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}}class wv extends $r{error;target;type=je.NavigationError;constructor(e,n,r,o){super(e,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ik extends $r{urlAfterRedirects;state;type=je.RoutesRecognized;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y8 extends $r{urlAfterRedirects;state;type=je.GuardsCheckStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v8 extends $r{urlAfterRedirects;state;shouldActivate;type=je.GuardsCheckEnd;constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class C8 extends $r{urlAfterRedirects;state;type=je.ResolveStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E8 extends $r{urlAfterRedirects;state;type=je.ResolveEnd;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I8{route;type=je.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T8{route;type=je.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class w8{snapshot;type=je.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S8{snapshot;type=je.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D8{snapshot;type=je.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b8{snapshot;type=je.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tk{routerEvent;position;anchor;type=je.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sv{}class nh{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function wr(t){return t.outlet||ke}function Nl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class P8{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Nl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ol(this.rootInjector)}}let Ol=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new P8(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(G(Qt))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class wk{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Dv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Dv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=bv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return bv(e,this._root).map(n=>n.value)}}function Dv(t,e){if(t===e.value)return e;for(const n of e.children){const r=Dv(t,n);if(r)return r}return null}function bv(t,e){if(t===e.value)return[e];for(const n of e.children){const r=bv(t,n);if(r.length)return r.unshift(e),r}return[]}class Sr{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ta(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Sk extends wk{snapshot;constructor(e,n){super(e),this.snapshot=n,Av(this,e)}toString(){return this.snapshot.toString()}}function Dk(t){const e=function x8(t){const i=new oh([],{},{},"",{},ke,t,null,{});return new bk("",new Sr(i,[]))}(t),n=new Z([new Dl("",{})]),r=new Z({}),o=new Z({}),i=new Z({}),s=new Z(""),a=new Pl(n,r,i,s,o,ke,t,e.root);return a.snapshot=e.root,new Sk(new Sr(a,[]),e)}class Pl{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(He(l=>l[Sl]))??te(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(He(e=>Ea(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(He(e=>Ea(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rh(t,e,n="emptyOnly"){let r;const{routeConfig:o}=t;return r=null===e||"always"!==n&&""!==o?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...o?.data,...t._resolvedData}},o&&Rk(o)&&(r.resolve[Sl]=o.title),r}class oh{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Sl]}constructor(e,n,r,o,i,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ea(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ea(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bk extends wk{url;constructor(e,n){super(n),this.url=e,Av(this,n)}toString(){return Ak(this._root)}}function Av(t,e){e.value._routerState=t,e.children.forEach(n=>Av(t,n))}function Ak(t){const e=t.children.length>0?` { ${t.children.map(Ak).join(", ")} } `:"";return`${t.value}${e}`}function Rv(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),qr(e.params,n.params)||t.paramsSubject.next(n.params),function zK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),qr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Mv(t,e){const n=qr(t.params,e.params)&&function JK(t,e){return cs(t,e)&&t.every((n,r)=>qr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Mv(t.parent,e.parent))}function Rk(t){return"string"==typeof t.title||null===t.title}const L8=new L("");let Mk=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ke;activateEvents=new jn;deactivateEvents=new jn;attachEvents=new jn;detachEvents=new jn;routerOutletData=n$(void 0);parentContexts=M(Ol);location=M(Er);changeDetector=M(My);inputBinder=M(ih,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=n;const o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new F8(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=mn({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[qs]})}return t})();class F8{route;childContexts;parent;outletData;constructor(e,n,r,o){this.route=e,this.childContexts=n,this.parent=r,this.outletData=o}get(e,n){return e===Pl?this.route:e===Ol?this.childContexts:e===L8?this.outletData:this.parent.get(e,n)}}const ih=new L("");let kk=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,o=gv([r.queryParams,r.params,r.data]).pipe(Xt(([i,s,a],c)=>(a={...i,...s,...a},0===c?te(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function J$(t){const e=Ke(t);if(!e)return null;const n=new $d(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),Nk=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=zd({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){1&r&&lf(0,"router-outlet")},dependencies:[Mk],encapsulation:2})}return t})();function kv(t){const e=t.children&&t.children.map(kv),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ke&&(n.component=Nk),n}function xl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const o=function U8(t,e,n){return e.children.map(r=>{for(const o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return xl(t,r,o);return xl(t,r)})}(t,e,n);return new Sr(r,o)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xl(t,a)),s}}const r=function H8(t){return new Pl(new Z(t.url),new Z(t.params),new Z(t.queryParams),new Z(t.fragment),new Z(t.data),t.outlet,t.component,t)}(e.value),o=e.children.map(i=>xl(t,i));return new Sr(r,o)}}class Nv{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const Ok="ngNavigationCancelingError";function sh(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Pk(!1,Mn.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function Pk(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[Ok]=!0,n.cancellationCode=e,n}function xk(t){return!!t&&t[Ok]}class q8{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Rv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const o=Ta(n);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ta(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ta(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const o=Ta(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new b8(i.value.snapshot))}),e.children.length&&this.forwardEvent(new S8(e.value.snapshot))}activateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(Rv(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class Lk{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ah{component;route;constructor(e,n){this.component=e,this.route=n}}function $8(t,e,n){const r=t._root;return Ll(r,e?e._root:null,n,[r.value])}function wa(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Di(t){return null!==Si(t)}(t)?e.get(t):t:r}function Ll(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ta(e);return t.children.forEach(s=>{(function z8(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function K8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!cs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!cs(t.url,e.url)||!qr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mv(t,e)||!qr(t.queryParams,e.queryParams);default:return!Mv(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Lk(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Ll(t,e,i.component?a?a.children:null:n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ah(a.outlet.component,s))}else s&&Fl(e,a,o),o.canActivateChecks.push(new Lk(r)),Ll(t,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Fl(a,n.getContext(s),o)),o}function Fl(t,e,n){const r=Ta(t),o=t.value;Object.entries(r).forEach(([i,s])=>{Fl(s,o.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new ah(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Bl(t){return"function"==typeof t}function Fk(t){return t instanceof El||"EmptyError"===t?.name}const ch=Symbol("INITIAL_VALUE");function Sa(){return Xt(t=>gv(t.map(e=>e.pipe(Vr(1),function xK(...t){const e=$f(t);return Yt((n,r)=>{(e?pv(t,n,e):pv(t,n)).subscribe(r)})}(ch)))).pipe(He(e=>{for(const n of e)if(!0!==n){if(n===ch)return ch;if(!1===n||eW(n))return n}return!0}),$n(e=>e!==ch),Vr(1)))}function eW(t){return ls(t)||t instanceof Nv}function Bk(t){return function se(...t){return z(t)}(sn(e=>{if("boolean"!=typeof e)throw sh(0,e)}),He(e=>!0===e))}class Ov{segmentGroup;constructor(e){this.segmentGroup=e||null}}class Pv extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function Da(t){return Gf(new Ov(t))}class hW{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return te(r);if(o.numberOfChildren>1||!o.children[ke])return Gf(new R(4e3,!1));o=o.children[ke]}}applyRedirectCommands(e,n,r,o,i){return function gW(t,e,n){if("string"==typeof t)return te(t);const r=t,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=e;return wo(nr(n,()=>r({params:l,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:d})))}(n,o,i).pipe(He(s=>{if(s instanceof as)throw new Pv(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new Pv(a);return a}))}applyRedirectCreateUrlTree(e,n,r,o){const i=this.createSegmentGroup(e,n.root,r,o);return new as(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([o,i])=>{if("string"==typeof i&&":"===i[0]){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){const i=this.createSegments(e,n.segments,r,o);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new it(i,s)}createSegments(e,n,r,o){return n.map(i=>":"===i.path[0]?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){const o=r[n.path.substring(1)];if(!o)throw new R(4001,!1);return o}findOrReturn(e,n){let r=0;for(const o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}}const xv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pW(t,e,n,r,o){const i=Uk(t,e,n);return i.matched?(r=function R8(t,e){return t.providers&&!t._injector&&(t._injector=Gd(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function uW(t,e,n,r){const o=e.canMatch;return o&&0!==o.length?te(o.map(s=>{const a=wa(s,t);return wo(function X8(t){return t&&Bl(t.canMatch)}(a)?a.canMatch(e,n):nr(t,()=>a(e,n)))})).pipe(Sa(),Bk()):te(!0)}(r,e,n).pipe(He(s=>!0===s?i:{...xv}))):te(i)}function Uk(t,e,n){if("**"===e.path)return function mW(t){return{matched:!0,parameters:t.length>0?ok(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...xv}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(e.matcher||GK)(n,t,e);if(!o)return{...xv};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Hk(t,e,n,r){return n.length>0&&function vW(t,e,n){return n.some(r=>lh(t,e,r)&&wr(r)!==ke)}(t,n,r)?{segmentGroup:new it(e,yW(r,new it(n,t.children))),slicedSegments:[]}:0===n.length&&function CW(t,e,n){return n.some(r=>lh(t,e,r))}(t,n,r)?{segmentGroup:new it(t.segments,_W(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new it(t.segments,t.children),slicedSegments:n}}function _W(t,e,n,r){const o={};for(const i of n)if(lh(t,e,i)&&!r[wr(i)]){const s=new it([],{});o[wr(i)]=s}return{...r,...o}}function yW(t,e){const n={};n[ke]=e;for(const r of t)if(""===r.path&&wr(r)!==ke){const o=new it([],{});n[wr(r)]=o}return n}function lh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class IW{}class SW{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hW(this.urlSerializer,this.urlTree)}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){const e=Hk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(He(({children:n,rootSnapshot:r})=>{const o=new Sr(r,n),i=new bk("",o),s=function d8(t,e,n=null,r=null){return mk(pk(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){const n=new oh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ke,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ke,n).pipe(He(r=>({children:r,rootSnapshot:n})),si(r=>{if(r instanceof Pv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ov?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,o,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,i):this.processSegment(e,n,r,r.segments,o,!0,i).pipe(He(s=>s instanceof Sr?[s]:[]))}processChildren(e,n,r,o){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Ze(i).pipe(ii(s=>{const a=r.children[s],c=function O8(t,e){const n=t.filter(r=>wr(r)===e);return n.push(...t.filter(r=>wr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,o)}),function BK(t,e){return Yt(function FK(t,e,n,r,o){return(i,s)=>{let a=n,c=e,l=0;i.subscribe($t(s,u=>{const d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),zf(null),function UK(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$n((o,i)=>t(o,i,r)):Qe,yv(1),n?zf(e):XM(()=>new El))}(),on(s=>{if(null===s)return Da(r);const a=jk(s);return function DW(t){t.sort((e,n)=>e.value.outlet===ke?-1:n.value.outlet===ke?1:e.value.outlet.localeCompare(n.value.outlet))}(a),te(a)}))}processSegment(e,n,r,o,i,s,a){return Ze(n).pipe(ii(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,o,i,s,a).pipe(si(l=>{if(l instanceof Ov)return te(null);throw l}))),ss(c=>!!c),si(c=>{if(Fk(c))return function EW(t,e,n){return 0===e.length&&!t.children[n]}(r,o,i)?te(new IW):Da(r);throw c}))}processSegmentAgainstRoute(e,n,r,o,i,s,a,c){return wr(r)===s||s!==ke&&lh(o,i,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s,c):Da(o):Da(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s,a){const{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=Uk(n,o,i);if(!c)return Da(n);"string"==typeof o.redirectTo&&"/"===o.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const h=new oh(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vk(o),wr(o),o.component??o._loadedComponent??null,o,qk(o)),g=rh(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,h,e).pipe(Xt(T=>this.applyRedirects.lineralizeSegments(o,T)),on(T=>this.processSegment(e,r,n,T.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,o,i,s){const a=pW(n,r,o,e);return"**"===r.path&&(n.children={}),a.pipe(Xt(c=>c.matched?this.getChildConfig(e=r._injector??e,r,o).pipe(Xt(({routes:l})=>{const u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new oh(f,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vk(r),wr(r),r.component??r._loadedComponent??null,r,qk(r)),m=rh(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(m.params),g.data=Object.freeze(m.data);const{segmentGroup:T,slicedSegments:b}=Hk(n,f,h,l);if(0===b.length&&T.hasChildren())return this.processChildren(u,l,T,g).pipe(He($=>new Sr(g,$)));if(0===l.length&&0===b.length)return te(new Sr(g,[]));const S=wr(r)===i;return this.processSegment(u,l,T,b,S?ke:i,!0,g).pipe(He($=>new Sr(g,$ instanceof Sr?[$]:[])))})):Da(n)))}getChildConfig(e,n,r){return n.children?te({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?te({routes:n._loadedRoutes,injector:n._loadedInjector}):function lW(t,e,n,r){const o=e.canLoad;return void 0===o||0===o.length?te(!0):te(o.map(s=>{const a=wa(s,t);return wo(function Q8(t){return t&&Bl(t.canLoad)}(a)?a.canLoad(e,n):nr(t,()=>a(e,n)))})).pipe(Sa(),Bk())}(e,n,r).pipe(on(o=>o?this.configLoader.loadChildren(e,n).pipe(sn(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function fW(){return Gf(Pk(!1,Mn.GuardRejected))}())):te({routes:[],injector:e})}}function bW(t){const e=t.value.routeConfig;return e&&""===e.path}function jk(t){const e=[],n=new Set;for(const r of t){if(!bW(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):e.push(r)}for(const r of n){const o=jk(r.children);e.push(new Sr(r.value,o))}return e.filter(r=>!n.has(r))}function Vk(t){return t.data||{}}function qk(t){return t.resolve||{}}function $k(t){const e=t.children.map(n=>$k(n)).flat();return[t,...e]}function Lv(t){return Xt(e=>{const n=t(e);return n?Ze(n).pipe(He(()=>e)):te(e)})}let Gk=(()=>{class t{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===ke);return r}getResolvedTitleForRoute(n){return n.data[Sl]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>M(OW),providedIn:"root"})}return t})(),OW=(()=>{class t extends Gk{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(G(HK))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ba=new L("",{providedIn:"root",factory:()=>({})}),uh=new L("");let Fv=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Hq);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return te(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=wo(n.loadComponent()).pipe(He(zk),sn(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Tl(()=>{this.componentLoaders.delete(n)})),o=new ZM(r,()=>new Re).pipe(_v());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function PW(t,e,n,r){return wo(t.loadChildren()).pipe(He(zk),on(o=>o instanceof WS||Array.isArray(o)?te(o):Ze(e.compileModuleAsync(o))),He(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(n).injector,s=i.get(uh,[],{optional:!0,self:!0}).flat()),{routes:s.map(kv),injector:i}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Tl(()=>{this.childrenLoaders.delete(r)})),s=new ZM(i,()=>new Re).pipe(_v());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zk(t){return function xW(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Bv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>M(LW),providedIn:"root"})}return t})(),LW=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Kk=new L(""),Wk=new L("");function FW(t,e,n){const r=t.get(Wk),o=t.get(pn);if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i;const s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),function BW(t){return new Promise(e=>{F_({read:()=>setTimeout(e)},{injector:t})})}(t))),{onViewTransitionCreated:c}=r;return c&&nr(t,()=>c({transition:a,from:e,to:n})),s}const Qk=new L("");let Uv=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Re;transitionAbortWithErrorSubject=new Re;configLoader=M(Fv);environmentInjector=M(Qt);destroyRef=M(ho);urlSerializer=M(bl);rootContexts=M(Ol);location=M(ri);inputBindingEnabled=null!==M(ih,{optional:!0});titleStrategy=M(Gk);options=M(ba,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Bv);createViewTransition=M(Kk,{optional:!0});navigationErrorHandler=M(Qk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>te(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=o=>this.events.next(new T8(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new I8(o)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})}setupNavigations(n){return this.transitions=new Z(null),this.transitions.pipe($n(r=>null!==r),Xt(r=>{let o=!1;return te(r).pipe(Xt(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mn.SupersededByNewNavigation),ur;this.currentTransition=r,this.currentNavigation={id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:"string"==typeof i.extras.browserUrl?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>i.abortController.abort()};const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(i.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const c="";return this.events.next(new Ia(i.id,this.urlSerializer.serialize(i.rawUrl),c,th.IgnoredSameUrlNavigation)),i.resolve(!1),ur}if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return te(i).pipe(Xt(c=>(this.events.next(new eh(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ur:Promise.resolve(c))),function AW(t,e,n,r,o,i){return on(s=>function TW(t,e,n,r,o,i,s="emptyOnly"){return new SW(t,e,n,r,o,s,i).recognize()}(t,e,n,r,s.extractedUrl,o,i).pipe(He(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:c.urlAfterRedirects};const l=new Ik(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){const{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=i,h=new eh(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);const g=Dk(this.rootComponentType).snapshot;return this.currentTransition=r={...i,targetSnapshot:g,urlAfterRedirects:l,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=l,te(r)}{const c="";return this.events.next(new Ia(i.id,this.urlSerializer.serialize(i.extractedUrl),c,th.IgnoredByUrlHandlingStrategy)),i.resolve(!1),ur}}),sn(i=>{const s=new y8(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),He(i=>(this.currentTransition=r={...i,guards:$8(i.targetSnapshot,i.currentSnapshot,this.rootContexts)},r)),function tW(t,e){return on(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return 0===s.length&&0===i.length?te({...n,guardsResult:!0}):function nW(t,e,n,r){return Ze(t).pipe(on(o=>function cW(t,e,n,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?te(i.map(a=>{const c=Nl(e)??o,l=wa(a,c);return wo(function Z8(t){return t&&Bl(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):nr(c,()=>l(t,e,n,r))).pipe(ss())})).pipe(Sa()):te(!0)}(o.component,o.route,n,e,r)),ss(o=>!0!==o,!0))}(s,r,o,t).pipe(on(a=>a&&function W8(t){return"boolean"==typeof t}(a)?function rW(t,e,n,r){return Ze(e).pipe(ii(o=>pv(function iW(t,e){return null!==t&&e&&e(new w8(t)),te(!0)}(o.route.parent,r),function oW(t,e){return null!==t&&e&&e(new D8(t)),te(!0)}(o.route,r),function aW(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function G8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>mv(()=>te(s.guards.map(c=>{const l=Nl(s.node)??n,u=wa(c,l);return wo(function Y8(t){return t&&Bl(t.canActivateChild)}(u)?u.canActivateChild(r,t):nr(l,()=>u(r,t))).pipe(ss())})).pipe(Sa())));return te(i).pipe(Sa())}(t,o.path,n),function sW(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return te(!0);const o=r.map(i=>mv(()=>{const s=Nl(e)??n,a=wa(i,s);return wo(function J8(t){return t&&Bl(t.canActivate)}(a)?a.canActivate(e,t):nr(s,()=>a(e,t))).pipe(ss())}));return te(o).pipe(Sa())}(t,o.route,n))),ss(o=>!0!==o,!0))}(r,i,t,e):te(a)),He(a=>({...n,guardsResult:a})))})}(this.environmentInjector,i=>this.events.next(i)),sn(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&"boolean"!=typeof i.guardsResult)throw sh(0,i.guardsResult);const s=new v8(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),$n(i=>!!i.guardsResult||(this.cancelNavigationTransition(i,"",Mn.GuardRejected),!1)),Lv(i=>{if(0!==i.guards.canActivateChecks.length)return te(i).pipe(sn(s=>{const a=new C8(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Xt(s=>{let a=!1;return te(s).pipe(function RW(t,e){return on(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return te(n);const i=new Set(o.map(c=>c.route)),s=new Set;for(const c of i)if(!s.has(c))for(const l of $k(c))s.add(l);let a=0;return Ze(s).pipe(ii(c=>i.has(c)?function MW(t,e,n,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!Rk(o)&&(i[Sl]=o.title),mv(()=>(t.data=rh(t,t.parent,n).resolve,function kW(t,e,n,r){const o=vv(t);if(0===o.length)return te({});const i={};return Ze(o).pipe(on(s=>function NW(t,e,n,r){const o=Nl(e)??r,i=wa(t,o);return wo(i.resolve?i.resolve(e,n):nr(o,()=>i(e,n)))}(t[s],e,n,r).pipe(ss(),sn(a=>{if(a instanceof Nv)throw sh(new Wf,a);i[s]=a}))),yv(1),He(()=>i),si(s=>Fk(s)?ur:Gf(s)))}(i,t,e,r).pipe(He(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=rh(c,c.parent,t).resolve,te(void 0))),sn(()=>a++),yv(1),on(c=>a===s.size?te(n):ur))})}(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Mn.NoDataFromResolver)}}))}),sn(s=>{const a=new E8(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Lv(i=>{const s=a=>{const c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(sn(l=>{a.component=l}),He(()=>{})));for(const l of a.children)c.push(...s(l));return c};return gv(s(i.targetSnapshot.root)).pipe(zf(null),Vr(1))}),Lv(()=>this.afterPreactivation()),Xt(()=>{const{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?Ze(a).pipe(He(()=>r)):te(r)}),He(i=>{const s=function B8(t,e,n){const r=xl(t,e._root,n?n._root:void 0);return new Sk(r,e)}(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r={...i,targetRouterState:s},this.currentNavigation.targetRouterState=s,r}),sn(()=>{this.events.next(new Sv)}),((t,e,n,r)=>He(o=>(new q8(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)))(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Vr(1),ek(new le(i=>{const s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe($n(()=>!o&&!r.targetRouterState),sn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mn.Aborted)}))),sn({next:i=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new So(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),ek(this.transitionAbortWithErrorSubject.pipe(sn(i=>{throw i}))),Tl(()=>{o||this.cancelNavigationTransition(r,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),si(i=>{if(this.destroyed)return r.resolve(!1),ur;if(o=!0,xk(i))this.events.next(new us(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),function j8(t){return xk(t)&&ls(t.url)}(i)?this.events.next(new nh(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{const s=new wv(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{const a=nr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof Nv))throw this.events.next(s),i;{const{message:c,cancellationCode:l}=sh(0,a);this.events.next(new us(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new nh(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return ur}))}))}cancelNavigationTransition(n,r,o){const i=new us(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UW(t){return t!==kl}let HW=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>M(VW),providedIn:"root"})}return t})();class jW{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let VW=(()=>{class t extends jW{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Xp(t)))(o||t)}})();static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jk=(()=>{class t{urlSerializer=M(bl);options=M(ba,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ri);urlHandlingStrategy=M(Bv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new as;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){const i=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof as?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=Dk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>M(qW),providedIn:"root"})}return t})(),qW=(()=>{class t extends Jk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof eh?this.updateStateMemento():n instanceof Ia?this.commitTransition(r):n instanceof Ik?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Sv?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof us&&n.code!==Mn.SupersededByNewNavigation&&n.code!==Mn.Redirect?this.restoreHistory(r):n instanceof wv?this.restoreHistory(r,!0):n instanceof So&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){const{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){const a=this.browserPageId,c={...s,...this.generateNgRouterState(o,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(o,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&0===i&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Xp(t)))(o||t)}})();static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yk(t,e){t.events.pipe($n(n=>n instanceof So||n instanceof us||n instanceof wv||n instanceof Ia),He(n=>n instanceof So||n instanceof Ia?0:n instanceof us&&(n.code===Mn.Redirect||n.code===Mn.SupersededByNewNavigation)?2:1),$n(n=>2!==n),Vr(1)).subscribe(()=>{e()})}const $W={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(RD);stateManager=M(Jk);options=M(ba,{optional:!0})||{};pendingTasks=M(Bi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Uv);urlSerializer=M(bl);location=M(ri);urlHandlingStrategy=M(Bv);injector=M(Qt);_events=new Re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(HW);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(uh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(ih,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Wt;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(null!==o&&null!==i)if(this.stateManager.handleRouterEvent(r,i),r instanceof us&&r.code!==Mn.Redirect&&r.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof So)this.navigated=!0;else if(r instanceof nh){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||"eager"===this.urlUpdateStrategy||UW(o.source),...s};this.scheduleNavigation(a,kl,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function A8(t){return!(t instanceof Sv||t instanceof nh)})(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(c=>{this.injector.get(vr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(kv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}null!==u&&(u=this.removeEmptyProps(u));try{d=pk(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),d=this.currentUrlTree.root}return mk(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=ls(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,kl,null,r)}navigate(n,r={skipLocationChange:!1}){return function zW(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new R(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(o=!0===r?{...$W}:!1===r?{...GW}:r,ls(n))return sk(this.currentUrlTree,n,o);const i=this.parseUrl(n);return sk(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(null!=i&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});const u=this.pendingTasks.add();return Yk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Zk{}let QW=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,o,i){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe($n(n=>n instanceof So),ii(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Gd(i.providers,n,`Route: ${i.path}`));const s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Ze(o).pipe(Il())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):te(null);const i=o.pipe(on(s=>null===s?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Ze([i,this.loader.loadComponent(r)]).pipe(Il()):i})}static \u0275fac=function(r){return new(r||t)(G(Gr),G(Qt),G(Zk),G(Fv))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const jv=new L("");let Xk=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=kl;restoredId=0;store={};constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof eh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof So?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Ia&&n.code===th.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Tk&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){var o=this;this.zone.runOutsideAngular(E(function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),o.zone.run(()=>{o.transitions.events.next(new Tk(n,"popstate"===o.lastSource?o.store[o.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function vS(){throw new Error("invalid")}()};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();function zr(t,e){return{\u0275kind:t,\u0275providers:e}}function tN(){const t=M(Un);return e=>{const n=t.get(Zo);if(e!==n.components[0])return;const r=t.get(Gr),o=t.get(nN);1===t.get(Vv)&&r.initialNavigation(),t.get(rN,null,{optional:!0})?.setUpPreloading(),t.get(jv,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const nN=new L("",{factory:()=>new Re}),Vv=new L("",{providedIn:"root",factory:()=>1}),rN=new L("");function XW(t){return zr(0,[{provide:rN,useExisting:QW},{provide:Zk,useExisting:t}])}function t3(t){return Hn("NgRouterViewTransitions"),zr(9,[{provide:Kk,useValue:FW},{provide:Wk,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const n3=[ri,{provide:bl,useClass:Wf},Gr,Ol,{provide:Pl,useFactory:function eN(t){return t.routerState.root},deps:[Gr]},Fv,[]];let r3=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[n3,[],{provide:uh,multi:!0,useValue:n},[],r?.errorHandler?{provide:Qk,useValue:r.errorHandler}:[],{provide:ba,useValue:r||{}},r?.useHash?{provide:is,useClass:w2}:{provide:is,useClass:FR},{provide:jv,useFactory:()=>{const t=M(cz),e=M(We),n=M(ba),r=M(Uv),o=M(bl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Xk(o,r,t,e,n)}},r?.preloadingStrategy?XW(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?c3(r):[],r?.bindToComponentInputs?zr(8,[kk,{provide:ih,useExisting:kk}]).\u0275providers:[],r?.enableViewTransitions?t3().\u0275providers:[],[{provide:oN,useFactory:tN},{provide:KD,multi:!0,useExisting:oN}]]}}static forChild(n){return{ngModule:t,providers:[{provide:uh,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=Xn({})}return t})();function c3(t){return["disabled"===t.initialNavigation?zr(3,[GD(()=>{M(Gr).setUpLocationChangeListener()}),{provide:Vv,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?zr(2,[{provide:Vv,useValue:0},GD(()=>{const e=M(Un);return e.get(X$,Promise.resolve()).then(()=>new Promise(r=>{const o=e.get(Gr),i=e.get(nN);Yk(o,()=>{r(!0)}),e.get(Uv).afterPreactivation=()=>(r(!0),i.closed?te(void 0):i),o.initialNavigation()}))})]).\u0275providers:[]]}const oN=new L("");class dh{}class fh{}class Dr{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const o=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Dr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Dr;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Dr?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const o=("a"===e.op?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}addHeaderEntry(e,n){const r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class u3{encodeKey(e){return iN(e)}encodeValue(e){return iN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const f3=/%(\d[a-f0-9])/gi,h3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iN(t){return encodeURIComponent(t).replace(f3,(e,n)=>h3[n]??e)}function hh(t){return`${t}`}class ci{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new u3,e.fromString){if(e.fromObject)throw new R(2805,!1);this.map=function d3(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],o=Array.isArray(r)?r.map(hh):[hh(r)];this.map.set(n,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new ci({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(hh(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(hh(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class g3{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function sN(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function aN(t){return typeof Blob<"u"&&t instanceof Blob}function cN(t){return typeof FormData<"u"&&t instanceof FormData}const Ul="Content-Type",qv="X-Request-URL",lN="text/plain",uN="application/json",dN=`${uN}, ${lN}, */*`;class Hl{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,r,o){let i;if(this.url=n,this.method=e.toUpperCase(),function p3(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new Dr,this.context??=new g3,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new ci,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||sN(this.body)||aN(this.body)||cN(this.body)||function m3(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ci?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cN(this.body)?null:aN(this.body)?this.body.type||null:sN(this.body)?null:"string"==typeof this.body?lN:this.body instanceof ci?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?uN:null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=void 0!==e.body?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const f=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((h,g)=>h.set(g,e.setHeaders[g]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,g)=>h.set(g,e.setParams[g]),d)),new Hl(n,r,a,{params:d,headers:u,context:f,reportProgress:l,responseType:o,withCredentials:c,transferCache:s,keepalive:i})}}var li=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(li||{});class $v{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Dr,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ph extends $v{constructor(e={}){super(e)}type=li.ResponseHeader;clone(e={}){return new ph({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jl extends $v{body;constructor(e={}){super(e),this.body=void 0!==e.body?e.body:null}type=li.Response;clone(e={}){return new jl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Aa extends $v{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Gv(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive}}let hN=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Hl)i=n;else{let c,l;c=o.headers instanceof Dr?o.headers:new Dr(o.headers),o.params&&(l=o.params instanceof ci?o.params:new ci({fromObject:o.params})),i=new Hl(n,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive})}const s=te(i).pipe(ii(c=>this.handler.handle(c)));if(n instanceof Hl||"events"===o.observe)return s;const a=s.pipe($n(c=>c instanceof jl));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(He(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new R(2806,!1);return c.body}));case"blob":return a.pipe(He(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new R(2807,!1);return c.body}));case"text":return a.pipe(He(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new R(2808,!1);return c.body}));default:return a.pipe(He(c=>c.body))}case"response":return a;default:throw new R(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new ci).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,Gv(o,r))}post(n,r,o={}){return this.request("POST",n,Gv(o,r))}put(n,r,o={}){return this.request("PUT",n,Gv(o,r))}static \u0275fac=function(r){return new(r||t)(G(dh))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();const pN=new L("");function mN(t,e){return e(t)}function I3(t,e){return(n,r)=>e.intercept(n,{handle:o=>t(o,r)})}const _N=new L(""),Vl=new L(""),w3=new L(""),yN=new L("",{providedIn:"root",factory:()=>!0});function S3(){let t=null;return(e,n)=>{null===t&&(t=(M(_N,{optional:!0})??[]).reduceRight(I3,mN));const r=M(Zu);if(M(yN)){const i=r.add();return t(e,n).pipe(Tl(i))}return t(e,n)}}let vN=(()=>{class t extends dh{backend;injector;chain=null;pendingTasks=M(Zu);contributeToStability=M(yN);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Vl),...this.injector.get(w3,[])]));this.chain=r.reduceRight((o,i)=>function T3(t,e,n){return(r,o)=>nr(n,()=>e(r,i=>t(i,o)))}(o,i,this.injector),mN)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(Tl(r))}return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(G(fh),G(Qt))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();const R3=/^\)\]\}',?\n/,M3=RegExp(`^${qv}:`,"m");let EN=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new R(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Ze(r.\u0275loadImpl()):te(null)).pipe(Xt(()=>new le(i=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((m,T)=>s.setRequestHeader(m,T.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept",dN),!n.headers.has(Ul)){const m=n.detectContentTypeHeader();null!==m&&s.setRequestHeader(Ul,m)}if(n.responseType){const m=n.responseType.toLowerCase();s.responseType="json"!==m?m:"text"}const a=n.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const m=s.statusText||"OK",T=new Dr(s.getAllResponseHeaders()),b=function k3(t){return"responseURL"in t&&t.responseURL?t.responseURL:M3.test(t.getAllResponseHeaders())?t.getResponseHeader(qv):null}(s)||n.url;return c=new ph({headers:T,status:s.status,statusText:m,url:b}),c},u=()=>{let{headers:m,status:T,statusText:b,url:S}=l(),$=null;204!==T&&($=typeof s.response>"u"?s.responseText:s.response),0===T&&(T=$?200:0);let Ne=T>=200&&T<300;if("json"===n.responseType&&"string"==typeof $){const he=$;$=$.replace(R3,"");try{$=""!==$?JSON.parse($):null}catch(kr){$=he,Ne&&(Ne=!1,$={error:kr,text:$})}}Ne?(i.next(new jl({body:$,headers:m,status:T,statusText:b,url:S||void 0})),i.complete()):i.error(new Aa({error:$,headers:m,status:T,statusText:b,url:S||void 0}))},d=m=>{const{url:T}=l(),b=new Aa({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});i.error(b)};let f=!1;const h=m=>{f||(i.next(l()),f=!0);let T={type:li.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(T.total=m.total),"text"===n.responseType&&s.responseText&&(T.partialText=s.responseText),i.next(T)},g=m=>{let T={type:li.UploadProgress,loaded:m.loaded};m.lengthComputable&&(T.total=m.total),i.next(T)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",h),null!==a&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),i.next({type:li.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",h),null!==a&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(G(jR))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();const Wv=new L(""),IN=new L("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),TN=new L("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class wN{}let P3=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=UR(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(G(pn),G(IN))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();function x3(t,e){const n=t.url.toLowerCase();if(!M(Wv)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=M(wN).getToken(),o=M(TN);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),e(t)}var ui=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(ui||{});function L3(...t){const e=[hN,EN,vN,{provide:dh,useExisting:vN},{provide:fh,useFactory:()=>M(pN,{optional:!0})??M(EN)},{provide:Vl,useValue:x3,multi:!0},{provide:Wv,useValue:!0},{provide:wN,useClass:P3}];for(const n of t)e.push(...n.\u0275providers);return Uu(e)}const SN=new L("");function F3(){return function ds(t,e){return{\u0275kind:t,\u0275providers:e}}(ui.LegacyInterceptors,[{provide:SN,useFactory:S3},{provide:Vl,useExisting:SN,multi:!0}])}let B3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=Xn({providers:[L3(F3())]})}return t})();const A={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ra=[A.OPENID_SCOPE,A.PROFILE_SCOPE,A.OFFLINE_ACCESS_SCOPE],DN=[...Ra,A.EMAIL_SCOPE],Gt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},zt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},bN={PLAIN:"plain",S256:"S256"},ql={QUERY:"query",FRAGMENT:"fragment"},U3={...ql,FORM_POST:"form_post"},we={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Qv="appmetadata",en={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},st={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ka_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836";var K=function(t){return t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none",t}(K||{});const NN={scopes:Ra},Yv="msal.db",G3=`${Yv}.keys`,z3=[0,5,4];class Q3{static getInteractionStatusFromEvent(e,n){switch(e.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(e.interactionType===K.Redirect||e.interactionType===K.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if(n&&"ssoSilent"!==n)break;return"none";case"msal:logoutEnd":if(n&&"logout"!==n)break;return"none";case"msal:handleRedirectEnd":if(n&&"handleRedirect"!==n)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(e.interactionType===K.Redirect||e.interactionType===K.Popup){if(n&&"login"!==n&&"acquireToken"!==n)break;return"none"}}return null}}const zl="unexpected_error",Zv="post_request_failed",Ih={[zl]:"Unexpected error in authentication.",[Zv]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class _t extends Error{constructor(e,n,r){super(n?`${e}: ${n}`:e),Object.setPrototypeOf(this,_t.prototype),this.errorCode=e||A.EMPTY_STRING,this.errorMessage=n||A.EMPTY_STRING,this.subError=r||A.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function PN(t,e){return new _t(t,e?`${Ih[t]} ${e}`:Ih[t])}const Kl="storage_not_supported",Xv="stubbed_public_client_application_called",Th="in_mem_redirect_unavailable",wh={[Kl]:"Given storage configuration option was not supported.",[Xv]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Th]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Wl extends _t{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Wl.prototype)}}function eC(t){return new Wl(t,wh[t])}const Sh="redirect_uri_empty",tC="claims_request_parsing_error",Dh="authority_uri_insecure",hs="url_parse_error",bh="empty_url_error",Ah="empty_input_scopes_error",Rh="invalid_prompt_value",Ql="invalid_claims",Mh="token_request_empty",kh="logout_request_empty",Nh="invalid_code_challenge_method",Jl="pkce_params_missing",Yl="invalid_cloud_discovery_metadata",Oh="invalid_authority_metadata",Ph="untrusted_authority",Na="missing_ssh_jwk",xh="missing_ssh_kid",nC="missing_nonce_authentication_header",rC="invalid_authentication_header",Lh="cannot_set_OIDCOptions",Fh="cannot_allow_native_broker",Bh="authority_mismatch",wt={[Sh]:"A redirect URI is required for all calls, and none has been set.",[tC]:"Could not parse the given claims request object.",[Dh]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[hs]:"URL could not be parsed into appropriate segments.",[bh]:"URL was empty or null.",[Ah]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Rh]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Ql]:"Given claims parameter must be a stringified JSON object.",[Mh]:"Token request was empty and not found in cache.",[kh]:"The logout request was null or undefined.",[Nh]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Jl]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Yl]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Oh]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ph]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Na]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[xh]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[nC]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[rC]:"Invalid authentication header provided",[Lh]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Fh]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Bh]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class oC extends _t{constructor(e){super(e,wt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,oC.prototype)}}function dt(t){return new oC(t)}class fr{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return 0===Object.keys(n).length}catch{}return!0}static startsWith(e,n){return 0===e.indexOf(n)}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[o(s)]=o(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}const Zl="client_info_decoding_error",Uh="client_info_empty_error",Xl="token_parsing_error",Hh="null_or_empty_token",br="endpoints_resolution_error",jh="network_error",Vh="openid_config_error",qh="hash_not_deserialized",hi="invalid_state",$h="state_mismatch",Oa="state_not_found",Gh="nonce_mismatch",eu="auth_time_not_found",zh="max_age_transpired",iC="multiple_matching_tokens",sC="multiple_matching_accounts",Kh="multiple_matching_appMetadata",Wh="request_cannot_be_made",Qh="cannot_remove_empty_scope",Jh="cannot_append_scopeset",tu="empty_input_scopeset",aC="device_code_polling_cancelled",cC="device_code_expired",lC="device_code_unknown_error",nu="no_account_in_silent_request",Yh="invalid_cache_record",ru="invalid_cache_environment",ou="no_account_found",iu="no_crypto_object",su="unexpected_credential_type",uC="invalid_assertion",dC="invalid_client_credential",Ar="token_refresh_required",fC="user_timeout_reached",Zh="token_claims_cnf_required_for_signedjwt",Xh="authorization_code_missing_from_server_response",hC="binding_key_not_removed",eg="end_session_endpoint_not_supported",au="key_id_missing",gC="no_network_connectivity",pC="user_canceled",mC="missing_tenant_id_error",Fe="method_not_implemented",_C="nested_app_auth_bridge_disabled",Se={[Zl]:"The client info could not be parsed/decoded correctly",[Uh]:"The client info was empty",[Xl]:"Token cannot be parsed",[Hh]:"The token is null or empty",[br]:"Endpoints cannot be resolved",[jh]:"Network request failed",[Vh]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[qh]:"The hash parameters could not be deserialized",[hi]:"State was not the expected format",[$h]:"State mismatch error",[Oa]:"State not found",[Gh]:"Nonce mismatch error",[eu]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[zh]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[iC]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[sC]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Kh]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Wh]:"Token request cannot be made without authorization code or refresh token.",[Qh]:"Cannot remove null or empty scope from ScopeSet",[Jh]:"Cannot append ScopeSet",[tu]:"Empty input ScopeSet cannot be processed",[aC]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[cC]:"Device code is expired.",[lC]:"Device code stopped polling for unknown reasons.",[nu]:"Please pass an account object, silent flow is not supported without account information",[Yh]:"Cache record object was null or undefined.",[ru]:"Invalid environment when attempting to create cache entry",[ou]:"No account found in cache for given key.",[iu]:"No crypto object detected.",[su]:"Unexpected credential type.",[uC]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[dC]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ar]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[fC]:"User defined timeout for device code polling reached",[Zh]:"Cannot generate a POP jwt if the token_claims are not populated",[Xh]:"Server response does not contain an authorization code to proceed",[hC]:"Could not remove the credential's binding key from storage.",[eg]:"The provided authority does not support logout",[au]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[gC]:"No network connectivity. Check your internet connection.",[pC]:"User cancelled the flow.",[mC]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Fe]:"This method has not been implemented",[_C]:"The nested app auth bridge is disabled"};class tg extends _t{constructor(e,n){super(e,n?`${Se[e]}: ${n}`:Se[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,tg.prototype)}}function P(t,e){return new tg(t,e)}function xN(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function ng(t){if(!t||t.indexOf("=")<0)return null;try{const e=xN(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw P(qh)}return null}class Ve{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw dt(bh);e.includes("#")||(this._urlString=Ve.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return fr.endsWith(n,"?")?n=n.slice(0,-1):fr.endsWith(n,"?/")&&(n=n.slice(0,-2)),fr.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw dt(hs)}if(!e.HostNameAndPort||!e.PathSegments)throw dt(hs);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw dt(Dh)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Ve.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&0!==r.length&&("common"===r[0]||"organizations"===r[0])&&(r[0]=e),Ve.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw dt(hs);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw dt(hs);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===A.FORWARD_SLASH){const o=new Ve(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Ve(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!ng(e)}}const cu="pkce_not_created",lu="crypto_nonexistent",Pa="empty_navigate_uri",rg="hash_empty_error",uu="no_state_in_hash",og="hash_does_not_contain_known_properties",ig="unable_to_parse_state",sg="state_interaction_type_mismatch",ag="interaction_in_progress",cg="popup_window_error",lg="empty_window_error",Do="user_cancelled",yC="monitor_popup_timeout",ug="monitor_window_timeout",dg="redirect_in_iframe",fg="block_iframe_reload",hg="block_nested_popups",vC="iframe_closed_prematurely",xa="silent_logout_unsupported",gg="no_account_error",CC="silent_prompt_value_error",pg="no_token_request_cache_error",mg="unable_to_parse_token_request_cache_error",du="no_cached_authority_error",EC="auth_request_not_set_error",IC="invalid_cache_type",La="non_browser_environment",gi="database_not_open",Fa="no_network_connectivity",_g="post_request_failed",yg="get_request_failed",fu="failed_to_parse_response",vg="unable_to_load_token",hu="crypto_key_not_found",Cg="auth_code_required",Eg="auth_code_or_nativeAccountId_required",Ig="spa_code_and_nativeAccountId_present",gu="database_unavailable",Tg="unable_to_acquire_token_from_native_platform",wg="native_handshake_timeout",Sg="native_extension_not_installed",gs="native_connection_not_established",Dg="uninitialized_public_client_application",bg="native_prompt_not_supported",Ag="invalid_base64_string",Rg="invalid_pop_token_request",LN="failed_to_build_headers",FN="failed_to_parse_headers",bo="For more visit: aka.ms/msaljs/browser-errors",Ce={[cu]:"The PKCE code challenge and verifier could not be generated.",[lu]:"The crypto object or function is not available.",[Pa]:"Navigation URI is empty. Please check stack trace for more info.",[rg]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${bo}`,[uu]:"Hash does not contain state. Please verify that the request originated from msal.",[og]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${bo}`,[ig]:"Unable to parse state. Please verify that the request originated from msal.",[sg]:"Hash contains state but the interaction type does not match the caller.",[ag]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${bo}`,[cg]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[lg]:"window.open returned null or undefined window object.",[Do]:"User cancelled the flow.",[yC]:`Token acquisition in popup failed due to timeout.  ${bo}`,[ug]:`Token acquisition in iframe failed due to timeout.  ${bo}`,[dg]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[fg]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${bo}`,[hg]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[vC]:"The iframe being monitored was closed prematurely.",[xa]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[gg]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[CC]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[pg]:"No token request found in cache.",[mg]:"The cached token request could not be parsed.",[du]:"No cached authority found.",[EC]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[IC]:"Invalid cache type",[La]:"Login and token requests are not supported in non-browser environments.",[gi]:"Database is not open!",[Fa]:"No network connectivity. Check your internet connection.",[_g]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[yg]:"Network request failed. Please check the network trace to determine root cause.",[fu]:"Failed to parse network response. Check network trace.",[vg]:"Error loading token to cache.",[hu]:"Cryptographic Key or Keypair not found in browser storage.",[Cg]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Eg]:"An authorization code or nativeAccountId must be provided to this flow.",[Ig]:"Request cannot contain both spa code and native account id.",[gu]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Tg]:`Unable to acquire token from native platform.  ${bo}`,[wg]:"Timed out while attempting to establish connection to browser extension",[Sg]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[gs]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${bo}`,[Dg]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${bo}`,[bg]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Ag]:"Invalid base64 encoded string.",[Rg]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[LN]:"Failed to build request headers object.",[FN]:"Failed to parse response headers"};class pu extends _t{constructor(e,n){super(e,Ce[e],n),Object.setPrototypeOf(this,pu.prototype),this.name="BrowserAuthError"}}function Q(t,e){return new pu(t,e)}function Mg(t){return encodeURIComponent(TC(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function kg(t){return BN(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function TC(t){return BN((new TextEncoder).encode(t))}function BN(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}const UN="SHA-256",X3=new Uint8Array([1,0,1]),HN="0123456789abcdef",jN=new Uint32Array(1),wC={name:"RSASSA-PKCS1-v1_5",hash:UN,modulusLength:2048,publicExponent:X3};function VN(t,e,n){return SC.apply(this,arguments)}function SC(){return(SC=E(function*(t,e,n){e?.addQueueMeasurement("sha256Digest",n);const o=(new TextEncoder).encode(t);return window.crypto.subtle.digest(UN,o)})).apply(this,arguments)}function nQ(t){return window.crypto.getRandomValues(t)}function DC(){return window.crypto.getRandomValues(jN),jN[0]}function Kr(){const t=Date.now(),e=1024*DC()+(1023&DC()),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=DC();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/65536,n[4]=t/256,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let s="";for(let a=0;a<n.length;a++)s+=HN.charAt(n[a]>>>4),s+=HN.charAt(15&n[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function bC(){return(bC=E(function*(t,e){return window.crypto.subtle.generateKey(wC,t,e)})).apply(this,arguments)}function AC(t){return RC.apply(this,arguments)}function RC(){return(RC=E(function*(t){return window.crypto.subtle.exportKey("jwk",t)})).apply(this,arguments)}function MC(){return(MC=E(function*(t,e,n){return window.crypto.subtle.importKey("jwk",t,wC,e,n)})).apply(this,arguments)}function kC(){return(kC=E(function*(t,e){return window.crypto.subtle.sign(wC,t,e)})).apply(this,arguments)}function qN(t){return NC.apply(this,arguments)}function NC(){return(NC=E(function*(t){const e=yield VN(t);return kg(new Uint8Array(e))})).apply(this,arguments)}function Ng(){return window.parent!==window}function Ao(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function $N(){if(typeof window>"u")throw Q(La)}function GN(t){if(!t)throw Q(Dg)}function OC(t){$N(),function uQ(){if(Ve.hashContainsKnownProperties(window.location.hash)&&Ng())throw Q(fg)}(),function fQ(){if(function cQ(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf("msal.")}())throw Q(hg)}(),GN(t)}function zN(t,e){if(OC(t),function dQ(t){if(Ng()&&!t)throw Q(dg)}(e.system.allowRedirectInIframe),"memoryStorage"===e.cache.cacheLocation&&!e.cache.storeAuthStateInCookie)throw eC(Th)}function KN(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const WN={now:()=>(WN.delegate||Date).now(),delegate:void 0};class gQ extends Re{constructor(e=1/0,n=1/0,r=WN){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;n||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=n.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}const QN="@azure/msal-angular",PC="3.1.0",xC=new L("MSAL_INSTANCE"),JN=new L("MSAL_GUARD_CONFIG"),YN=new L("MSAL_INTERCEPTOR_CONFIG"),pQ=new L("MSAL_BROADCAST_CONFIG");let ps=(()=>{class t{constructor(n,r){this.instance=n,this.location=r;const o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",PC)}initialize(){return Ze(this.instance.initialize())}acquireTokenPopup(n){return Ze(this.instance.acquireTokenPopup(n))}acquireTokenRedirect(n){return Ze(this.instance.acquireTokenRedirect(n))}acquireTokenSilent(n){return Ze(this.instance.acquireTokenSilent(n))}handleRedirectObservable(n){return Ze(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(n||this.redirectHash)))}loginPopup(n){return Ze(this.instance.loginPopup(n))}loginRedirect(n){return Ze(this.instance.loginRedirect(n))}logout(n){return Ze(this.instance.logout(n))}logoutRedirect(n){return Ze(this.instance.logoutRedirect(n))}logoutPopup(n){return Ze(this.instance.logoutPopup(n))}ssoSilent(n){return Ze(this.instance.ssoSilent(n))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(QN,PC)),this.logger}setLogger(n){this.logger=n.clone(QN,PC),this.instance.setLogger(n)}}return t.\u0275fac=function(n){return new(n||t)(G(xC),G(ri))},t.\u0275prov=q({token:t,factory:t.\u0275fac}),t})(),mu=(()=>{class t{constructor(n,r,o){this.msalInstance=n,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new gQ(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Re,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Z("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);const s=Q3.getInteractionStatusFromEvent(i,this._inProgress.value);null!==s&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return t.\u0275fac=function(n){return new(n||t)(G(xC),G(ps),G(pQ,8))},t.\u0275prov=q({token:t,factory:t.\u0275fac}),t})(),LC=(()=>{class t{constructor(n,r,o,i,s){this.msalGuardConfig=n,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(n){return this.router.parseUrl(n)}getDestinationUrl(n){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(n);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${n}`}loginInteractively(n){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,n):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===K.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(He(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(n.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(He(()=>!1))}activateHelper(n){if(this.msalGuardConfig.interactionType!==K.Popup&&this.msalGuardConfig.interactionType!==K.Redirect)throw new Wl("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),te(!0);if(Ve.hashContainsKnownProperties(window.location.hash)&&Ng()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),te(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(ii(()=>this.authService.handleRedirectObservable()),ii(()=>{if(!this.authService.instance.getAllAccounts().length)return n?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(n)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),te(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),n){const o=this.includesCode(n.url),i=!!n.root&&!!n.root.fragment&&this.includesCode(`#${n.root.fragment}`),s=0===this.location.prepareExternalUrl(n.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?te(this.parseUrl(this.location.path())):te(this.parseUrl(""))}return te(!0)}),si(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&n?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),te(this.loginFailedRoute)):te(!1))))}includesCode(n){return n.lastIndexOf("/code")>-1&&n.lastIndexOf("/code")===n.length-5||n.indexOf("#code=")>-1||n.indexOf("&code=")>-1}canActivate(n,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(n,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return t.\u0275fac=function(n){return new(n||t)(G(JN),G(mu),G(ps),G(ri),G(Gr))},t.\u0275prov=q({token:t,factory:t.\u0275fac}),t})(),mQ=(()=>{class t{constructor(n,r,o,i,s){this.msalInterceptorConfig=n,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(n,r){if(this.msalInterceptorConfig.interactionType!==K.Popup&&this.msalInterceptorConfig.interactionType!==K.Redirect)throw new Wl("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const o=this.getScopesForEndpoint(n.url,n.method);if(!o||0===o.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(n);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);const s="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,n,{account:i}):{...this.msalInterceptorConfig.authRequest,account:i};return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${n.url}`),this.acquireToken(s,o,i).pipe(Xt(a=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const c=n.headers.set("Authorization",`Bearer ${a.accessToken}`),l=n.clone({headers:c});return r.handle(l)}))}acquireToken(n,r,o){return this.authService.acquireTokenSilent({...n,scopes:r,account:o}).pipe(si(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(Vr(1),Xt(i=>"none"===i?this.acquireTokenInteractively(n,r):this.msalBroadcastService.inProgress$.pipe($n(s=>"none"===s),Vr(1),Xt(()=>this.acquireToken(n,r,o))))))),Xt(i=>i.accessToken?te(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe($n(s=>"none"===s),Vr(1),Xt(()=>this.acquireTokenInteractively(n,r))))))}acquireTokenInteractively(n,r){if(this.msalInterceptorConfig.interactionType===K.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...n,scopes:r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const o=window.location.href;return this.authService.acquireTokenRedirect({...n,scopes:r,redirectStartPage:o}),ur}getScopesForEndpoint(n,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const o=this.location.normalize(n),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s,r):null}matchResourcesToEndpoint(n,r){const o=[];return n.forEach(i=>{const s=this.location.normalize(i),a=this.getAbsoluteUrl(s),c=new URL(a),l=this.getAbsoluteUrl(r),u=new URL(l);this.checkUrlComponents(c,u)&&o.push(i)}),o}checkUrlComponents(n,r){const o=["protocol","host","pathname","search","hash"];for(const i of o)if(n[i]){const s=decodeURIComponent(n[i]);if(!fr.matchPattern(s,r[i]))return!1}return!0}getAbsoluteUrl(n){const r=this._document.createElement("a");return r.href=n,r.href}matchScopesToEndpoint(n,r,o){const i=[];return r.forEach(s=>{const a=[],c=n.get(s);null!==c?(c.forEach(l=>{if("string"==typeof l)a.push(l);else{const u=o.toLowerCase();l.httpMethod.toLowerCase()===u&&(null===l.scopes?i.push(null):l.scopes.forEach(f=>{a.push(f)}))}}),a.length>0&&i.push(a)):i.push(null)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return t.\u0275fac=function(n){return new(n||t)(G(YN),G(ps),G(ri),G(mu),G(pn))},t.\u0275prov=q({token:t,factory:t.\u0275fac}),t})(),_Q=(()=>{class t{constructor(n){this.authService=n}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return t.\u0275fac=function(n){return new(n||t)(ue(ps))},t.\u0275cmp=zd({type:t,selectors:[["app-redirect"]],standalone:!1,decls:0,vars:0,template:function(n,r){},encapsulation:2}),t})(),yQ=(()=>{class t{static forRoot(n,r,o){return{ngModule:t,providers:[{provide:xC,useValue:n},{provide:JN,useValue:r},{provide:YN,useValue:o},ps]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jo({type:t}),t.\u0275inj=Xn({providers:[LC,mu],imports:[Zy]}),t})();var St=function(t){return t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace",t}(St||{});class pi{constructor(e,n,r){this.level=St.Info;const i=e||pi.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:St.Info,this.correlationId=i.correlationId||A.EMPTY_STRING,this.packageName=n||A.EMPTY_STRING,this.packageVersion=r||A.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:St.Info}}clone(e,n,r){return new pi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${n.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${St[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:St.Error,containsPii:!1,correlationId:n||A.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:St.Error,containsPii:!0,correlationId:n||A.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:St.Warning,containsPii:!1,correlationId:n||A.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:St.Warning,containsPii:!0,correlationId:n||A.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:St.Info,containsPii:!1,correlationId:n||A.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:St.Info,containsPii:!0,correlationId:n||A.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:St.Verbose,containsPii:!1,correlationId:n||A.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:St.Verbose,containsPii:!0,correlationId:n||A.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:St.Trace,containsPii:!1,correlationId:n||A.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:St.Trace,containsPii:!0,correlationId:n||A.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Og={createNewGuid:()=>{throw P(Fe)},base64Decode:()=>{throw P(Fe)},base64Encode:()=>{throw P(Fe)},base64UrlEncode:()=>{throw P(Fe)},encodeKid:()=>{throw P(Fe)},getPublicKeyThumbprint:()=>E(function*(){throw P(Fe)})(),removeTokenBindingKey:()=>E(function*(){throw P(Fe)})(),clearKeystore:()=>E(function*(){throw P(Fe)})(),signJwt:()=>E(function*(){throw P(Fe)})(),hashString:()=>E(function*(){throw P(Fe)})()},ZN="@azure/msal-common",BC="14.16.1";function ms(t,e){const n=function vQ(t){if(!t)throw P(Hh);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw P(Xl);return n[2]}(t);try{const r=e(n);return JSON.parse(r)}catch{throw P(Xl)}}function XN(t,e){if(0===e||Date.now()-3e5>t+e)throw P(zh)}function Wr(){return Math.round((new Date).getTime()/1e3)}function UC(t,e){const n=Number(t)||0;return Wr()+e>n}function Ba(t){return[EQ(t),IQ(t),TQ(t),wQ(t),SQ(t)].join("-").toLowerCase()}function Pg(t,e,n,r,o){return{credentialType:we.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function xg(t,e,n,r,o,i,s,a,c,l,u,d,f,h,g){const m={homeAccountId:t,credentialType:we.ACCESS_TOKEN,secret:n,cachedAt:Wr().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||st.BEARER};if(d&&(m.userAssertionHash=d),l&&(m.refreshOn=l.toString()),h&&(m.requestedClaims=h,m.requestedClaimsHash=g),m.tokenType?.toLowerCase()!==st.BEARER.toLowerCase())switch(m.credentialType=we.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case st.POP:const T=ms(n,c);if(!T?.cnf?.kid)throw P(Zh);m.keyId=T.cnf.kid;break;case st.SSH:m.keyId=f}return m}function eO(t,e,n,r,o,i,s){const a={credentialType:we.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function HC(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function tO(t){return!!t&&HC(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===we.ACCESS_TOKEN||t.credentialType===we.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function nO(t){return!!t&&HC(t)&&t.hasOwnProperty("realm")&&t.credentialType===we.ID_TOKEN}function rO(t){return!!t&&HC(t)&&t.credentialType===we.REFRESH_TOKEN}function EQ(t){return[t.homeAccountId,t.environment].join("-").toLowerCase()}function IQ(t){return[t.credentialType,t.credentialType===we.REFRESH_TOKEN&&t.familyId||t.clientId,t.realm||""].join("-").toLowerCase()}function TQ(t){return(t.target||"").toLowerCase()}function wQ(t){return(t.requestedClaimsHash||"").toLowerCase()}function SQ(t){return t.tokenType&&t.tokenType.toLowerCase()!==st.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function oO(){return Wr()+86400}function Lg(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function jC(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function iO(t){return t.expiresAt<=Wr()}class Pt{constructor(e){const n=e?fr.trimArrayEntries([...e]):[],r=n?fr.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||A.EMPTY_STRING).split(" ");return new Pt(r)}static createSearchScopes(e){const n=new Pt(e);return n.containsOnlyOIDCScopes()?n.removeScope(A.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw dt(Ah)}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Pt(n);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return DN.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw P(Jh)}}removeScope(e){if(!e)throw P(Qh);this.scopes.delete(e.trim())}removeOIDCScopes(){DN.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw P(tu);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw P(tu);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):A.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Fg(t,e){if(!t)throw P(Uh);try{const n=e(t);return JSON.parse(n)}catch{throw P(Zl)}}function Ua(t){if(!t)throw P(Zl);const e=t.split(".",2);return{uid:e[0],utid:e.length<2?A.EMPTY_STRING:e[1]}}function Bg(t,e){return!!t&&!!e&&t===e.split(".")[1]}function VC(t,e,n,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:Bg(u,t)}}return{tenantId:n,localAccountId:e,isHomeTenant:Bg(n,t)}}function qC(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...s}=e;o={...t,...s}}if(n){const{isHomeTenant:i,...s}=VC(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...s,idTokenClaims:n,idToken:r},o}return o}function sO(t){return t&&(t.tid||t.tfp||t.acr)||null}class Ut{generateAccountId(){return[this.homeAccountId,this.environment].join("-").toLowerCase()}generateAccountKey(){return Ut.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join("-").toLowerCase()}static createAccount(e,n,r){const o=new Ut;let i;o.authorityType=1===n.authorityType?"ADFS":"AAD"===n.protocolMode?"MSSTS":"Generic",e.clientInfo&&r&&(i=Fg(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw P(ru);if(o.environment=s,o.realm=i?.utid||sO(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const l=VC(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,n,r){const o=new Ut;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,n,r,o,i){if(1!==n&&2!==n){if(e)try{const s=Fg(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}const cO={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},$C={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},lO=new Set;function uO(t,e,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=Ug(e,t);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Ug(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}$C.metadata.forEach(t=>{t.aliases.forEach(e=>{lO.add(e)})});const GC="cache_quota_exceeded",zC="cache_error_unknown",KC={[GC]:"Exceeded cache storage capacity.",[zC]:"Unexpected error occurred when using cache storage."};class Ha extends Error{constructor(e,n){const r=n||(KC[e]?KC[e]:KC[zC]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Ha.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function dO(t){return t instanceof Error?"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||t.message.includes("exceeded the quota")?new Ha(GC):new Ha(t.name,t.message):new Ha(zC)}class ja{constructor(e,n,r,o){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(ZN,BC),this.staticAuthorityOptions=o}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(n||{},e),e,n)}getAccountInfoFilteredBy(e,n){const r=this.getAllAccounts(n,e);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,n,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,o,i){let a,s=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,n,r.tenantId);return c&&(a=ms(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=qC(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,n,r,o){const i=e.getAccountInfo();let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=s.get(r);if(!l)return[];s=new Map([[r,l]])}const c=[];return s.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(i,a,l,n,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||void 0!==n.isHomeTenant&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}saveCacheRecord(e,n,r){var o=this;return E(function*(){if(!e)throw P(Yh);try{e.account&&o.setAccount(e.account,n),e.idToken&&!1!==r?.idToken&&o.setIdTokenCredential(e.idToken,n),e.accessToken&&!1!==r?.accessToken&&(yield o.saveAccessToken(e.accessToken,n)),e.refreshToken&&!1!==r?.refreshToken&&o.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&o.setAppMetadata(e.appMetadata,n)}catch(i){throw o.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof _t?i:dO(i)}})()}saveAccessToken(e,n){var r=this;return E(function*(){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=r.getTokenKeys(),s=Pt.fromString(e.target);i.accessToken.forEach(a=>{if(!r.accessTokenKeyMatchesFilter(a,o,!1))return;const c=r.getAccessTokenCredential(a,n);c&&r.credentialMatchesFilter(c,o)&&Pt.fromString(c.target).intersectingScopeSets(s)&&r.removeAccessToken(a,n)}),r.setAccessTokenCredential(e,n)})()}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;const s=this.getAccount(i,n,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&0===c.length||o.push(s)}),o}isAccountKey(e,n,r){return!(e.split("-").length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split("-").length<6)return!1;const n=e.toLowerCase();if(-1===n.indexOf(we.ID_TOKEN.toLowerCase())&&-1===n.indexOf(we.ACCESS_TOKEN.toLowerCase())&&-1===n.indexOf(we.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===n.indexOf(we.REFRESH_TOKEN.toLowerCase()))return!1;if(n.indexOf(we.REFRESH_TOKEN.toLowerCase())>-1){const o=`${we.REFRESH_TOKEN}-1-`;if(-1===n.indexOf(`${we.REFRESH_TOKEN}-${this.clientId}-`.toLowerCase())&&-1===n.indexOf(o.toLowerCase()))return!1}else if(-1===n.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||"string"==typeof n.homeAccountId&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===we.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===st.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){var n=this;return E(function*(){const r=n.getAccountKeys(),o=[];r.forEach(i=>{o.push(n.removeAccount(i,e))}),yield Promise.all(o)})()}removeAccount(e,n){var r=this;return E(function*(){const o=r.getAccount(e,n,r.commonLogger);o&&(yield r.removeAccountContext(o,n),r.removeItem(e,n))})()}removeAccountContext(e,n){var r=this;return E(function*(){const o=r.getTokenKeys(),i=e.generateAccountId();o.idToken.forEach(s=>{0===s.indexOf(i)&&r.removeIdToken(s,n)}),o.accessToken.forEach(s=>{0===s.indexOf(i)&&r.removeAccessToken(s,n)}),o.refreshToken.forEach(s=>{0===s.indexOf(i)&&r.removeRefreshToken(s,n)}),r.getKeys().forEach(s=>{s.includes(i)&&r.removeItem(s,n)})})()}updateOutdatedCachedAccount(e,n,r,o){if(n&&n.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(u=>u.startsWith(n.homeAccountId)),s=[];i.forEach(u=>{const d=this.getCachedAccountEntity(u,r);d&&s.push(d)});const a=s.find(u=>Bg(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:Bg(u.realm,u.homeAccountId)}));const c=ja.toObject(new Ut,{...a}),l=c.generateAccountKey();return i.forEach(u=>{u!==l&&this.removeOutdatedAccount(e,r)}),this.setAccount(c,r),o?.verbose("Updated an outdated account entity in the cache"),c}return n}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),!r||r.credentialType.toLowerCase()!==we.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==st.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error("Binding key could not be removed")})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}readAccountFromCache(e,n){const r=Ut.generateAccountCacheKey(e);return this.getAccount(r,n,this.commonLogger)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:we.ID_TOKEN,clientId:this.clientId,realm:o},n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){const u=new Map;a.forEach((f,h)=>{f.realm===e.tenantId&&u.set(h,f)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,n)}),i&&n&&i.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,n);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&-1===r.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===r.indexOf(n.homeAccountId.toLowerCase()))}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const s=Pt.createSearchScopes(n.scopes),a=n.authenticationScheme||st.BEARER,c=a&&a.toLowerCase()!==st.BEARER.toLowerCase()?we.ACCESS_TOKEN_WITH_AUTH_SCHEME:we.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,l,!0)){const g=this.getAccessTokenCredential(h,n.correlationId);g&&this.credentialMatchesFilter(g,l)&&d.push(g)}});const f=d.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(h=>{this.removeAccessToken(Ba(h),n.correlationId)}),i&&n.correlationId&&i.addFields({multiMatchedAT:d.length},n.correlationId),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&-1===o.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===o.indexOf(n.homeAccountId.toLowerCase())||n.realm&&-1===o.indexOf(n.realm.toLowerCase())||n.requestedClaimsHash&&-1===o.indexOf(n.requestedClaimsHash.toLowerCase()))return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,n);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:we.REFRESH_TOKEN,clientId:this.clientId,familyId:n?"1":void 0},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const f=this.getRefreshTokenCredential(d,r);f&&this.credentialMatchesFilter(f,a)&&l.push(f)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&-1===r.indexOf(n.familyId.toLowerCase())||!n.familyId&&n.clientId&&-1===r.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===r.indexOf(n.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw P(Kh);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!(!n||"1"!==n.familyId)}matchHomeAccountId(e,n){return"string"==typeof e.homeAccountId&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){return n===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){return n.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,n){return!(!e||"string"!=typeof e||n?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,n){return!(!e.userAssertionHash||n!==e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=function kQ(t,e){let n;const r=t.canonicalAuthority;if(r){const o=new Ve(r).getUrlComponents().HostNameAndPort;n=uO(o,t.cloudDiscoveryMetadata?.metadata,"config",e)||uO(o,$C.metadata,"hardcoded_values",e)||t.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!(!e.clientId||n!==e.clientId)}matchFamilyId(e,n){return!(!e.familyId||n!==e.familyId)}matchRealm(e,n){return e.realm?.toLowerCase()===n.toLowerCase()}matchNativeAccountId(e,n){return!(!e.nativeAccountId||n!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!(!e.authorityType||n.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,n){return!(e.credentialType!==we.ACCESS_TOKEN&&e.credentialType!==we.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Pt.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!(!e.tokenType||e.tokenType!==n)}matchKeyId(e,n){return!(!e.keyId||e.keyId!==n)}isAppMetadata(e){return-1!==e.indexOf(Qv)}isAuthorityMetadata(e){return-1!==e.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(e){return`authority-metadata-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class OQ extends ja{setAccount(){throw P(Fe)}getAccount(){throw P(Fe)}getCachedAccountEntity(){throw P(Fe)}setIdTokenCredential(){throw P(Fe)}getIdTokenCredential(){throw P(Fe)}setAccessTokenCredential(){throw P(Fe)}getAccessTokenCredential(){throw P(Fe)}setRefreshTokenCredential(){throw P(Fe)}getRefreshTokenCredential(){throw P(Fe)}setAppMetadata(){throw P(Fe)}getAppMetadata(){throw P(Fe)}setServerTelemetry(){throw P(Fe)}getServerTelemetry(){throw P(Fe)}setAuthorityMetadata(){throw P(Fe)}getAuthorityMetadata(){throw P(Fe)}getAuthorityMetadataKeys(){throw P(Fe)}setThrottlingCache(){throw P(Fe)}getThrottlingCache(){throw P(Fe)}removeItem(){throw P(Fe)}getKeys(){throw P(Fe)}getAccountKeys(){throw P(Fe)}getTokenKeys(){throw P(Fe)}updateCredentialCacheKey(){throw P(Fe)}removeOutdatedAccount(){throw P(Fe)}}const fO={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},PQ={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:St.Info,correlationId:A.EMPTY_STRING},xQ={claimsBasedCachingEnabled:!1},LQ={sendGetRequestAsync:()=>E(function*(){throw P(Fe)})(),sendPostRequestAsync:()=>E(function*(){throw P(Fe)})()},FQ={sku:A.SKU,version:BC,cpu:A.EMPTY_STRING,os:A.EMPTY_STRING},BQ={clientSecret:A.EMPTY_STRING,clientAssertion:void 0},UQ={azureCloudInstance:"none",tenant:`${A.DEFAULT_COMMON_TENANT}`},HQ={application:{appName:"",appVersion:""}};function VQ(t){return{clientCapabilities:[],azureCloudOptions:UQ,skipAuthorityMetadataCache:!1,instanceAware:!1,...t}}function WC(t){return"OIDC"===t.authOptions.authority.options.protocolMode}const qQ={sendGetRequestAsync:()=>Promise.reject(P(Fe)),sendPostRequestAsync:()=>Promise.reject(P(Fe))};class hO{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class $Q{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new hO}}startPerformanceMeasurement(){return new hO}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}class Hg{navigateInternal(e,n){return Hg.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Hg.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},n.timeout)})}}class jg extends _t{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,jg.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function gO(t,e,n){return new jg(t,e,n)}class GQ{sendGetRequestAsync(e,n){return E(function*(){let r,o={},i=0;const s=pO(n);try{r=yield fetch(e,{method:"GET",headers:s})}catch{throw Q(window.navigator.onLine?yg:Fa)}o=mO(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch{throw gO(Q(fu),i,o)}})()}sendPostRequestAsync(e,n){return E(function*(){const r=n&&n.body||"",o=pO(n);let i,s=0,a={};try{i=yield fetch(e,{method:"POST",headers:o,body:r})}catch{throw Q(window.navigator.onLine?_g:Fa)}a=mO(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch{throw gO(Q(fu),s,a)}})()}}function pO(t){try{const e=new Headers;return t&&t.headers?(Object.entries(t.headers).forEach(([r,o])=>{e.append(r,o)}),e):e}catch{throw Q(LN)}}function mO(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw Q(FN)}}const Va="3.30.0";class JC{static loggerCallback(e,n){switch(e){case St.Error:return void console.error(n);case St.Info:return void console.info(n);case St.Verbose:return void console.debug(n);case St.Warning:return void console.warn(n);default:return void console.log(n)}}constructor(e){let n;this.browserEnvironment=typeof window<"u",this.config=function QQ({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:A.EMPTY_STRING,authority:`${A.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:A.EMPTY_STRING,authorityMetadata:A.EMPTY_STRING,redirectUri:typeof window<"u"?Ao():"",postLogoutRedirectUri:A.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:"AAD",OIDCOptions:{serverResponseType:ql.FRAGMENT,defaultScopes:[A.OPENID_SCOPE,A.PROFILE_SCOPE,A.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:"none",tenant:A.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:"sessionStorage",temporaryCacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||"localStorage"!==e.cacheLocation),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:St.Info,piiLoggingEnabled:!1},l={...{...fO,loggerOptions:a,networkClient:o?new GQ:qQ,navigationClient:new Hg,loadFrameTimeout:0,windowHashTimeout:n?.loadFrameTimeout||6e4,iframeHashTimeout:n?.loadFrameTimeout||1e4,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:30},...n,loggerOptions:n?.loggerOptions||a},u={application:{appName:A.EMPTY_STRING,appVersion:A.EMPTY_STRING},client:new $Q};if("OIDC"!==t?.protocolMode&&t?.OIDCOptions&&new pi(l.loggerOptions).warning(JSON.stringify(dt(Lh))),t?.protocolMode&&"AAD"!==t.protocolMode&&l?.allowNativeBroker)throw dt(Fh);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t?.OIDCOptions}},cache:{...s,...e},system:l,telemetry:{...u,...r}}}(e,this.browserEnvironment);try{n=window.sessionStorage}catch{}const r=n?.getItem("msal.browser.log.level"),o=n?.getItem("msal.browser.log.pii")?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(St).includes(r)?St[r]:void 0;a&&(s.loggerCallback=JC.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new pi(s,"@azure/msal-browser",Va),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let _O=(()=>{class t extends JC{getModuleName(){return t.MODULE_NAME}getId(){return t.ID}initialize(){var n=this;return E(function*(){return n.available=typeof window<"u",n.available})()}}return t.MODULE_NAME="",t.ID="StandardOperatingContext",t})();const yO="missing_kid_error",vO="missing_alg_error",YQ={[yO]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[vO]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class YC extends _t{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,YC.prototype)}}function CO(t){return new YC(t,YQ[t])}class ZC{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw CO(yO);if(!e.alg)throw CO(vO);const n=new ZC({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(n)}}function Qr(t){return(new TextDecoder).decode(function ZQ(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Q(Ag)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}(t))}class XQ{constructor(){this.dbName=Yv,this.version=1,this.tableName=G3,this.dbOpen=!1}open(){var e=this;return E(function*(){return new Promise((n,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,n()}),o.addEventListener("error",()=>r(Q(gu)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return E(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var n=this;return E(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(Q(gi));const a=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).get(e);a.addEventListener("success",c=>{const l=c;n.closeConnection(),r(l.target.result)}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}setItem(e,n){var r=this;return E(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(Q(gi));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(n,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",l=>{r.closeConnection(),i(l)})})})()}removeItem(e){var n=this;return E(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(Q(gi));const a=n.db.transaction([n.tableName],"readwrite").objectStore(n.tableName).delete(e);a.addEventListener("success",()=>{n.closeConnection(),r()}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}getKeys(){var e=this;return E(function*(){return yield e.validateDbIsOpen(),new Promise((n,r)=>{if(!e.db)return r(Q(gi));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),n(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var n=this;return E(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(Q(gi));const a=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).count(e);a.addEventListener("success",c=>{const l=c;n.closeConnection(),r(1===l.target.result)}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return E(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((n,r)=>{const o=window.indexedDB.deleteDatabase(Yv),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),n(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class XC{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class e4{constructor(e){this.inMemoryCache=new XC,this.indexedDBCache=new XQ,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof pu&&e.errorCode===gu))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var n=this;return E(function*(){const r=n.inMemoryCache.getItem(e);if(!r)try{return n.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield n.indexedDBCache.getItem(e)}catch(o){n.handleDatabaseAccessError(o)}return r})()}setItem(e,n){var r=this;return E(function*(){r.inMemoryCache.setItem(e,n);try{yield r.indexedDBCache.setItem(e,n)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var n=this;return E(function*(){n.inMemoryCache.removeItem(e);try{yield n.indexedDBCache.removeItem(e)}catch(r){n.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return E(function*(){const n=e.inMemoryCache.getKeys();if(0===n.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return n})()}containsKey(e){var n=this;return E(function*(){const r=n.inMemoryCache.containsKey(e);if(!r)try{return n.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield n.indexedDBCache.containsKey(e)}catch(o){n.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return E(function*(){try{e.logger.verbose("Deleting persistent keystore");const n=yield e.indexedDBCache.deleteDatabase();return n&&e.logger.verbose("Persistent keystore deleted"),n}catch(n){return e.handleDatabaseAccessError(n),!1}})()}}let t4=(()=>{class t{constructor(n,r,o){this.logger=n,function tQ(t){if(!window)throw Q(La);if(!window.crypto)throw Q(lu);if(!t&&!window.crypto.subtle)throw Q(lu,"crypto_subtle_undefined")}(o??!1),this.cache=new e4(this.logger),this.performanceClient=r}createNewGuid(){return Kr()}base64Encode(n){return TC(n)}base64Decode(n){return Qr(n)}base64UrlEncode(n){return Mg(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}getPublicKeyThumbprint(n){var r=this;return E(function*(){const o=r.performanceClient?.startMeasurement("cryptoOptsGetPublicKeyThumbprint",n.correlationId),i=yield function rQ(t,e){return bC.apply(this,arguments)}(t.EXTRACTABLE,t.POP_KEY_USAGES),s=yield AC(i.publicKey),c=EO({e:s.e,kty:s.kty,n:s.n}),l=yield r.hashString(c),u=yield AC(i.privateKey),d=yield function oQ(t,e,n){return MC.apply(this,arguments)}(u,!1,["sign"]);return yield r.cache.setItem(l,{privateKey:d,publicKey:i.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),o&&o.end({success:!0}),l})()}removeTokenBindingKey(n){var r=this;return E(function*(){return yield r.cache.removeItem(n),!(yield r.cache.containsKey(n))})()}clearKeystore(){var n=this;return E(function*(){n.cache.clearInMemory();try{return yield n.cache.clearPersistent(),!0}catch(r){return r instanceof Error?n.logger.error(`Clearing keystore failed with error: ${r.message}`):n.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(n,r,o,i){var s=this;return E(function*(){const a=s.performanceClient?.startMeasurement("cryptoOptsSignJwt",i),c=yield s.cache.getItem(r);if(!c)throw Q(hu);const l=yield AC(c.publicKey),u=EO(l),d=Mg(JSON.stringify({kid:r})),h=Mg(ZC.getShrHeaderString({...o?.header,alg:l.alg,kid:d}));n.cnf={jwk:JSON.parse(u)};const m=`${h}.${Mg(JSON.stringify(n))}`,b=(new TextEncoder).encode(m),S=yield function iQ(t,e){return kC.apply(this,arguments)}(c.privateKey,b),Ne=`${m}.${kg(new Uint8Array(S))}`;return a&&a.end({success:!0}),Ne})()}hashString(n){return E(function*(){return qN(n)})()}}return t.POP_KEY_USAGES=["sign","verify"],t.EXTRACTABLE=!0,t})();function EO(t){return JSON.stringify(t,Object.keys(t).sort())}const _s=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{const a=t(...i);return s?.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},H=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let s4=(()=>{class t{constructor(n,r,o,i){this.networkInterface=n,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(n,r){var o=this;return E(function*(){o.performanceClient?.addQueueMeasurement("regionDiscoveryDetectRegion",o.correlationId);let i=n;if(i)r.region_source="3";else{const s=t.IMDS_OPTIONS;try{const a=yield H(o.getRegionFromIMDS.bind(o),"regionDiscoveryGetRegionFromIMDS",o.logger,o.performanceClient,o.correlationId)(A.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield H(o.getCurrentVersion.bind(o),"regionDiscoveryGetCurrentVersion",o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const l=yield H(o.getRegionFromIMDS.bind(o),"regionDiscoveryGetRegionFromIMDS",o.logger,o.performanceClient,o.correlationId)(c,s);200===l.status&&(i=l.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(n,r){var o=this;return E(function*(){return o.performanceClient?.addQueueMeasurement("regionDiscoveryGetRegionFromIMDS",o.correlationId),o.networkInterface.sendGetRequestAsync(`${A.IMDS_ENDPOINT}?api-version=${n}&format=text`,r,A.IMDS_TIMEOUT)})()}getCurrentVersion(n){var r=this;return E(function*(){r.performanceClient?.addQueueMeasurement("regionDiscoveryGetCurrentVersion",r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${A.IMDS_ENDPOINT}?format=json`,n);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return t.IMDS_OPTIONS={headers:{Metadata:"true"}},t})();class cn{constructor(e,n,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new s4(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(A.CIAM_AUTH_URL))return 3;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case A.ADFS:return 1;case A.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Ve(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw P(br)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw P(br)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw P(br)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw P(eg);return this.replacePath(this.metadata.end_session_endpoint)}throw P(br)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw P(br)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw P(br)}canReplaceTenant(e){return 1===e.PathSegments.length&&!cn.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&"AAD"===this.protocolMode}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new Ve(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(0===c&&this.canReplaceTenant(o)){const u=new Ve(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(n=n.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||"AAD"!==this.protocolMode&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return E(function*(){e.performanceClient?.addQueueMeasurement("authorityResolveEndpointsAsync",e.correlationId);const n=e.getCurrentMetadataEntity(),r=yield H(e.updateCloudDiscoveryMetadata.bind(e),"authorityUpdateCloudDiscoveryMetadata",e.logger,e.performanceClient,e.correlationId)(n);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,n.preferred_network);const o=yield H(e.updateEndpointMetadata.bind(e),"authorityUpdateEndpointMetadata",e.logger,e.performanceClient,e.correlationId)(n);e.updateCachedMetadata(n,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:oO(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){"cache"!==n&&"cache"!==r?.source&&(e.expiresAt=oO(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("authorityUpdateEndpointMetadata",n.correlationId);const r=n.updateEndpointMetadataFromLocalSources(e);if(r){if("hardcoded_values"===r.source&&n.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield H(n.updateMetadataWithRegionalInformation.bind(n),"authorityUpdateMetadataWithRegionalInformation",n.logger,n.performanceClient,n.correlationId)(r.metadata);Lg(e,i,!1),e.canonical_authority=n.canonicalAuthority}return r.source}let o=yield H(n.getEndpointMetadataFromNetwork.bind(n),"authorityGetEndpointMetadataFromNetwork",n.logger,n.performanceClient,n.correlationId)();if(o)return n.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield H(n.updateMetadataWithRegionalInformation.bind(n),"authorityUpdateMetadataWithRegionalInformation",n.logger,n.performanceClient,n.correlationId)(o)),Lg(e,o,!0),"network";throw P(Vh,n.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Lg(e,n,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Lg(e,o,!1),{source:"hardcoded_values",metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=iO(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Ve(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw dt(Oh)}return null}getEndpointMetadataFromNetwork(){var e=this;return E(function*(){e.performanceClient?.addQueueMeasurement("authorityGetEndpointMetadataFromNetwork",e.correlationId);const n={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,n);return function n4(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in cO?cO[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("authorityUpdateMetadataWithRegionalInformation",n.correlationId);const r=n.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==A.AZURE_REGION_AUTO_DISCOVER_FLAG)return n.regionDiscoveryMetadata.region_outcome="2",n.regionDiscoveryMetadata.region_used=r,cn.replaceWithRegionalInformation(e,r);const o=yield H(n.regionDiscovery.detectRegion.bind(n.regionDiscovery),"regionDiscoveryDetectRegion",n.logger,n.performanceClient,n.correlationId)(n.authorityOptions.azureRegionConfiguration?.environmentRegion,n.regionDiscoveryMetadata);if(o)return n.regionDiscoveryMetadata.region_outcome="4",n.regionDiscoveryMetadata.region_used=o,cn.replaceWithRegionalInformation(e,o);n.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("authorityUpdateCloudDiscoveryMetadata",n.correlationId);const r=n.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield H(n.getCloudDiscoveryMetadataFromNetwork.bind(n),"authorityGetCloudDiscoveryMetadataFromNetwork",n.logger,n.performanceClient,n.correlationId)();if(o)return jC(e,o,!0),"network";throw dt(Ph)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||A.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||A.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||A.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),jC(e,n,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function NQ(t){return Ug($C.metadata,t)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),jC(e,o,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=iO(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),cn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=Ug(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),dt(Yl)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),cn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return E(function*(){e.performanceClient?.addQueueMeasurement("authorityGetCloudDiscoveryMetadataFromNetwork",e.correlationId);const n=`${A.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(n,r);let s,a;if(function r4(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function o4(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===A.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=Ug(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof _t?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=cn.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Ve.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;return n&&"none"!==n.azureCloudInstance&&(r=`${n.azureCloudInstance}/${n.tenant?n.tenant:A.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return A.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw P(br)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return lO.has(e)}static isPublicCloudAuthority(e){return A.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new Ve(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${A.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=Ve.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=cn.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=cn.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=cn.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new Ve(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(A.CIAM_AUTH_URL)&&(n=`${n}${o.HostNameAndPort.split(".")[0]}${A.AAD_TENANT_DOMAIN_SUFFIX}`),n}}function IO(t){return t.endsWith(A.FORWARD_SLASH)?t:`${t}${A.FORWARD_SLASH}`}cn.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);const qa="no_tokens_found",Vg="native_account_unavailable",eE="refresh_token_expired",$a="bad_token",TO=["interaction_required","consent_required","login_required",$a],f4=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],qg={[qa]:"No refresh token found in the cache. Please sign-in.",[Vg]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[eE]:"Refresh token has expired.",[$a]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class hr extends _t{constructor(e,n,r,o,i,s,a,c){super(e,n,r),Object.setPrototypeOf(this,hr.prototype),this.timestamp=o||A.EMPTY_STRING,this.traceId=i||A.EMPTY_STRING,this.correlationId=s||A.EMPTY_STRING,this.claims=a||A.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function wO(t,e,n){const r=!!t&&TO.indexOf(t)>-1,o=!!n&&f4.indexOf(n)>-1,i=!!e&&TO.some(s=>e.indexOf(s)>-1);return r||i||o}function tE(t){return new hr(t,qg[t])}class Mr{static setRequestState(e,n,r){const o=Mr.generateLibraryState(e,r);return n?`${o}${A.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw P(iu);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw P(iu);if(!n)throw P(hi);try{const r=n.split(A.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(A.RESOURCE_DELIM):A.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||A.EMPTY_STRING,libraryState:a}}catch{throw P(hi)}}}class h4{constructor(){if(!window.localStorage)throw eC(Kl)}getItem(e){return window.localStorage.getItem(e)}setItem(e,n){window.localStorage.setItem(e,n)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}class g4{constructor(){if(!window.sessionStorage)throw eC(Kl)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function SO(t,e){if(!e)return null;try{return Mr.parseRequestState(t,e).libraryState.meta}catch{throw P(hi)}}class m4{getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===n)return c}return""}setItem(e,n,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(r){i+=`expires=${function _4(t){return new Date((new Date).getTime()+864e5*t).toUTCString()}(r)};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");n.push(o[0])}),n}containsKey(e){return this.getKeys().includes(e)}}class nE extends ja{constructor(e,n,r,o,i,s){super(e,r,o,i),this.cacheConfig=n,this.logger=o,this.internalStorage=new XC,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new m4,n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case"localStorage":return new h4;case"sessionStorage":return new g4}}catch(n){this.logger.error(n)}return this.cacheConfig.cacheLocation="memoryStorage",new XC}migrateCacheEntries(){const e=this.browserStorage.getItem("msal.version");e&&this.logger.info(`MSAL.js was last initialized with version ${e}`),e!==Va&&this.browserStorage.setItem("msal.version",Va);const r=`${A.CACHE_PREFIX}.${Gt.CLIENT_INFO}`,o=`${A.CACHE_PREFIX}.${Gt.ERROR}`,i=`${A.CACHE_PREFIX}.${Gt.ERROR_DESC}`,u=[this.browserStorage.getItem(`${A.CACHE_PREFIX}.${Gt.ID_TOKEN}`),this.browserStorage.getItem(r),this.browserStorage.getItem(o),this.browserStorage.getItem(i)];[Gt.ID_TOKEN,Gt.CLIENT_INFO,Gt.ERROR,Gt.ERROR_DESC].forEach((f,h)=>{const g=u[h];g&&this.setTemporaryCache(f,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.cryptoImpl.createNewGuid(),n=this.getItem("msal.account.keys"),r=this.getItem(`msal.token.keys.${this.clientId}`);n&&r?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(i=>{if(this.isCredentialKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);if(a&&a.hasOwnProperty("credentialType"))switch(a.credentialType){case we.ID_TOKEN:if(nO(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,we.ID_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${i}`);break;case we.ACCESS_TOKEN:case we.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(tO(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,we.ACCESS_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${i}`);break;case we.REFRESH_TOKEN:if(rO(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,we.REFRESH_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${i}`)}}}if(this.isAccountKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);a&&Ut.isAccountEntity(a)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${i} found, saving key to account key map`),this.addAccountKeyToMap(i,e))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&"object"==typeof n?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n,r){let o=[];for(let s=0;s<=20;s++)try{this.browserStorage.setItem(e,n),s>0&&this.removeAccessTokenKeys(o.slice(0,s),r);break}catch(a){const c=dO(a);if(!(c.errorCode===GC&&s<20))throw c;if(o.length||(o=e===`msal.token.keys.${this.clientId}`?JSON.parse(n).accessToken:this.getTokenKeys().accessToken),o.length<=s)throw c;this.removeAccessToken(o[s],r,!1)}}getAccount(e,n,r){this.logger.trace("BrowserCacheManager.getAccount called");const o=this.getCachedAccountEntity(e,n);return this.updateOutdatedCachedAccount(e,o,n,r)}getCachedAccountEntity(e,n){const r=this.getItem(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const o=this.validateAndParseJson(r);return o&&Ut.isAccountEntity(o)?ja.toObject(new Ut,o):null}setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey();e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addAccountKeyToMap(r,n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem("msal.account.keys");return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();-1===r.indexOf(e)?(r.push(e),this.setItem("msal.account.keys",JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),0===r.length)return void this.removeItem("msal.account.keys");this.setItem("msal.account.keys",JSON.stringify(r),n),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){var r=()=>super.removeAccount,o=this;return E(function*(){r().call(o,e,n),o.removeAccountKeyFromMap(e,n)})()}removeOutdatedAccount(e,n){this.removeItem(e),this.removeAccountKeyFromMap(e,n)}removeIdToken(e,n){super.removeIdToken(e,n),this.removeTokenKey(e,we.ID_TOKEN,n)}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),this.performanceClient?.incrementFields({accessTokensRemoved:1},n),r&&this.removeTokenKey(e,we.ACCESS_TOKEN,n)}removeAccessTokenKeys(e,n){this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys();let o=0;if(e.forEach(i=>{const s=r.accessToken.indexOf(i);s>-1&&(r.accessToken.splice(s,1),o++)}),o>0)return this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),void this.setTokenKeys(r,n)}removeRefreshToken(e,n){super.removeRefreshToken(e,n),this.removeTokenKey(e,we.REFRESH_TOKEN,n)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`msal.token.keys.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}setTokenKeys(e,n){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(e),n):this.removeItem(`msal.token.keys.${this.clientId}`)}addTokenKey(e,n,r){this.logger.trace("BrowserCacheManager addTokenKey called");const o=this.getTokenKeys();switch(n){case we.ID_TOKEN:-1===o.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case we.ACCESS_TOKEN:const i=o.accessToken.indexOf(e);-1!==i&&o.accessToken.splice(i,1),this.logger.trace(`access token ${-1===i?"added to":"updated in"} map`),o.accessToken.push(e);break;case we.REFRESH_TOKEN:-1===o.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),P(su)}this.setTokenKeys(o,r)}removeTokenKey(e,n,r,o=this.getTokenKeys()){switch(this.logger.trace("BrowserCacheManager removeTokenKey called"),n){case we.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const i=o.idToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case we.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const s=o.accessToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case we.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const a=o.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),P(su)}this.setTokenKeys(o,r)}getIdTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const o=this.validateAndParseJson(r);return o&&nO(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)}setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=Ba(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,we.ID_TOKEN,n)}getAccessTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,we.ACCESS_TOKEN,n),null;const o=this.validateAndParseJson(r);return o&&tO(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=Ba(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,we.ACCESS_TOKEN,n)}getRefreshTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,we.REFRESH_TOKEN,n),null;const o=this.validateAndParseJson(r);return o&&rO(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=Ba(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,we.REFRESH_TOKEN,n)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function RQ(t,e){return!!e&&0===t.indexOf(Qv)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function AQ({environment:t,clientId:e}){return[Qv,t,e].join("-").toLowerCase()}(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function DQ(t,e){const n=0===t.indexOf(en.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function MQ(t,e){return!!e&&0===t.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",n)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||A.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||A.EMPTY_STRING]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(Gt.ACTIVE_ACCOUNT_FILTERS),r=this.getItem(n);if(!r){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const i=this.generateCacheKey(Gt.ACTIVE_ACCOUNT),s=this.getItem(i);if(!s)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const a=this.getAccountInfoFilteredBy({localAccountId:s},e);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(a,e),a):null}const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(Gt.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(Gt.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Date.now().toString()};this.setItem(r,JSON.stringify(i),n),this.setItem(o,e.localAccountId,n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r),this.browserStorage.removeItem(o)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function bQ(t,e){let n=!1;t&&(n=0===t.indexOf("throttling"));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if("localStorage"===this.cacheConfig.cacheLocation){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){var n=this;return E(function*(){yield n.removeAllAccounts(e),n.removeAppMetadata(e),n.temporaryCacheStorage.getKeys().forEach(r=>{(-1!==r.indexOf(A.CACHE_PREFIX)||-1!==r.indexOf(n.clientId))&&n.removeTemporaryItem(r)}),n.browserStorage.getKeys().forEach(r=>{(-1!==r.indexOf(A.CACHE_PREFIX)||-1!==r.indexOf(n.clientId))&&n.browserStorage.removeItem(r)}),n.internalStorage.clear()})()}clearTokensAndKeysWithClaims(e,n){var r=this;return E(function*(){e.addQueueMeasurement("clearTokensAndKeysWithClaims",n);const o=r.getTokenKeys();let i=0;o.accessToken.forEach(s=>{const a=r.getAccessTokenCredential(s,n);a?.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&(r.removeAccessToken(s,n),i++)}),i>0&&r.logger.warning(`${i} access tokens with claims in the cache keys have been removed from the cache.`)})()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):fr.startsWith(e,A.CACHE_PREFIX)||fr.startsWith(e,Gt.ADAL_ID_TOKEN)?e:`${A.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=Mr.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`authority.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=Mr.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`nonce.id_token.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=Mr.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`request.state.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),r=this.getTemporaryCache(n);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,n,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,n,!1);const c=this.generateAuthorityKey(e);this.setTemporaryCache(c,r,!1),i?this.setTemporaryCache("ccs.credential",JSON.stringify({credential:i.homeAccountId,type:"home_account_id"}),!0):o&&this.setTemporaryCache("ccs.credential",JSON.stringify({credential:o,type:"UPN"}),!0)}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(n=>{-1!==n.indexOf(e)&&this.removeTemporaryItem(n)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.correlationId")),this.removeTemporaryItem(this.generateCacheKey("ccs.credential")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||A.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(n=>{if(-1===n.indexOf("request.state"))return;const r=this.temporaryCacheStorage.getItem(n);if(!r)return;const o=SO(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=TC(JSON.stringify(e));this.setTemporaryCache("request.params",n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache("request.params",!0);if(!n)throw Q(pg);let r;try{r=JSON.parse(Qr(n))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),Q(mg)}if(this.removeTemporaryItem(this.generateCacheKey("request.params")),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Q(du);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){return this.getTemporaryCache(`${A.CACHE_PREFIX}.interaction.status`,!1)}setInteractionInProgress(e){const n=`${A.CACHE_PREFIX}.interaction.status`;if(e){if(this.getInteractionInProgress())throw Q(ag);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(Gt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(Gt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(Gt.ID_TOKEN,!0);n&&(this.browserStorage.removeItem(this.generateCacheKey(Gt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=n||e;if(r){const o=ms(r,Qr);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n,r){const o=Ba(n);if(e!==o){const i=this.getItem(e);if(i)return this.browserStorage.removeItem(e),this.setItem(o,i,r),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,n){var r=this;return E(function*(){const o=Pg(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;n.claims&&(i=yield r.cryptoImpl.hashString(n.claims));const s=xg(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Qr,void 0,e.tokenType,void 0,n.sshKid,n.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s},e.correlationId)})()}saveCacheRecord(e,n,r){var o=()=>super.saveCacheRecord,i=this;return E(function*(){try{yield o().call(i,e,n,r)}catch(s){if(s instanceof Ha&&i.performanceClient&&n)try{const a=i.getTokenKeys();i.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},n)}catch{}throw s}})()}}class D4{constructor(e){this.eventCallbacks=new Map,this.logger=e||new pi({})}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||function hQ(){return Kr()}();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(0===a.length||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}}class mi extends _t{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,mi.prototype)}}class Jr{static generateThrottlingStorageKey(e){return`throttling.${JSON.stringify(e)}`}static preProcess(e,n,r){const o=Jr.generateThrottlingStorageKey(n),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void e.removeItem(o,r);throw new mi(i.errorCodes?.join(" ")||A.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,n,r,o){if(Jr.checkResponseStatus(r)||Jr.checkResponseForRetryAfter(r)){const i={throttleTime:Jr.calculateThrottleTime(parseInt(r.headers["Retry-After"])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Jr.generateThrottlingStorageKey(n),i,o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty("Retry-After")&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(n||60),r+3600))}static removeThrottle(e,n,r,o){const s=this.generateThrottlingStorageKey({clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid});e.removeItem(s,r.correlationId)}}const ys="client_id",DO="redirect_uri",bO="response_type",AO="token_type",RO="req_cnf",MO="return_spa_code",c6="x-client-xtra-sku",rE="brk_client_id",oE="brk_redirect_uri";class Ga{static validateRedirectUri(e){if(!e)throw dt(Sh)}static validatePrompt(e){const n=[];for(const r in zt)n.push(zt[r]);if(n.indexOf(e)<0)throw dt(Rh)}static validateClaims(e){try{JSON.parse(e)}catch{throw dt(Ql)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw dt(Jl);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([bN.PLAIN,bN.S256].indexOf(e)<0)throw dt(Nh)}}class _u{constructor(e,n){this.parameters=new Map,this.performanceClient=n,this.correlationId=e}addResponseTypeCode(){this.parameters.set(bO,encodeURIComponent(A.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(bO,encodeURIComponent(`${A.TOKEN_RESPONSE_TYPE} ${A.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||U3.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,n=!0,r=Ra){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new Pt(o);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(ys,encodeURIComponent(e))}addRedirectUri(e){Ga.validateRedirectUri(e),this.parameters.set(DO,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Ga.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,n){const r=this.addClientCapabilitiesToClaims(e,n);Ga.validateClaims(r),this.parameters.set("claims",encodeURIComponent(r))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){Ga.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,n){if(Ga.validateCodeChallengeParams(e,n),!e||!n)throw dt(Jl);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(n))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach(([n,r])=>{!this.parameters.has(n)&&r&&this.parameters.set(n,r)})}addClientCapabilitiesToClaims(e,n){let r;if(e)try{r=JSON.parse(e)}catch{throw dt(Ql)}else r={};return n&&n.length>0&&(r.hasOwnProperty("access_token")||(r.access_token={}),r.access_token.xms_cc={values:n}),JSON.stringify(r)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(AO,st.POP),this.parameters.set(RO,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(AO,st.SSH),this.parameters.set(RO,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const n={};n[rE]=e.brokerClientId,n[oE]=e.brokerRedirectUri,this.addExtraQueryParameters(n)}createQueryString(){const e=new Array;return this.parameters.forEach((n,r)=>{e.push(`${r}=${n}`)}),function l6(t,e,n){if(!e)return;const r=t.get(ys);r&&t.has(rE)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(DO)},e)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}function kO(t,e,n,r,o,i,s){return iE.apply(this,arguments)}function iE(){return(iE=E(function*(t,e,n,r,o,i,s){s?.addQueueMeasurement("authorityFactoryCreateDiscoveredInstance",i);const a=cn.transformCIAMAuthority(IO(t)),c=new cn(a,e,n,r,o,i,s);try{return yield H(c.resolveEndpointsAsync.bind(c),"authorityResolveEndpointsAsync",o,s,i)(),c}catch{throw P(br)}})).apply(this,arguments)}class sE{constructor(e,n){this.config=function jQ({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:f}){const h={...PQ,...n};return{authOptions:VQ(t),systemOptions:{...fO,...e},loggerOptions:h,cacheOptions:{...xQ,...r},storageInterface:o||new OQ(t.clientId,Og,new pi(h)),networkInterface:i||LQ,cryptoInterface:s||Og,clientCredentials:a||BQ,libraryInfo:{...FQ,...c},telemetry:{...HQ,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:f||null}}(e),this.logger=new pi(this.config.loggerOptions,ZN,BC),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n["Content-Type"]=A.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=Ua(e.credential);n["X-AnchorMailbox"]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":n["X-AnchorMailbox"]=`UPN: ${e.credential}`}return n}executePostToTokenEndpoint(e,n,r,o,i,s){var a=this;return E(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.sendPostRequest(o,e,{body:n,headers:r},i);return a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}sendPostRequest(e,n,r,o){var i=this;return E(function*(){let s;Jr.preProcess(i.cacheManager,e,o);try{s=yield H(i.networkClient.sendPostRequestAsync.bind(i.networkClient),"networkClientSendPostRequestAsync",i.logger,i.performanceClient,o)(n,r);const a=s.headers||{};i.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:a["x-ms-httpver"]||"",requestId:a["x-ms-request-id"]||""},o)}catch(a){if(a instanceof jg){const c=a.responseHeaders;throw c&&i.performanceClient?.addFields({httpVerToken:c["x-ms-httpver"]||"",requestId:c["x-ms-request-id"]||"",contentTypeHeader:c["Content-Type"]||void 0,contentLengthHeader:c["Content-Length"]||void 0,httpStatus:a.httpStatus},o),a.error}throw a instanceof _t?a:P(jh)}return Jr.postProcess(i.cacheManager,e,s,o),s})()}updateAuthority(e,n){var r=this;return E(function*(){r.performanceClient?.addQueueMeasurement("updateTokenEndpointAuthority",n);const o=`https://${e}/${r.authority.tenant}/`,i=yield kO(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,n,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const n=new _u(e.correlationId,this.performanceClient);return e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.addCorrelationId(e.correlationId),n.createQueryString()}}class za{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}generateCnf(e,n){var r=this;return E(function*(){r.performanceClient?.addQueueMeasurement("popTokenGenerateCnf",e.correlationId);const o=yield H(r.generateKid.bind(r),"popTokenGenerateCnf",n,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var n=this;return E(function*(){return n.performanceClient?.addQueueMeasurement("popTokenGenerateKid",e.correlationId),{kid:yield n.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,n,r){var o=this;return E(function*(){return o.signPayload(e,n,r)})()}signPayload(e,n,r,o){var i=this;return E(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=r,f=(a?new Ve(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:Wr(),m:s?.toUpperCase(),u:f?.HostNameAndPort,nonce:l||i.cryptoUtils.createNewGuid(),p:f?.AbsolutePath,q:f?.QueryString?[[],f.QueryString]:void 0,client_claims:c||void 0,...o},n,u,r.correlationId)})()}}class d6{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class vs{constructor(e,n,r,o,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw P(Oa,e.state?"Cached State":"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw P(hi,e.state)}try{o=decodeURIComponent(n)}catch{throw P(hi,e.state)}if(r!==o)throw P($h);if(e.error||e.error_description||e.suberror){const i=function f6(t){const n=t.error_uri?.lastIndexOf("code=");return n&&n>=0?t.error_uri?.substring(n+5):void 0}(e);throw wO(e.error,e.error_description,e.suberror)?new hr(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new mi(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,n){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||A.NOT_AVAILABLE} - Timestamp: ${e.timestamp||A.NOT_AVAILABLE} - Description: ${e.error_description||A.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||A.NOT_AVAILABLE} - Trace ID: ${e.trace_id||A.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new mi(e.error,r,e.suberror,o,e.status);if(n&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(n&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw wO(e.error,e.error_description,e.suberror)?new hr(e.error,e.error_description,e.suberror,e.timestamp||A.EMPTY_STRING,e.trace_id||A.EMPTY_STRING,e.correlation_id||A.EMPTY_STRING,e.claims||A.EMPTY_STRING,o):i}}handleServerTokenResponse(e,n,r,o,i,s,a,c,l){var u=this;return E(function*(){let d,f;if(u.performanceClient?.addQueueMeasurement("handleServerTokenResponse",e.correlation_id),e.id_token){if(d=ms(e.id_token||A.EMPTY_STRING,u.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw P(Gh);if(o.maxAge||0===o.maxAge){const m=d.auth_time;if(!m)throw P(eu);XN(m,o.maxAge)}}u.homeAccountIdentifier=Ut.generateHomeAccountId(e.client_info||A.EMPTY_STRING,n.authorityType,u.logger,u.cryptoObj,d),i&&i.state&&(f=Mr.parseRequestState(u.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const h=u.generateCacheRecord(e,n,r,o,d,s,i);let g;try{if(u.persistencePlugin&&u.serializableCache&&(u.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new d6(u.serializableCache,!0),yield u.persistencePlugin.beforeCacheAccess(g)),a&&!c&&h.account){const m=h.account.generateAccountKey();if(!u.cacheStorage.getAccount(m,o.correlationId,u.logger))return u.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield vs.generateAuthenticationResult(u.cryptoObj,n,h,!1,o,d,f,void 0,l)}yield u.cacheStorage.saveCacheRecord(h,o.correlationId,o.storeInCache)}finally{u.persistencePlugin&&u.serializableCache&&g&&(u.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield u.persistencePlugin.afterCacheAccess(g))}return vs.generateAuthenticationResult(u.cryptoObj,n,h,!1,o,d,f,e,l)})()}generateCacheRecord(e,n,r,o,i,s,a){const c=n.getPreferredCache();if(!c)throw P(ru);const l=sO(i);let u,d;e.id_token&&i&&(u=Pg(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=aE(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let f=null;if(e.access_token){const m=e.scope?Pt.fromString(e.scope):new Pt(o.scopes||[]),T=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,b=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,S=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,$=r+T,Ne=$+b,he=S&&S>0?r+S:void 0;f=xg(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant||"",m.printScopes(),$,Ne,this.cryptoObj.base64Decode,he,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let h=null;if(e.refresh_token){let m;e.refresh_token_expires_in&&(m=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),h=eO(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,m)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:f,refreshToken:h,appMetadata:g}}static generateAuthenticationResult(e,n,r,o,i,s,a,c,l){return E(function*(){let h,g,u=A.EMPTY_STRING,d=[],f=null,m=A.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==st.POP||i.popKid)u=r.accessToken.secret;else{const $=new za(e),{secret:Ne,keyId:he}=r.accessToken;if(!he)throw P(au);u=yield $.signPopToken(Ne,he,i)}d=Pt.fromString(r.accessToken.target).asArray(),f=new Date(1e3*Number(r.accessToken.expiresOn)),h=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),r.accessToken.refreshOn&&(g=new Date(1e3*Number(r.accessToken.refreshOn)))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");const T=s?.oid||s?.sub||"",b=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const S=r.account?qC(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:n.canonicalAuthority,uniqueId:T,tenantId:b,scopes:d,account:S,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:f,extExpiresOn:h,refreshOn:g,correlationId:i.correlationId,requestId:l||A.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||A.EMPTY_STRING,state:a?a.userRequestState:A.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||A.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||A.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function aE(t,e,n,r,o,i,s,a,c,l,u,d){d?.verbose("setCachedAccount called");const h=t.getAccountKeys().find(S=>S.startsWith(n));let g=null;h&&(g=t.getAccount(h,o,d));const m=g||Ut.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),T=m.tenantProfiles||[],b=c||m.realm;if(b&&!T.find(S=>S.tenantId===b)){const S=VC(n,m.localAccountId,b,i);T.push(S)}return m.tenantProfiles=T,m}function NO(t,e,n){return cE.apply(this,arguments)}function cE(){return(cE=E(function*(t,e,n){return"string"==typeof t?t:t({clientId:e,tokenEndpoint:n})})).apply(this,arguments)}class OO extends sE{constructor(e,n){super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("getAuthCodeUrl",e.correlationId);const r=yield H(n.createAuthCodeUrlQueryString.bind(n),"authClientCreateQueryString",n.logger,n.performanceClient,e.correlationId)(e);return Ve.appendQueryString(n.authority.authorizationEndpoint,r)})()}acquireToken(e,n){var r=this;return E(function*(){if(r.performanceClient?.addQueueMeasurement("authClientAcquireToken",e.correlationId),!e.code)throw P(Wh);const o=Wr(),i=yield H(r.executeTokenRequest.bind(r),"authClientExecuteTokenRequest",r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.["x-ms-request-id"],a=new vs(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),H(a.handleServerTokenResponse.bind(a),"handleServerTokenResponse",r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,n,void 0,void 0,void 0,s)})()}handleFragmentResponse(e,n){if(new vs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw P(Xh);return e}getLogoutUri(e){if(!e)throw dt(kh);const n=this.createLogoutUrlQueryString(e);return Ve.appendQueryString(this.authority.endSessionEndpoint,n)}executeTokenRequest(e,n){var r=this;return E(function*(){r.performanceClient?.addQueueMeasurement("authClientExecuteTokenRequest",n.correlationId);const o=r.createTokenQueryParameters(n),i=Ve.appendQueryString(e.tokenEndpoint,o),s=yield H(r.createTokenRequestBody.bind(r),"authClientCreateTokenRequestBody",r.logger,r.performanceClient,n.correlationId)(n);let a;if(n.clientInfo)try{const u=Fg(n.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${u.uid}.${u.utid}`,type:"home_account_id"}}catch(u){r.logger.verbose("Could not parse client info for CCS Header: "+u)}const c=r.createTokenRequestHeaders(a||n.ccsCredential),l={clientId:n.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return H(r.executePostToTokenEndpoint.bind(r),"authorizationCodeClientExecutePostToTokenEndpoint",r.logger,r.performanceClient,n.correlationId)(i,s,c,l,n.correlationId,"authorizationCodeClientExecutePostToTokenEndpoint")})()}createTokenRequestBody(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("authClientCreateTokenRequestBody",e.correlationId);const r=new _u(e.correlationId,n.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[ys]||n.config.authOptions.clientId),n.includeRedirectUri?r.addRedirectUri(e.redirectUri):Ga.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,n.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(n.config.libraryInfo),r.addApplicationTelemetry(n.config.telemetry.application),r.addThrottling(),n.serverTelemetryManager&&!WC(n.config)&&r.addServerTelemetry(n.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),n.config.clientCredentials.clientSecret&&r.addClientSecret(n.config.clientCredentials.clientSecret),n.config.clientCredentials.clientAssertion){const i=n.config.clientCredentials.clientAssertion;r.addClientAssertion(yield NO(i.assertion,n.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(i.assertionType)}if(r.addGrantType("authorization_code"),r.addClientInfo(),e.authenticationScheme===st.POP){const i=new za(n.cryptoUtils,n.performanceClient);let s;s=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield H(i.generateCnf.bind(i),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,r.addPopToken(s)}else if(e.authenticationScheme===st.SSH){if(!e.sshJwk)throw dt(Na);r.addSshJwk(e.sshJwk)}let o;if((!fr.isEmptyObj(e.claims)||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,n.config.authOptions.clientCapabilities),e.clientInfo)try{const i=Fg(e.clientInfo,n.cryptoUtils.base64Decode);o={credential:`${i.uid}.${i.utid}`,type:"home_account_id"}}catch(i){n.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(n.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case"home_account_id":try{const i=Ua(o.credential);r.addCcsOid(i)}catch(i){n.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":r.addCcsUpn(o.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[MO])&&r.addExtraQueryParameters({[MO]:"1"}),r.createQueryString()})()}createAuthCodeUrlQueryString(e){var n=this;return E(function*(){const r=e.correlationId||n.config.cryptoInterface.createNewGuid();n.performanceClient?.addQueueMeasurement("authClientCreateQueryString",r);const o=new _u(r,n.performanceClient);o.addClientId(e.embeddedClientId||e.extraQueryParameters?.[ys]||n.config.authOptions.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(o.addScopes(i,!0,n.oidcDefaultScopes),o.addRedirectUri(e.redirectUri),o.addCorrelationId(r),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(n.config.libraryInfo),WC(n.config)||o.addApplicationTelemetry(n.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==zt.SELECT_ACCOUNT)if(e.sid&&e.prompt===zt.NONE)n.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const s=n.extractAccountSid(e.account);let a=n.extractLoginHint(e.account);if(a&&e.domainHint&&(n.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){n.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(a);try{const c=Ua(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===zt.NONE){n.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(s);try{const c=Ua(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){n.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const c=Ua(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else n.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,n.config.authOptions.clientCapabilities),e.embeddedClientId&&o.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),n.addExtraQueryParams(e,o),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===st.POP)){const s=new za(n.cryptoUtils);let a;a=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield H(s.generateCnf.bind(s),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,o.addPopToken(a)}return o.createQueryString()})()}createLogoutUrlQueryString(e){const n=new _u(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,n),n.createQueryString()}addExtraQueryParams(e,n){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}class yu{constructor(e,n){this.cacheOutcome="0",this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||A.EMPTY_STRING,this.wrapperVer=e.wrapperVer||A.EMPTY_STRING,this.telemetryCacheKey=en.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${en.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&n.push(`broker_error=${r}`);const o=n.join(en.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(en.VALUE_SEPARATOR);return[en.SCHEMA_VERSION,s,o].join(en.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=yu.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(en.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(en.VALUE_SEPARATOR),i=e.errors.length,a=[i,n<i?en.OVERFLOW_TRUE:en.OVERFLOW_FALSE].join(en.VALUE_SEPARATOR);return[en.SCHEMA_VERSION,e.cacheHits,r,o,a].join(en.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=en.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?n.errors.push(e instanceof _t?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):n.errors.push(en.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),n=yu.maxErrorsToSend(e);if(n===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(2*n),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const a=e.failedRequests[2*n+1]||A.EMPTY_STRING,c=e.errors[n]||A.EMPTY_STRING;if(o+=(e.failedRequests[2*n]||A.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<en.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||A.EMPTY_STRING),e.push(this.regionSource||A.EMPTY_STRING),e.push(this.regionOutcome||A.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function h6(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[n,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(","),a.length<4)return e}else a=Array.from({length:4},()=>"|");return s.forEach((c,l)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function g6(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join("|"))}({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(",")}(e)}}class LO{constructor(e,n,r,o,i,s,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||Kr(),this.logger=o.clone("msal.js.browser",Va,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){var n=this;return E(function*(){if(e){Ut.accountInfoIsEqual(e,n.browserStorage.getActiveAccount(n.correlationId),!1)&&(n.logger.verbose("Setting active account to null"),n.browserStorage.setActiveAccount(null,n.correlationId));try{yield n.browserStorage.removeAccount(Ut.generateAccountCacheKey(e),n.correlationId),n.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{n.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{n.logger.verbose("No account provided in logout request, clearing all cache items.",n.correlationId),yield n.browserStorage.clear(n.correlationId),yield n.browserCrypto.clearKeystore()}catch{n.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){return this.logger.verbose("getRedirectUri called"),Ve.getAbsoluteUrl(e||this.config.auth.redirectUri,Ao())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new yu(r,this.browserStorage)}getDiscoveredAuthority(e){var n=this;return E(function*(){const{account:r}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;n.performanceClient.addQueueMeasurement("standardInteractionClientGetDiscoveredAuthority",n.correlationId);const i={protocolMode:n.config.auth.protocolMode,OIDCOptions:n.config.auth.OIDCOptions,knownAuthorities:n.config.auth.knownAuthorities,cloudDiscoveryMetadata:n.config.auth.cloudDiscoveryMetadata,authorityMetadata:n.config.auth.authorityMetadata,skipAuthorityMetadataCache:n.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||n.config.auth.authority,c=r&&(o?.length?"true"===o:n.config.auth.instanceAware)?n.config.auth.authority.replace(Ve.getDomainFromUrl(s),r.environment):s,l=cn.generateAuthority(c,e.requestAzureCloudOptions||n.config.auth.azureCloudOptions),u=yield H(kO,"authorityFactoryCreateDiscoveredInstance",n.logger,n.performanceClient,n.correlationId)(l,n.config.system.networkClient,n.browserStorage,i,n.logger,n.correlationId,n.performanceClient);if(r&&!u.isAlias(r.environment))throw dt(Bh);return u})()}}function m6(t,e,n){return lE.apply(this,arguments)}function lE(){return(lE=E(function*(t,e,n){t.addQueueMeasurement("generatePkceCodes",n);const r=_s(_6,"generateCodeVerifier",e,t,n)(t,e,n);return{verifier:r,challenge:yield H(y6,"generateCodeChallengeFromVerifier",e,t,n)(r,t,e,n)}})).apply(this,arguments)}function _6(t,e,n){try{const r=new Uint8Array(32);return _s(nQ,"getRandomValues",e,t,n)(r),kg(r)}catch{throw Q(cu)}}function y6(t,e,n,r){return uE.apply(this,arguments)}function uE(){return(uE=E(function*(t,e,n,r){e.addQueueMeasurement("generateCodeChallengeFromVerifier",r);try{const o=yield H(VN,"sha256Digest",n,e,r)(t,e,r);return kg(new Uint8Array(o))}catch{throw Q(cu)}})).apply(this,arguments)}function dE(t,e,n,r){return fE.apply(this,arguments)}function fE(){return(fE=E(function*(t,e,n,r){n.addQueueMeasurement("initializeBaseRequest",t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],s={...t,correlationId:t.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===st.SSH){if(!t.sshJwk)throw dt(Na);if(!t.sshKid)throw dt(xh)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=st.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&t.claims&&!fr.isEmptyObj(t.claims)&&(s.requestedClaimsHash=yield qN(t.claims)),s})).apply(this,arguments)}function v6(t,e,n,r,o){return hE.apply(this,arguments)}function hE(){return(hE=E(function*(t,e,n,r,o){r.addQueueMeasurement("initializeSilentRequest",t.correlationId);const i=yield H(dE,"initializeBaseRequest",o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}})).apply(this,arguments)}class Ka extends LO{initializeAuthorizationCodeRequest(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("standardInteractionClientInitializeAuthorizationCodeRequest",n.correlationId);const r=yield H(m6,"generatePkceCodes",n.logger,n.performanceClient,n.correlationId)(n.performanceClient,n.logger,n.correlationId),o={...e,redirectUri:e.redirectUri,code:A.EMPTY_STRING,codeVerifier:r.verifier};return e.codeChallenge=r.challenge,e.codeChallengeMethod=A.S256_CODE_CHALLENGE_METHOD,o})()}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const n={correlationId:this.correlationId||Kr(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=Ve.getAbsoluteUrl(e.postLogoutRedirectUri,Ao())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=Ve.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ao())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=Ve.getAbsoluteUrl(Ao(),Ao())),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("standardInteractionClientCreateAuthCodeClient",n.correlationId);const r=yield H(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,n.correlationId)(e);return new OO(r,n.performanceClient)})()}getClientConfiguration(e){var n=this;return E(function*(){const{serverTelemetryManager:r,requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}=e;n.performanceClient.addQueueMeasurement("standardInteractionClientGetClientConfiguration",n.correlationId);const c=yield H(n.getDiscoveredAuthority.bind(n),"standardInteractionClientGetDiscoveredAuthority",n.logger,n.performanceClient,n.correlationId)({requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}),l=n.config.system.loggerOptions;return{authOptions:{clientId:n.config.auth.clientId,authority:c,clientCapabilities:n.config.auth.clientCapabilities,redirectUri:n.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:n.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:n.correlationId},cacheOptions:{claimsBasedCachingEnabled:n.config.cache.claimsBasedCachingEnabled},cryptoInterface:n.browserCrypto,networkInterface:n.networkClient,storageInterface:n.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:"msal.js.browser",version:Va,cpu:A.EMPTY_STRING,os:A.EMPTY_STRING},telemetry:n.config.telemetry}})()}initializeAuthorizationRequest(e,n){var r=this;return E(function*(){r.performanceClient.addQueueMeasurement("standardInteractionClientInitializeAuthorizationRequest",r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Mr.setRequestState(r.browserCrypto,e&&e.state||A.EMPTY_STRING,{interactionType:n}),c={...yield H(dE,"initializeBaseRequest",r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||Kr(),responseMode:r.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return c;const l=e.account||r.browserStorage.getActiveAccount(r.correlationId);if(l&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,r.correlationId),c.account=l),!c.loginHint&&!l){const u=r.browserStorage.getLegacyLoginHint();u&&(c.loginHint=u)}return c})()}}const FO="user_switch",A6={[FO]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Yr extends _t{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,Yr.prototype),this.name="NativeAuthError",this.ext=r}}function Wa(t){return!!(t.ext&&t.ext.status&&("PERSISTENT_ERROR"===t.ext.status||"DISABLED"===t.ext.status)||t.ext&&t.ext.error&&-2147186943===t.ext.error)||"ContentError"===t.errorCode}function gE(t,e,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return tE(Vg);case"USER_INTERACTION_REQUIRED":return new hr(t,e);case"USER_CANCEL":return Q(Do);case"NO_NETWORK":return Q(Fa)}return new Yr(t,A6[t]||e,n)}class pE extends sE{constructor(e,n){super(e,n)}acquireToken(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireToken",e.correlationId);const r=Wr(),o=yield H(n.executeTokenRequest.bind(n),"refreshTokenClientExecuteTokenRequest",n.logger,n.performanceClient,e.correlationId)(e,n.authority),i=o.headers?.["x-ms-request-id"],s=new vs(n.config.authOptions.clientId,n.cacheManager,n.cryptoUtils,n.logger,n.config.serializableCache,n.config.persistencePlugin);return s.validateTokenResponse(o.body),H(s.handleServerTokenResponse.bind(s),"handleServerTokenResponse",n.logger,n.performanceClient,e.correlationId)(o.body,n.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var n=this;return E(function*(){if(!e)throw dt(Mh);if(n.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireTokenByRefreshToken",e.correlationId),!e.account)throw P(nu);if(n.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield H(n.acquireTokenWithCachedRefreshToken.bind(n),"refreshTokenClientAcquireTokenWithCachedRefreshToken",n.logger,n.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof hr&&o.errorCode===qa||o instanceof mi&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return H(n.acquireTokenWithCachedRefreshToken.bind(n),"refreshTokenClientAcquireTokenWithCachedRefreshToken",n.logger,n.performanceClient,e.correlationId)(e,!1);throw o}return H(n.acquireTokenWithCachedRefreshToken.bind(n),"refreshTokenClientAcquireTokenWithCachedRefreshToken",n.logger,n.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,n){var r=this;return E(function*(){r.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireTokenWithCachedRefreshToken",e.correlationId);const o=_s(r.cacheManager.getRefreshToken.bind(r.cacheManager),"cacheManagerGetRefreshToken",r.logger,r.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,r.performanceClient);if(!o)throw tE(qa);if(o.expiresOn&&UC(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw tE(eE);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||st.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield H(r.acquireToken.bind(r),"refreshTokenClientAcquireToken",r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof hr&&s.subError===$a){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=Ba(o);r.cacheManager.removeRefreshToken(a,e.correlationId)}throw s}})()}executeTokenRequest(e,n){var r=this;return E(function*(){r.performanceClient?.addQueueMeasurement("refreshTokenClientExecuteTokenRequest",e.correlationId);const o=r.createTokenQueryParameters(e),i=Ve.appendQueryString(n.tokenEndpoint,o),s=yield H(r.createTokenRequestBody.bind(r),"refreshTokenClientCreateTokenRequestBody",r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c={clientId:e.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return H(r.executePostToTokenEndpoint.bind(r),"refreshTokenClientExecutePostToTokenEndpoint",r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,"refreshTokenClientExecutePostToTokenEndpoint")})()}createTokenRequestBody(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("refreshTokenClientCreateTokenRequestBody",e.correlationId);const o=new _u(e.correlationId,n.performanceClient);if(o.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[ys]||n.config.authOptions.clientId),e.redirectUri&&o.addRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,n.config.authOptions.authority.options.OIDCOptions?.defaultScopes),o.addGrantType("refresh_token"),o.addClientInfo(),o.addLibraryInfo(n.config.libraryInfo),o.addApplicationTelemetry(n.config.telemetry.application),o.addThrottling(),n.serverTelemetryManager&&!WC(n.config)&&o.addServerTelemetry(n.serverTelemetryManager),o.addRefreshToken(e.refreshToken),n.config.clientCredentials.clientSecret&&o.addClientSecret(n.config.clientCredentials.clientSecret),n.config.clientCredentials.clientAssertion){const i=n.config.clientCredentials.clientAssertion;o.addClientAssertion(yield NO(i.assertion,n.config.authOptions.clientId,e.resourceRequestUri)),o.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===st.POP){const i=new za(n.cryptoUtils,n.performanceClient);let s;s=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield H(i.generateCnf.bind(i),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,o.addPopToken(s)}else if(e.authenticationScheme===st.SSH){if(!e.sshJwk)throw dt(Na);o.addSshJwk(e.sshJwk)}if((!fr.isEmptyObj(e.claims)||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,n.config.authOptions.clientCapabilities),n.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{const i=Ua(e.ccsCredential.credential);o.addCcsOid(i)}catch(i){n.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":o.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&o.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),o.createQueryString()})()}}class M6 extends sE{constructor(e,n){super(e,n)}acquireToken(e){var n=this;return E(function*(){try{const[r,o]=yield n.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Ra]});return"4"===o&&(n.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new pE(n.config,n.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof tg&&r.errorCode===Ar)return new pE(n.config,n.performanceClient).acquireTokenByRefreshToken(e);throw r}})()}acquireCachedToken(e){var n=this;return E(function*(){n.performanceClient?.addQueueMeasurement("silentFlowClientAcquireCachedToken",e.correlationId);let r="0";if(e.forceRefresh||!n.config.cacheOptions.claimsBasedCachingEnabled&&!fr.isEmptyObj(e.claims))throw n.setCacheOutcome("1",e.correlationId),P(Ar);if(!e.account)throw P(nu);const o=e.account.tenantId||function a4(t){const r=new Ve(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case"common":case"organizations":case"consumers":return;default:return r}}(e.authority),i=n.cacheManager.getTokenKeys(),s=n.cacheManager.getAccessToken(e.account,e,i,o,n.performanceClient);if(!s)throw n.setCacheOutcome("2",e.correlationId),P(Ar);if(function CQ(t){return Number(t)>Wr()}(s.cachedAt)||UC(s.expiresOn,n.config.systemOptions.tokenRenewalOffsetSeconds))throw n.setCacheOutcome("3",e.correlationId),P(Ar);s.refreshOn&&UC(s.refreshOn,0)&&(r="4");const a=e.authority||n.authority.getPreferredCache(),c={account:n.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:s,idToken:n.cacheManager.getIdToken(e.account,e.correlationId,i,o,n.performanceClient),refreshToken:null,appMetadata:n.cacheManager.readAppMetadataFromCache(a)};return n.setCacheOutcome(r,e.correlationId),n.config.serverTelemetryManager&&n.config.serverTelemetryManager.incrementCacheHits(),[yield H(n.generateResultFromCacheRecord.bind(n),"silentFlowClientGenerateResultFromCacheRecord",n.logger,n.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,n){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},n),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,n){var r=this;return E(function*(){let o;if(r.performanceClient?.addQueueMeasurement("silentFlowClientGenerateResultFromCacheRecord",n.correlationId),e.idToken&&(o=ms(e.idToken.secret,r.config.cryptoInterface.base64Decode)),n.maxAge||0===n.maxAge){const i=o?.auth_time;if(!i)throw P(eu);XN(i,n.maxAge)}return vs.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,n,o)})()}}class BO extends Ka{acquireToken(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("silentCacheClientAcquireToken",e.correlationId);const r=n.initializeServerTelemetryManager(61),o=yield H(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new M6(o,n.performanceClient);n.logger.verbose("Silent auth client created");try{const a=(yield H(i.acquireCachedToken.bind(i),"silentFlowClientAcquireCachedToken",n.logger,n.performanceClient,e.correlationId)(e))[0];return n.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof pu&&s.errorCode===hu&&n.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n?.account)}}class Qa extends LO{constructor(e,n,r,o,i,s,a,c,l,u,d,f){super(e,n,r,o,i,s,c,l,f),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new BO(e,this.nativeStorageManager,r,o,i,s,c,l,f),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const h="ppnbnpeolgkicgegkbkbjmhlideopiji"===this.nativeMessageHandler.getExtensionId()?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=yu.makeExtraSkuString({libraryName:"msal.js.browser",libraryVersion:Va,extensionName:h,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[c6]:this.skus}}acquireToken(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("nativeInteractionClientAcquireToken",e.correlationId),n.logger.trace("NativeInteractionClient - acquireToken called.");const r=n.performanceClient.startMeasurement("nativeInteractionClientAcquireToken",e.correlationId),o=Wr();try{const i=yield n.initializeNativeRequest(e);try{const u=yield n.acquireTokensFromCache(n.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{n.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...s}=i,a={method:"GetToken",request:s},c=yield n.nativeMessageHandler.sendMessage(a),l=n.validateNativeResponse(c);return yield n.handleNativeResponse(l,i,o).then(u=>(r.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),n.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw r.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(i){throw i instanceof Yr&&n.serverTelemetryManager.setNativeBrokerErrorCode(i.errorCode),i}})()}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Pt.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}acquireTokensFromCache(e,n){var r=this;return E(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),P(ou);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e},n.correlationId);if(!o)throw P(ou);try{const i=r.createSilentCacheRequest(n,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,n){var r=this;return E(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o),s={method:"GetToken",request:i};try{const l=yield r.nativeMessageHandler.sendMessage(s);r.validateNativeResponse(l)}catch(l){if(l instanceof Yr&&(r.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),Wa(l)))throw l}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const a={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},c=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);n.end({success:!0}),yield r.navigationClient.navigateExternal(c,a)})()}handleRedirectPromise(e,n){var r=this;return E(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&e?.addFields({errorCode:"no_cached_request"},n),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a={method:"GetToken",request:s},c=Wr();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const l=yield r.nativeMessageHandler.sendMessage(a);r.validateNativeResponse(l);const u=r.handleNativeResponse(l,s,c);r.browserStorage.setInteractionInProgress(!1);const d=yield u;return r.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(l){throw r.browserStorage.setInteractionInProgress(!1),l}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,n,r){var o=this;return E(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=ms(e.id_token,Qr),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},o.correlationId)?.homeAccountId;if(s!==a&&e.account.id!==n.accountId)throw gE(FO);const c=yield o.getDiscoveredAuthority({requestAuthority:n.authority}),l=aE(o.browserStorage,c,s,Qr,o.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger),u=yield o.generateAuthenticationResult(e,n,i,l,c.canonicalAuthority,r);return o.cacheAccount(l),o.cacheNativeTokens(e,n,s,i,e.access_token,u.tenantId,r),u})()}createHomeAccountIdentifier(e,n){return Ut.generateHomeAccountId(e.client_info||A.EMPTY_STRING,0,this.logger,this.browserCrypto,n)}generateScopes(e,n){return Pt.fromString(e.scope?e.scope:n.scope)}generatePopAccessToken(e,n){var r=this;return E(function*(){if(n.tokenType===st.POP&&n.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new za(r.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw P(au);return o.signPopToken(e.access_token,n.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,n,r,o,i,s){var a=this;return E(function*(){const c=a.addTelemetryFromNativeResponse(e),l=Pt.fromString(e.scope?e.scope:n.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||A.EMPTY_STRING,f=u.TenantId||r.tid||A.EMPTY_STRING,h=qC(o.getAccountInfo(),void 0,r,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const g=yield a.generatePopAccessToken(e,n),m=n.tokenType===st.POP?st.POP:st.BEARER;return{authority:i,uniqueId:d,tenantId:f,scopes:l.asArray(),account:h,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:new Date(1e3*Number(s+e.expires_in)),tokenType:m,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e){this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,this.correlationId).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,r,o,i,s,a){const c=Pg(r,n.authority,e.id_token||"",n.clientId,o.tid||""),u=a+(n.tokenType===st.POP?A.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e,n),f=xg(r,n.authority,i,n.clientId,o.tid||s,d.printScopes(),u,0,Qr,void 0,n.tokenType,void 0,n.keyId);this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:f},n.correlationId,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw PN(zl,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var n=this;return E(function*(){n.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=e.authority||n.config.auth.authority;e.account&&(yield n.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));const o=new Ve(r);o.validateAsUri();const{scopes:i,...s}=e,a=new Pt(i||[]);a.appendScopes(Ra);const l={...s,accountId:n.accountId,clientId:n.config.auth.clientId,authority:o.urlString,scope:a.printScopes(),redirectUri:n.getRedirectUri(e.redirectUri),prompt:(()=>{switch(n.apiId){case 863:case 61:return n.logger.trace("initializeNativeRequest: silent request sets prompt to none"),zt.NONE}if(e.prompt)switch(e.prompt){case zt.NONE:case zt.CONSENT:case zt.LOGIN:return n.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw n.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Q(bg)}else n.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:n.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(l.signPopToken&&e.popKid)throw Q(Rg);if(n.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry="MATS",e.authenticationScheme===st.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new za(n.browserCrypto);let f;if(l.keyId)f=n.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{const h=yield H(d.generateCnf.bind(d),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(u,n.logger);f=h.reqCnfString,l.keyId=h.kid,l.signPopToken=!0}l.reqCnf=f}return n.addRequestSKUs(l),l})()}handleExtraBrokerParams(e){const n=e.extraParameters&&e.extraParameters.hasOwnProperty(rE)&&e.extraParameters.hasOwnProperty(oE)&&e.extraParameters.hasOwnProperty(ys);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[oE],r=e.extraParameters[ys]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}class Zr{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement("nativeMessageHandlerHandshake")}sendMessage(e){var n=this;return E(function*(){n.logger.trace("NativeMessageHandler - sendMessage called.");const r={channel:ka_CHANNEL_ID,extensionId:n.extensionId,responseId:Kr(),body:e};return n.logger.trace("NativeMessageHandler - Sending request to browser extension"),n.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(r)}`),n.messageChannel.port1.postMessage(r),new Promise((o,i)=>{n.resolvers.set(r.responseId,{resolve:o,reject:i})})})()}static createProvider(e,n,r){return E(function*(){e.trace("NativeMessageHandler - createProvider called.");try{const o=new Zr(e,n,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new Zr(e,n,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return E(function*(){e.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const n={channel:ka_CHANNEL_ID,extensionId:e.extensionId,responseId:Kr(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(n,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(n.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(Q(wg)),e.handshakeResolvers.delete(n.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(n.channel&&n.channel===ka_CHANNEL_ID&&(!n.extensionId||n.extensionId===this.extensionId)&&"Handshake"===n.body.method){const r=this.handshakeResolvers.get(n.responseId);if(!r)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Q(Sg))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if("Response"===i){if(!r)return;const s=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject(gE(s.code,s.description,s.ext));else{if(!s.result)throw PN(zl,"Event does not contain result.");s.result.code&&s.result.description?r.reject(gE(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(n.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,r,o){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case st.BEARER:case st.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class mE{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,n){var r=this;return E(function*(){let o;r.performanceClient.addQueueMeasurement("handleCodeResponse",n.correlationId);try{o=r.authModule.handleFragmentResponse(e,n.state)}catch(i){throw i instanceof mi&&i.subError===Do?Q(Do):i}return H(r.handleCodeResponseFromServer.bind(r),"handleCodeResponseFromServer",r.logger,r.performanceClient,n.correlationId)(o,n)})()}handleCodeResponseFromServer(e,n){var r=this;return E(function*(o,i,s=!0){if(r.performanceClient.addQueueMeasurement("handleCodeResponseFromServer",i.correlationId),r.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),r.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield H(r.authModule.updateAuthority.bind(r.authModule),"updateTokenEndpointAuthority",r.logger,r.performanceClient,i.correlationId)(o.cloud_instance_host_name,i.correlationId)),s&&(o.nonce=i.nonce||void 0),o.state=i.state,o.client_info)r.authCodeRequest.clientInfo=o.client_info;else{const c=r.createCcsCredentials(i);c&&(r.authCodeRequest.ccsCredential=c)}return yield H(r.authModule.acquireToken.bind(r.authModule),"authClientAcquireToken",r.logger,r.performanceClient,i.correlationId)(r.authCodeRequest,o)}).apply(this,arguments)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}function UO(t,e,n){const r=ng(t);if(!r)throw xN(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),Q(og)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Q(rg));return r}class N6 extends Ka{constructor(e,n,r,o,i,s,a,c,l,u){super(e,n,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||Ra,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}acquireTokenPopupAsync(e,n){var r=this;return E(function*(){r.logger.verbose("acquireTokenPopupAsync called");const o=r.initializeServerTelemetryManager(862),i=yield H(r.initializeAuthorizationRequest.bind(r),"standardInteractionClientInitializeAuthorizationRequest",r.logger,r.performanceClient,r.correlationId)(e,K.Popup);KN(i.authority);try{const s=yield H(r.initializeAuthorizationCodeRequest.bind(r),"standardInteractionClientInitializeAuthorizationCodeRequest",r.logger,r.performanceClient,r.correlationId)(i),a=yield H(r.createAuthCodeClient.bind(r),"standardInteractionClientCreateAuthCodeClient",r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),c=Zr.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,e.authenticationScheme);let l;c&&(l=r.performanceClient.startMeasurement("fetchAccountIdWithNativeBroker",e.correlationId));const u=yield a.getAuthCodeUrl({...i,nativeBroker:c}),d=new mE(a,r.browserStorage,s,r.logger,r.performanceClient),f=r.initiateAuthRequest(u,n);r.eventHandler.emitEvent("msal:popupOpened",K.Popup,{popupWindow:f},null);const h=yield r.monitorPopupForHash(f,n.popupWindowParent),g=_s(UO,"deserializeResponse",r.logger,r.performanceClient,r.correlationId)(h,r.config.auth.OIDCOptions.serverResponseType,r.logger);if(Jr.removeThrottle(r.browserStorage,r.config.auth.clientId,s),g.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.end({success:!0,isNativeBroker:!0}),!r.nativeMessageHandler)throw Q(gs);const T=new Qa(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,g.accountId,r.nativeStorage,i.correlationId),{userRequestState:b}=Mr.parseRequestState(r.browserCrypto,i.state);return yield T.acquireToken({...i,state:b,prompt:void 0})}return yield d.handleCodeResponse(g,i)}catch(s){throw n.popup?.close(),s instanceof _t&&(s.setCorrelationId(r.correlationId),o.cacheFailedRequest(s)),s}})()}logoutPopupAsync(e,n,r,o){var i=this;return E(function*(){i.logger.verbose("logoutPopupAsync called"),i.eventHandler.emitEvent("msal:logoutStart",K.Popup,e);const s=i.initializeServerTelemetryManager(962);try{yield i.clearCacheOnLogout(e.account);const c=(yield H(i.createAuthCodeClient.bind(i),"standardInteractionClientCreateAuthCodeClient",i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0})).getLogoutUri(e);i.eventHandler.emitEvent("msal:logoutSuccess",K.Popup,e);const l=i.openPopup(c,n);if(i.eventHandler.emitEvent("msal:popupOpened",K.Popup,{popupWindow:l},null),yield i.monitorPopupForHash(l,n.popupWindowParent).catch(()=>{}),o){const u={apiId:962,timeout:i.config.system.redirectNavigationTimeout,noHistory:!1},d=Ve.getAbsoluteUrl(o,Ao());i.logger.verbose("Redirecting main window to url specified in the request"),i.logger.verbosePii(`Redirecting main window to: ${d}`),yield i.navigationClient.navigateInternal(d,u)}else i.logger.verbose("No main window navigation requested")}catch(a){throw n.popup?.close(),a instanceof _t&&(a.setCorrelationId(i.correlationId),s.cacheFailedRequest(a)),i.browserStorage.setInteractionInProgress(!1),i.eventHandler.emitEvent("msal:logoutFailure",K.Popup,null,a),i.eventHandler.emitEvent("msal:logoutEnd",K.Popup),a}i.eventHandler.emitEvent("msal:logoutEnd",K.Popup)})()}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),Q(Pa)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void o(Q(Do));let s="";try{s=e.location.href}catch{}if(!s||"about:blank"===s)return;clearInterval(i);let a="";e&&(a=this.config.auth.OIDCOptions.serverResponseType===ql.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw Q(lg);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),Q(cg)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,f=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=483),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=600),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-300+s)),(!f||f<0||f>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,a/2-241.5+i)),o.open(e,n,`width=${l}, height=${u}, top=${d}, left=${f}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(K.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`msal.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){return`msal.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class HO{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,n){var r=this;return E(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(r.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),r.browserStorage.setTemporaryCache("request.origin",n.redirectStartPage,!0)),r.browserStorage.setTemporaryCache("request.correlationId",r.authCodeRequest.correlationId,!0),r.browserStorage.cacheCodeRequest(r.authCodeRequest),r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:n.redirectTimeout,noHistory:!1};return"function"==typeof n.onRedirectNavigate?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==n.onRedirectNavigate(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield n.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield n.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Q(Pa)})()}handleCodeResponse(e,n){var r=this;return E(function*(){r.logger.verbose("RedirectHandler.handleCodeResponse called"),r.browserStorage.setInteractionInProgress(!1);const o=r.browserStorage.generateStateKey(n),i=r.browserStorage.getTemporaryCache(o);if(!i)throw P(Oa,"Cached State");let s;try{s=r.authModule.handleFragmentResponse(e,i)}catch(u){throw u instanceof mi&&u.subError===Do?Q(Do):u}const a=r.browserStorage.generateNonceKey(i),c=r.browserStorage.getTemporaryCache(a);if(r.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield H(r.authModule.updateAuthority.bind(r.authModule),"updateTokenEndpointAuthority",r.logger,r.performanceClient,r.authCodeRequest.correlationId)(s.cloud_instance_host_name,r.authCodeRequest.correlationId)),s.nonce=c||void 0,s.state=i,s.client_info)r.authCodeRequest.clientInfo=s.client_info;else{const u=r.checkCcsCredentials();u&&(r.authCodeRequest.ccsCredential=u)}const l=yield r.authModule.acquireToken(r.authCodeRequest,s);return r.browserStorage.cleanRequestByState(n),l})()}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache("ccs.credential",!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class P6 extends Ka{constructor(e,n,r,o,i,s,a,c,l,u){super(e,n,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){var n=this;return E(function*(){const r=yield H(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,n.correlationId)(e,K.Redirect);n.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||"",r.account||null);const o=n.initializeServerTelemetryManager(861),i=s=>{s.persisted&&(n.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),n.browserStorage.cleanRequestByState(r.state),n.eventHandler.emitEvent("msal:restoreFromBFCache",K.Redirect))};try{const s=yield H(n.initializeAuthorizationCodeRequest.bind(n),"standardInteractionClientInitializeAuthorizationCodeRequest",n.logger,n.performanceClient,n.correlationId)(r),a=yield H(n.createAuthCodeClient.bind(n),"standardInteractionClientCreateAuthCodeClient",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),c=new HO(a,n.browserStorage,s,n.logger,n.performanceClient),l=yield a.getAuthCodeUrl({...r,nativeBroker:Zr.isNativeAvailable(n.config,n.logger,n.nativeMessageHandler,e.authenticationScheme)}),u=n.getRedirectStartPage(e.redirectStartPage);return n.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",i),yield c.initiateAuthRequest(l,{navigationClient:n.navigationClient,redirectTimeout:n.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||n.config.auth.onRedirectNavigate})}catch(s){throw s instanceof _t&&(s.setCorrelationId(n.correlationId),o.cacheFailedRequest(s)),window.removeEventListener("pageshow",i),n.browserStorage.cleanRequestByState(r.state),s}})()}handleRedirectPromise(){var e=this;return E(function*(n="",r){const o=e.initializeServerTelemetryManager(865);try{if(!e.browserStorage.isInteractionInProgress(!0))return e.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[i,s]=e.getRedirectResponse(n||"");if(!i)return e.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),e.browserStorage.cleanRequestByInteractionType(K.Redirect),"back_forward"!==function O6(){if(typeof window>"u"||typeof window.performance>"u"||"function"!=typeof window.performance.getEntriesByType)return;const t=window.performance.getEntriesByType("navigation");return(t.length?t[0]:void 0)?.type}()?r.event.errorCode="no_server_response":e.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=e.browserStorage.getTemporaryCache("request.origin",!0)||A.EMPTY_STRING;if(Ve.removeHashFromUrl(a)===Ve.removeHashFromUrl(window.location.href)&&e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function aQ(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(a),yield e.handleResponse(i,o);if(!e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield e.handleResponse(i,o);if(!Ng()||e.config.system.allowRedirectInIframe){e.browserStorage.setTemporaryCache("urlHash",s,!0);const u={apiId:865,timeout:e.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(a&&"null"!==a)e.logger.verbose(`Navigating to loginRequestUrl: ${a}`),d=yield e.navigationClient.navigateInternal(a,u);else{const f=function lQ(){const e=new Ve(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();e.browserStorage.setTemporaryCache("request.origin",f,!0),e.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=yield e.navigationClient.navigateInternal(f,u)}if(!d)return yield e.handleResponse(i,o)}return null}catch(i){throw i instanceof _t&&(i.setCorrelationId(e.correlationId),o.cacheFailedRequest(i)),e.browserStorage.cleanRequestByInteractionType(K.Redirect),i}}).apply(this,arguments)}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(n=this.config.auth.OIDCOptions.serverResponseType===ql.QUERY?window.location.search:window.location.hash);let r=ng(n);if(r){try{!function k6(t,e,n){if(!t.state)throw Q(uu);const r=SO(e,t.state);if(!r)throw Q(ig);if(r.interactionType!==n)throw Q(sg)}(r,this.browserCrypto,K.Redirect)}catch(i){return i instanceof _t&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return function sQ(t){t.location.hash="","function"==typeof t.history.replaceState&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=ng(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,n){var r=this;return E(function*(){const o=e.state;if(!o)throw Q(uu);const i=r.browserStorage.getCachedRequest(o);if(r.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw Q(gs);const l=new Qa(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,e.accountId,r.nativeStorage,i.correlationId),{userRequestState:u}=Mr.parseRequestState(r.browserCrypto,o);return l.acquireToken({...i,state:u,prompt:void 0}).finally(()=>{r.browserStorage.cleanRequestByState(o)})}const s=r.browserStorage.getCachedAuthority(o);if(!s)throw Q(du);const a=yield H(r.createAuthCodeClient.bind(r),"standardInteractionClientCreateAuthCodeClient",r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:n,requestAuthority:s});return Jr.removeThrottle(r.browserStorage,r.config.auth.clientId,i),new HO(a,r.browserStorage,i,r.logger,r.performanceClient).handleCodeResponse(e,o)})()}logout(e){var n=this;return E(function*(){n.logger.verbose("logoutRedirect called");const r=n.initializeLogoutRequest(e),o=n.initializeServerTelemetryManager(961);try{n.eventHandler.emitEvent("msal:logoutStart",K.Redirect,e),yield n.clearCacheOnLogout(r.account);const i={apiId:961,timeout:n.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield H(n.createAuthCodeClient.bind(n),"standardInteractionClientCreateAuthCodeClient",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0})).getLogoutUri(r);if(n.eventHandler.emitEvent("msal:logoutSuccess",K.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return n.browserStorage.getInteractionInProgress()||n.browserStorage.setInteractionInProgress(!0),void(yield n.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return n.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),n.browserStorage.getInteractionInProgress()||n.browserStorage.setInteractionInProgress(!0),void(yield n.navigationClient.navigateExternal(a,i));n.browserStorage.setInteractionInProgress(!1),n.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof _t&&(i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i)),n.eventHandler.emitEvent("msal:logoutFailure",K.Redirect,null,i),n.eventHandler.emitEvent("msal:logoutEnd",K.Redirect),i}n.eventHandler.emitEvent("msal:logoutEnd",K.Redirect)})()}getRedirectStartPage(e){const n=e||window.location.href;return Ve.getAbsoluteUrl(n,Ao())}}function x6(t,e,n,r,o){return _E.apply(this,arguments)}function _E(){return(_E=E(function*(t,e,n,r,o){if(e.addQueueMeasurement("silentHandlerInitiateAuthRequest",r),!t)throw n.info("Navigate url is empty"),Q(Pa);return o?H(F6,"silentHandlerLoadFrame",n,e,r)(t,o,e,r):_s(B6,"silentHandlerLoadFrameSync",n,e,r)(t)})).apply(this,arguments)}function L6(t,e,n,r,o,i,s){return yE.apply(this,arguments)}function yE(){return(yE=E(function*(t,e,n,r,o,i,s){return r.addQueueMeasurement("silentHandlerMonitorIframeForHash",i),new Promise((a,c)=>{e<1e4&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (10000ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(Q(ug))},e),u=window.setInterval(()=>{let d="";const f=t.contentWindow;try{d=f?f.location.href:""}catch{}if(!d||"about:blank"===d)return;let h="";f&&(h=s===ql.QUERY?f.location.search:f.location.hash),window.clearTimeout(l),window.clearInterval(u),a(h)},n)}).finally(()=>{_s(U6,"removeHiddenIframe",o,r,i)(t)})})).apply(this,arguments)}function F6(t,e,n,r){return n.addQueueMeasurement("silentHandlerLoadFrame",r),new Promise((o,i)=>{const s=jO();window.setTimeout(()=>{s?(s.src=t,o(s)):i("Unable to load iframe")},e)})}function B6(t){const e=jO();return e.src=t,e}function jO(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function U6(t){document.body===t.parentNode&&document.body.removeChild(t)}class H6 extends Ka{constructor(e,n,r,o,i,s,a,c,l,u,d){super(e,n,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("silentIframeClientAcquireToken",e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&n.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==zt.NONE&&r.prompt!==zt.NO_SESSION&&(n.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${zt.NONE}`),r.prompt=zt.NONE):r.prompt=zt.NONE;const o=yield H(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,e.correlationId)(r,K.Silent);KN(o.authority);const i=n.initializeServerTelemetryManager(n.apiId);let s;try{return s=yield H(n.createAuthCodeClient.bind(n),"standardInteractionClientCreateAuthCodeClient",n.logger,n.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),yield H(n.silentTokenHelper.bind(n),"silentIframeClientTokenHelper",n.logger,n.performanceClient,e.correlationId)(s,o)}catch(a){if(a instanceof _t&&(a.setCorrelationId(n.correlationId),i.cacheFailedRequest(a)),!(s&&a instanceof _t&&"invalid_grant"===a.errorCode))throw a;n.performanceClient.addFields({retryError:a.errorCode},n.correlationId);const c=yield H(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,e.correlationId)(r,K.Silent);return yield H(n.silentTokenHelper.bind(n),"silentIframeClientTokenHelper",n.logger,n.performanceClient,n.correlationId)(s,c)}})()}logout(){return Promise.reject(Q(xa))}silentTokenHelper(e,n){var r=this;return E(function*(){const o=n.correlationId;r.performanceClient.addQueueMeasurement("silentIframeClientTokenHelper",o);const i=yield H(r.initializeAuthorizationCodeRequest.bind(r),"standardInteractionClientInitializeAuthorizationCodeRequest",r.logger,r.performanceClient,o)(n),s=yield H(e.getAuthCodeUrl.bind(e),"getAuthCodeUrl",r.logger,r.performanceClient,o)({...n,nativeBroker:Zr.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,n.authenticationScheme)}),a=new mE(e,r.browserStorage,i,r.logger,r.performanceClient),c=yield H(x6,"silentHandlerInitiateAuthRequest",r.logger,r.performanceClient,o)(s,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait),l=r.config.auth.OIDCOptions.serverResponseType,u=yield H(L6,"silentHandlerMonitorIframeForHash",r.logger,r.performanceClient,o)(c,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,l),d=_s(UO,"deserializeResponse",r.logger,r.performanceClient,r.correlationId)(u,l,r.logger);if(d.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw Q(gs);const f=new Qa(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,r.apiId,r.performanceClient,r.nativeMessageHandler,d.accountId,r.browserStorage,o),{userRequestState:h}=Mr.parseRequestState(r.browserCrypto,n.state);return H(f.acquireToken.bind(f),"nativeInteractionClientAcquireToken",r.logger,r.performanceClient,o)({...n,state:h,prompt:n.prompt||zt.NONE})}return H(a.handleCodeResponse.bind(a),"handleCodeResponse",r.logger,r.performanceClient,o)(d,n)})()}}class j6 extends Ka{acquireToken(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("silentRefreshClientAcquireToken",e.correlationId);const r=yield H(dE,"initializeBaseRequest",n.logger,n.performanceClient,e.correlationId)(e,n.config,n.performanceClient,n.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=n.getRedirectUri(e.redirectUri));const i=n.initializeServerTelemetryManager(61),s=yield n.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return H(s.acquireTokenByRefreshToken.bind(s),"refreshTokenClientAcquireTokenByRefreshToken",n.logger,n.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(n.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(Q(xa))}createRefreshTokenClient(e){var n=this;return E(function*(){const r=yield H(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new pE(r,n.performanceClient)})()}}class V6{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw Q(La);const o=e.correlationId||Kr(),i=n.id_token?ms(n.id_token,Qr):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new cn(cn.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||Kr()):void 0,c=this.loadAccount(e,r.clientInfo||n.client_info||"",o,i,a),l=this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,o),u=this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,o),d=this.loadRefreshToken(n,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},i,a)}loadAccount(e,n,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=Ut.createFromAccountInfo(e.account);return this.storage.setAccount(l,r),l}if(!i||!n&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Q(vg);const s=Ut.generateHomeAccountId(n,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=aE(this.storage,i,s,Qr,r,o,n,i.hostnameAndPort,a,void 0,void 0,this.logger);return this.storage.setAccount(c,r),c}loadIdToken(e,n,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const s=Pg(n,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(s,i),s}loadAccessToken(e,n,r,o,i,s,a){if(!n.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!n.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(n.scope||e.scopes&&e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?Pt.fromString(n.scope):new Pt(e.scopes),l=s.expiresOn||n.expires_in+(new Date).getTime()/1e3,u=s.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+(new Date).getTime()/1e3,d=xg(r,o,n.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,Qr);return this.storage.setAccessTokenCredential(d,a),d}loadRefreshToken(e,n,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=eO(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,n,r,o){let c,i="",s=[],a=null;n?.accessToken&&(i=n.accessToken.secret,s=Pt.fromString(n.accessToken.target).asArray(),a=new Date(1e3*Number(n.accessToken.expiresOn)),c=new Date(1e3*Number(n.accessToken.extendedExpiresOn)));const l=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:s,account:l.getAccountInfo(),idToken:n.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:n.refreshToken?.familyId||"",tokenType:n?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class q6 extends OO{constructor(e){super(e),this.includeRedirectUri=!1}}class $6 extends Ka{constructor(e,n,r,o,i,s,a,c,l,u){super(e,n,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){var n=this;return E(function*(){if(!e.code)throw Q(Cg);const r=yield H(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,e.correlationId)(e,K.Silent),o=n.initializeServerTelemetryManager(n.apiId);try{const i={...r,code:e.code},s=yield H(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=new q6(s);n.logger.verbose("Auth code client created");const c=new mE(a,n.browserStorage,i,n.logger,n.performanceClient);return yield H(c.handleCodeResponseFromServer.bind(c),"handleCodeResponseFromServer",n.logger,n.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof _t&&(i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(Q(xa))}}function Xr(t){const e=t?.idTokenClaims;return e?.tfp||e?.acr?"B2C":e?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===e?.tid?"MSA":"AAD":void 0}function $g(t,e){try{OC(t)}catch(n){throw e.end({success:!1},n),n}}class Gg{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new t4(this.logger,this.performanceClient):Og,this.eventHandler=new D4(this.logger),this.browserStorage=this.isBrowserEnvironment?new nE(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function c4(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw dt(Yl)}return{canonicalAuthority:t.authority?IO(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth),this.performanceClient):(()=>new nE(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Og,this.logger))(),this.nativeInternalStorage=new nE(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new V6(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,n){return E(function*(){const r=new Gg(e);return yield r.initialize(n),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){var n=this;return E(function*(){if(n.logger.trace("initialize called"),n.initialized)return void n.logger.info("initialize has already been called, exiting early.");if(!n.isBrowserEnvironment)return n.logger.info("in non-browser environment, exiting early."),n.initialized=!0,void n.eventHandler.emitEvent("msal:initializeEnd");const r=e?.correlationId||n.getRequestCorrelationId(),o=n.config.system.allowNativeBroker,i=n.performanceClient.startMeasurement("initializeClientApplication",r);if(n.eventHandler.emitEvent("msal:initializeStart"),o)try{n.nativeExtensionProvider=yield Zr.createProvider(n.logger,n.config.system.nativeBrokerHandshakeTimeout,n.performanceClient)}catch(s){n.logger.verbose(s)}n.config.cache.claimsBasedCachingEnabled||(n.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield H(n.browserStorage.clearTokensAndKeysWithClaims.bind(n.browserStorage),"clearTokensAndKeysWithClaims",n.logger,n.performanceClient,r)(n.performanceClient,r)),n.initialized=!0,n.eventHandler.emitEvent("msal:initializeEnd"),i.end({allowNativeBroker:o,success:!0})})()}handleRedirectPromise(e){var n=this;return E(function*(){if(n.logger.verbose("handleRedirectPromise called"),GN(n.initialized),n.isBrowserEnvironment){const r=e||"";let o=n.redirectResponse.get(r);return typeof o>"u"?(o=n.handleRedirectPromiseInternal(e),n.redirectResponse.set(r,o),n.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):n.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return n.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var n=this;return E(function*(){const r=n.getAllAccounts(),o=n.browserStorage.getCachedNativeRequest(),i=o&&Zr.isNativeAvailable(n.config,n.logger,n.nativeExtensionProvider)&&n.nativeExtensionProvider&&!e,s=i?o?.correlationId:n.browserStorage.getTemporaryCache("request.correlationId",!0)||"",a=n.performanceClient.startMeasurement("acquireTokenRedirect",s);let c;if(n.eventHandler.emitEvent("msal:handleRedirectStart",K.Redirect),i&&n.nativeExtensionProvider){n.logger.trace("handleRedirectPromise - acquiring token from native platform");const l=new Qa(n.config,n.browserStorage,n.browserCrypto,n.logger,n.eventHandler,n.navigationClient,865,n.performanceClient,n.nativeExtensionProvider,o.accountId,n.nativeInternalStorage,o.correlationId);c=H(l.handleRedirectPromise.bind(l),"handleNativeRedirectPromise",n.logger,n.performanceClient,a.event.correlationId)(n.performanceClient,a.event.correlationId)}else{n.logger.trace("handleRedirectPromise - acquiring token from web flow");const l=n.createRedirectClient(s);c=H(l.handleRedirectPromise.bind(l),"handleRedirectPromise",n.logger,n.performanceClient,a.event.correlationId)(e,a)}return c.then(l=>(l?(r.length<n.getAllAccounts().length?(n.eventHandler.emitEvent("msal:loginSuccess",K.Redirect,l),n.logger.verbose("handleRedirectResponse returned result, login success")):(n.eventHandler.emitEvent("msal:acquireTokenSuccess",K.Redirect,l),n.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:Xr(l.account)})):a.event.errorCode?a.end({success:!1}):a.discard(),n.eventHandler.emitEvent("msal:handleRedirectEnd",K.Redirect),l)).catch(l=>{const u=l;throw n.eventHandler.emitEvent(r.length>0?"msal:acquireTokenFailure":"msal:loginFailure",K.Redirect,null,u),n.eventHandler.emitEvent("msal:handleRedirectEnd",K.Redirect),a.end({success:!1},u),l})})()}acquireTokenRedirect(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e);n.logger.verbose("acquireTokenRedirect called",r);const o=n.performanceClient.startMeasurement("acquireTokenPreRedirect",r);o.add({accountType:Xr(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return!1!==c?o.end({success:!0}):o.discard(),c};else{const a=n.config.auth.onRedirectNavigate;n.config.auth.onRedirectNavigate=c=>{const l="function"==typeof a?a(c):void 0;return!1!==l?o.end({success:!0}):o.discard(),l}}const s=n.getAllAccounts().length>0;try{let a;return zN(n.initialized,n.config),n.browserStorage.setInteractionInProgress(!0),n.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",K.Redirect,e),a=n.nativeExtensionProvider&&n.canUseNative(e)?new Qa(n.config,n.browserStorage,n.browserCrypto,n.logger,n.eventHandler,n.navigationClient,861,n.performanceClient,n.nativeExtensionProvider,n.getNativeAccountId(e),n.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(l=>{if(l instanceof Yr&&Wa(l))return n.nativeExtensionProvider=void 0,n.createRedirectClient(r).acquireToken(e);if(l instanceof hr)return n.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),n.createRedirectClient(r).acquireToken(e);throw n.browserStorage.setInteractionInProgress(!1),l}):n.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw o.end({success:!1},a),n.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",K.Redirect,null,a),a}})()}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement("acquireTokenPopup",n);r.add({scenarioId:e.scenarioId,accountType:Xr(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),$g(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();let i;return this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenStart":"msal:loginStart",K.Popup,e),i=this.canUseNative(e)?this.acquireTokenNative({...e,correlationId:n},862).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:Xr(s.account)}),s)).catch(s=>{if(s instanceof Yr&&Wa(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(s instanceof hr)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):this.createPopupClient(n).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",K.Popup,s):this.eventHandler.emitEvent("msal:acquireTokenSuccess",K.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Xr(s.account)}),s)).catch(s=>(this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",K.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return n.ssoSilentMeasurement=n.performanceClient.startMeasurement("ssoSilent",r),n.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Xr(e.account)}),$g(n.initialized,n.ssoSilentMeasurement),n.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement),n.logger.verbose("ssoSilent called",r),n.eventHandler.emitEvent("msal:ssoSilentStart",K.Silent,o),i=n.canUseNative(o)?n.acquireTokenNative(o,863).catch(s=>{if(s instanceof Yr&&Wa(s))return n.nativeExtensionProvider=void 0,n.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):n.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(n.eventHandler.emitEvent("msal:ssoSilentSuccess",K.Silent,s),n.ssoSilentMeasurement?.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Xr(s.account)}),s)).catch(s=>{throw n.eventHandler.emitEvent("msal:ssoSilentFailure",K.Silent,null,s),n.ssoSilentMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e);n.logger.trace("acquireTokenByCode called",r);const o=n.performanceClient.startMeasurement("acquireTokenByCode",r);$g(n.initialized,o),n.eventHandler.emitEvent("msal:acquireTokenByCodeStart",K.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Q(Ig);if(e.code){const i=e.code;let s=n.hybridAuthCodeResponses.get(i);return s?(n.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(n.logger.verbose("Initiating new acquireTokenByCode request",r),s=n.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(n.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",K.Silent,a),n.hybridAuthCodeResponses.delete(i),o.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Xr(a.account)}),a)).catch(a=>{throw n.hybridAuthCodeResponses.delete(i),n.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",K.Silent,null,a),o.end({success:!1},a),a}),n.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(n.canUseNative(e,e.nativeAccountId)){const i=yield n.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof Yr&&Wa(s)&&(n.nativeExtensionProvider=void 0),s});return o.end({accountType:Xr(i.account),success:!0}),i}throw Q(Tg)}throw Q(Eg)}catch(i){throw n.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",K.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var n=this;return E(function*(){return n.logger.trace("acquireTokenByCodeAsync called",e.correlationId),n.acquireTokenByCodeAsyncMeasurement=n.performanceClient.startMeasurement("acquireTokenByCodeAsync",e.correlationId),n.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement),yield n.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(n.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i)).catch(i=>{throw n.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,n){var r=this;return E(function*(){switch(r.performanceClient.addQueueMeasurement("acquireTokenFromCache",e.correlationId),n){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return H(o.acquireToken.bind(o),"silentCacheClientAcquireToken",r.logger,r.performanceClient,e.correlationId)(e);default:throw P(Ar)}})()}acquireTokenByRefreshToken(e,n){var r=this;return E(function*(){switch(r.performanceClient.addQueueMeasurement("acquireTokenByRefreshToken",e.correlationId),n){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return H(o.acquireToken.bind(o),"silentRefreshClientAcquireToken",r.logger,r.performanceClient,e.correlationId)(e);default:throw P(Ar)}})()}acquireTokenBySilentIframe(e){var n=this;return E(function*(){n.performanceClient.addQueueMeasurement("acquireTokenBySilentIframe",e.correlationId);const r=n.createSilentIframeClient(e.correlationId);return H(r.acquireToken.bind(r),"silentIframeClientAcquireToken",n.logger,n.performanceClient,e.correlationId)(e)})()}logout(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e);return n.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),n.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e);return zN(n.initialized,n.config),n.browserStorage.setInteractionInProgress(!0),n.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return OC(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}clearCache(e){var n=this;return E(function*(){if(!n.isBrowserEnvironment)return void n.logger.info("in non-browser environment, returning early.");const r=n.getRequestCorrelationId(e);return n.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){const n=this.getRequestCorrelationId();return function v4(t,e,n,r,o){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(r,o):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return function C4(t,e,n,r){if(e.trace("getAccount called"),0===Object.keys(t).length)return e.warning("getAccount: No accountFilter provided"),null;const o=n.getAccountInfoFilteredBy(t,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return function E4(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const o=n.getAccountInfoFilteredBy({username:t},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return function I4(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=n.getAccountInfoFilteredBy({homeAccountId:t},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return function T4(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=n.getAccountInfoFilteredBy({localAccountId:t},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();!function w4(t,e,n){e.setActiveAccount(t,n)}(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return function S4(t,e){return t.getActiveAccount(e)}(this.browserStorage,e)}hydrateCache(e,n){var r=this;return E(function*(){r.logger.verbose("hydrateCache called");const o=Ut.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return r.browserStorage.setAccount(o,e.correlationId),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,n)):r.browserStorage.hydrateCache(e,n)})()}acquireTokenNative(e,n,r){var o=this;return E(function*(){if(o.logger.trace("acquireTokenNative called"),!o.nativeExtensionProvider)throw Q(gs);return new Qa(o.config,o.browserStorage,o.browserCrypto,o.logger,o.eventHandler,o.navigationClient,n,o.performanceClient,o.nativeExtensionProvider,r||o.getNativeAccountId(e),o.nativeInternalStorage,e.correlationId).acquireToken(e)})()}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!Zr.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case zt.NONE:case zt.CONSENT:case zt.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!(!n&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new N6(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new P6(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new H6(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new BO(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new j6(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new $6(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return $N(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(Gt.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent("msal:activeAccountChanged");const n=e.newValue||e.oldValue;if(!n)return;const r=JSON.parse(n);if("object"!=typeof r||!Ut.isAccountEntity(r))return;const i=ja.toObject(new Ut,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent("msal:accountAdded",void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent("msal:accountRemoved",void 0,i))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Kr():A.EMPTY_STRING}loginRedirect(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e);return n.logger.verbose("loginRedirect called",r),n.acquireTokenRedirect({correlationId:r,...e||NN})})()}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||NN})}acquireTokenSilent(e){var n=this;return E(function*(){const r=n.getRequestCorrelationId(e),o=n.performanceClient.startMeasurement("acquireTokenSilent",r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),$g(n.initialized,o),n.logger.verbose("acquireTokenSilent called",r);const i=e.account||n.getActiveAccount();if(!i)throw Q(gg);o.add({accountType:Xr(i)});const a=JSON.stringify({clientId:n.config.auth.clientId,authority:e.authority||A.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:i.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions}),c=n.activeSilentTokenRequests.get(a);if(typeof c>"u"){n.logger.verbose("acquireTokenSilent called for the first time, storing active request",r);const l=H(n.acquireTokenSilentAsync.bind(n),"acquireTokenSilentAsync",n.logger,n.performanceClient,r)({...e,correlationId:r},i).then(u=>(n.activeSilentTokenRequests.delete(a),o.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw n.activeSilentTokenRequests.delete(a),o.end({success:!1},u),u});return n.activeSilentTokenRequests.set(a,l),{...yield l,state:e.state}}return n.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.discard(),{...yield c,state:e.state}})()}acquireTokenSilentAsync(e,n){var r=this;return E(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement("acquireTokenSilentAsync",e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",K.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield H(v6,"initializeSilentRequest",r.logger,r.performanceClient,e.correlationId)(e,n,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=E(function*(l){if(function G6(t,e){const o=!(t instanceof hr&&t.subError!==$a)&&("invalid_grant"===t.errorCode||t.errorCode===Ar)||t.errorCode===qa||t.errorCode===eE,i=z3.includes(e);return o&&i}(l,s)){if(r.activeIframeRequest){if(5!==s){const[d,f]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${f}`,i.correlationId);const h=r.performanceClient.startMeasurement("awaitConcurrentIframe",i.correlationId);h.add({awaitIframeCorrelationId:f});const g=yield d;if(h.end({success:g}),g)return r.logger.verbose(`Parallel iframe request with correlationId: ${f} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${f} failed. Interaction is required.`),l}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),H(r.acquireTokenBySilentIframe.bind(r),"acquireTokenBySilentIframe",r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(f=>{d=f}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),H(r.acquireTokenBySilentIframe.bind(r),"acquireTokenBySilentIframe",r.logger,r.performanceClient,i.correlationId)(i).then(f=>(d(!0),f)).catch(f=>{throw d(!1),f}).finally(()=>{r.activeIframeRequest=void 0})}}throw l});return function(l){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",K.Silent,c),e.correlationId&&r.performanceClient.addFields({fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",K.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,n){var r=this;return E(function*(){return Zr.isNativeAvailable(r.config,r.logger,r.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.acquireTokenNative(e,61).catch(function(){var o=E(function*(i){throw i instanceof Yr&&Wa(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.nativeExtensionProvider=void 0,P(Ar)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),H(r.acquireTokenFromCache.bind(r),"acquireTokenFromCache",r.logger,r.performanceClient,e.correlationId)(e,n).catch(o=>{if(1===n)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",K.Silent,e),H(r.acquireTokenByRefreshToken.bind(r),"acquireTokenByRefreshToken",r.logger,r.performanceClient,e.correlationId)(e,n)}))})()}}function vE(){return(vE=E(function*(t,e){const n=new _O(t);return yield n.initialize(),Gg.createController(n,e)})).apply(this,arguments)}class vu{static createPublicClientApplication(e){return E(function*(){const n=yield function z6(t,e){return vE.apply(this,arguments)}(e);return new vu(e,n)})()}constructor(e,n){this.controller=n||new Gg(new _O(e))}initialize(e){var n=this;return E(function*(){return n.controller.initialize(e)})()}acquireTokenPopup(e){var n=this;return E(function*(){return n.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,n){var r=this;return E(function*(){return r.controller.hydrateCache(e,n)})()}clearCache(e){return this.controller.clearCache(e)}}const Qn={production:!1,b2c:{tenant:"zipzappmetadatadev.onmicrosoft.com",clientId:"d35ebbe9-3406-4c0b-bad1-8d92c47341b1",signInSignUpPolicy:"B2C_1A_signup_signin",authorityDomain:"zipzappmetadatadev.b2clogin.com",apiScopes:["https://zipzappmetadatadev.onmicrosoft.com/contoso-transit-api/user.read"],redirectUri:"https://contoso-transit-dev-app-gjafhqgaa8bnfme8.australiaeast-01.azurewebsites.net",postLogoutRedirectUri:"https://contoso-transit-dev-app-gjafhqgaa8bnfme8.australiaeast-01.azurewebsites.net"},api:{baseUrl:"https://contoso-transit-api-dev-eba5fcfughcfg0c0.australiaeast-01.azurewebsites.net/api"}};let VO=(()=>{class t{msal;router;constructor(n,r){this.msal=n,this.router=r}canActivate(){return 0!==this.msal.instance.getAllAccounts().length||(this.msal.loginRedirect(),!1)}static \u0275fac=function(r){return new(r||t)(G(ps),G(Gr))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Q6(t,e){if(1&t){const n=uf();sr(0,"button",3),ga("click",function(){return Wu(n),Qu(cl().login())}),yo(1,"Login"),Vn()}}function J6(t,e){if(1&t){const n=uf();sr(0,"button",3),ga("click",function(){return Wu(n),Qu(cl().logout())}),yo(1,"Logout"),Vn()}}function Y6(t,e){if(1&t){const n=uf();sr(0,"h2"),yo(1,"Welcome"),Vn(),sr(2,"button",3),ga("click",function(){return Wu(n),Qu(cl().loadProfile())}),yo(3,"Reload Profile"),Vn()}}function Z6(t,e){if(1&t&&(sr(0,"div")(1,"h3"),yo(2,"Your Profile (from API)"),Vn(),sr(3,"pre"),yo(4),Vn()()),2&t){const n=cl();Oc(4),hy(n.profileJson)}}function X6(t,e){1&t&&(sr(0,"p"),yo(1,"Please sign in to view your profile."),Vn())}let zg=(()=>{class t{msal;http;msalBroadcast;profileJson=null;loadingProfile=!1;loadedOnce=!1;destroy$=new Re;constructor(n,r,o){this.msal=n,this.http=r,this.msalBroadcast=o}ngOnInit(){var n=this;return E(function*(){n.msal.instance.initialize&&(yield n.msal.instance.initialize()),n.isLoggedIn()&&n.loadProfileSafe(),n.msalBroadcast.msalSubject$.pipe($n(r=>"msal:loginSuccess"===r.eventType),Vr(1)).subscribe(()=>n.loadProfileSafe())})()}isLoggedIn(){return this.msal.instance.getAllAccounts().length>0}login(){this.msal.loginRedirect()}logout(){this.msal.logoutRedirect()}loadProfileSafe(){this.loadingProfile||this.loadedOnce||(this.loadingProfile=!0,this.loadProfile().finally(()=>{this.loadingProfile=!1,this.loadedOnce=!0}))}loadProfile(){var n=this;return E(function*(){try{const r=n.msal.instance.getAllAccounts()[0];if(!r)return console.warn("No account present, initiating redirect login"),void n.msal.loginRedirect({scopes:Qn.b2c.apiScopes});let o;try{o=yield n.msal.instance.acquireTokenSilent({scopes:Qn.b2c.apiScopes,account:r})}catch(s){if(s instanceof hr)return console.warn("Silent token acquisition failed (interaction required); redirecting."),void n.msal.loginRedirect({scopes:Qn.b2c.apiScopes});throw s}console.debug("Access token acquired exp:",o.expiresOn?.toISOString());const i=yield function W6(t,e){const n="object"==typeof e;return new Promise((r,o)=>{const i=new de({next:s=>{r(s),i.unsubscribe()},error:o,complete:()=>{n?r(e.defaultValue):o(new El)}});t.subscribe(i)})}(n.http.get(Qn.api.baseUrl+"/profile"));n.profileJson=JSON.stringify(i,null,2)}catch(r){n.profileJson||(n.profileJson="Failed to load profile: "+r.message),console.error("Profile load error",r)}})()}static \u0275fac=function(r){return new(r||t)(ue(ps),ue(hN),ue(mu))};static \u0275cmp=zd({type:t,selectors:[["app-root"]],decls:10,vars:3,consts:[[1,"toolbar"],[1,"spacer"],[1,"content"],[3,"click"]],template:function(r,o){1&r&&(sr(0,"nav",0)(1,"span"),yo(2,"Contoso Transit Identity Portal"),Vn(),lf(3,"span",1),sf(4,Q6,2,0,"button")(5,J6,2,0,"button"),Vn(),sr(6,"section",2),sf(7,Y6,4,0),sf(8,Z6,5,1,"div")(9,X6,2,0,"p"),Vn()),2&r&&(Oc(4),af(o.isLoggedIn()?5:4),Oc(3),af(o.isLoggedIn()?7:-1),Oc(),af(o.profileJson?8:9))},dependencies:[Zy],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;padding:.5rem 1rem;background:#004578;color:#fff;align-items:center}.spacer[_ngcontent-%COMP%]{flex:1}button[_ngcontent-%COMP%]{margin-left:.5rem}.content[_ngcontent-%COMP%]{padding:1rem;font-family:Arial,sans-serif}pre[_ngcontent-%COMP%]{background:#f5f5f5;padding:.75rem}"]})}return t})();const eJ=[{path:"",component:zg},{path:"profile",component:zg,canActivate:[LC,VO]}];function tJ(){const{tenant:t,clientId:e,signInSignUpPolicy:n,authorityDomain:r}=Qn.b2c;return new vu({auth:{clientId:e,authority:`https://${r}/${t}/${n}`,knownAuthorities:[r],redirectUri:Qn.b2c.redirectUri,postLogoutRedirectUri:Qn.b2c.postLogoutRedirectUri},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}})}function nJ(){return{interactionType:K.Redirect,authRequest:{scopes:Qn.b2c.apiScopes}}}function rJ(){return{interactionType:K.Redirect,protectedResourceMap:new Map([[Qn.api.baseUrl,Qn.b2c.apiScopes],[Qn.api.baseUrl+"/profile",Qn.b2c.apiScopes]])}}let oJ=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t,bootstrap:[zg,_Q]});static \u0275inj=Xn({providers:[LC,mu,VO,{provide:_N,useClass:mQ,multi:!0}],imports:[az,B3,r3.forRoot(eJ),yQ.forRoot(tJ(),nJ(),rJ()),zg]})}return t})();sz().bootstrapModule(oJ).catch(t=>console.error(t))},935:()=>{const Cn=globalThis;function ln(y){return(Cn.__Zone_symbol_prefix||"__zone_symbol__")+y}const eo=Object.getOwnPropertyDescriptor,Cs=Object.defineProperty,Jn=Object.getPrototypeOf,Kg=Object.create,Wg=Array.prototype.slice,Mo="addEventListener",_i="removeEventListener",Et=ln(Mo),to=ln(_i),Nn="true",On="false",yt=ln("");function ge(y,C){return Zone.current.wrap(y,C)}function yi(y,C,k,_,D){return Zone.current.scheduleMacroTask(y,C,k,_,D)}const qe=ln,Ya=typeof window<"u",Yn=Ya?window:void 0,gt=Ya&&Yn||globalThis;function no(y,C){for(let k=y.length-1;k>=0;k--)"function"==typeof y[k]&&(y[k]=ge(y[k],C+"_"+k));return y}function Za(y){return!y||!1!==y.writable&&!("function"==typeof y.get&&typeof y.set>"u")}const Tu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ro=!("nw"in gt)&&typeof gt.process<"u"&&"[object process]"===gt.process.toString(),Nr=!ro&&!Tu&&!(!Ya||!Yn.HTMLElement),ko=typeof gt.process<"u"&&"[object process]"===gt.process.toString()&&!Tu&&!(!Ya||!Yn.HTMLElement),oo={},Es=qe("enable_beforeunload"),Xa=function(y){if(!(y=y||gt.event))return;let C=oo[y.type];C||(C=oo[y.type]=qe("ON_PROPERTY"+y.type));const k=this||y.target||gt,_=k[C];let D;return Nr&&k===Yn&&"error"===y.type?(D=_&&_.call(this,y.message,y.filename,y.lineno,y.colno,y.error),!0===D&&y.preventDefault()):(D=_&&_.apply(this,arguments),"beforeunload"===y.type&&gt[Es]&&"string"==typeof D?y.returnValue=D:null!=D&&!D&&y.preventDefault()),D};function vi(y,C,k){let _=eo(y,C);if(!_&&k&&eo(k,C)&&(_={enumerable:!0,configurable:!0}),!_||!_.configurable)return;const D=qe("on"+C+"patched");if(y.hasOwnProperty(D)&&y[D])return;delete _.writable,delete _.value;const F=_.get,ee=_.set,J=C.slice(2);let re=oo[J];re||(re=oo[J]=qe("ON_PROPERTY"+J)),_.set=function(_e){let Y=this;!Y&&y===gt&&(Y=gt),Y&&("function"==typeof Y[re]&&Y.removeEventListener(J,Xa),ee?.call(Y,null),Y[re]=_e,"function"==typeof _e&&Y.addEventListener(J,Xa,!1))},_.get=function(){let _e=this;if(!_e&&y===gt&&(_e=gt),!_e)return null;const Y=_e[re];if(Y)return Y;if(F){let de=F.call(this);if(de)return _.set.call(this,de),"function"==typeof _e.removeAttribute&&_e.removeAttribute(C),de}return null},Cs(y,C,_),y[D]=!0}function No(y,C,k){if(C)for(let _=0;_<C.length;_++)vi(y,"on"+C[_],k);else{const _=[];for(const D in y)"on"==D.slice(0,2)&&_.push(D);for(let D=0;D<_.length;D++)vi(y,_[D],k)}}const nn=qe("originalInstance");function Oo(y){const C=gt[y];if(!C)return;gt[qe(y)]=C,gt[y]=function(){const D=no(arguments,y);switch(D.length){case 0:this[nn]=new C;break;case 1:this[nn]=new C(D[0]);break;case 2:this[nn]=new C(D[0],D[1]);break;case 3:this[nn]=new C(D[0],D[1],D[2]);break;case 4:this[nn]=new C(D[0],D[1],D[2],D[3]);break;default:throw new Error("Arg list too long.")}},Or(gt[y],C);const k=new C(function(){});let _;for(_ in k)"XMLHttpRequest"===y&&"responseBlob"===_||function(D){"function"==typeof k[D]?gt[y].prototype[D]=function(){return this[nn][D].apply(this[nn],arguments)}:Cs(gt[y].prototype,D,{set:function(F){"function"==typeof F?(this[nn][D]=ge(F,y+"."+D),Or(this[nn][D],F)):this[nn][D]=F},get:function(){return this[nn][D]}})}(_);for(_ in C)"prototype"!==_&&C.hasOwnProperty(_)&&(gt[y][_]=C[_])}function Zn(y,C,k){let _=y;for(;_&&!_.hasOwnProperty(C);)_=Jn(_);!_&&y[C]&&(_=y);const D=qe(C);let F=null;if(_&&(!(F=_[D])||!_.hasOwnProperty(D))&&(F=_[D]=_[C],Za(_&&eo(_,C)))){const J=k(F,D,C);_[C]=function(){return J(this,arguments)},Or(_[C],F)}return F}function ec(y,C,k){let _=null;function D(F){const ee=F.data;return ee.args[ee.cbIdx]=function(){F.invoke.apply(this,arguments)},_.apply(ee.target,ee.args),F}_=Zn(y,C,F=>function(ee,J){const re=k(ee,J);return re.cbIdx>=0&&"function"==typeof J[re.cbIdx]?yi(re.name,J[re.cbIdx],re,D):F.apply(ee,J)})}function Or(y,C){y[qe("OriginalDelegate")]=C}let wu=!1,gr=!1;function Po(){if(wu)return gr;wu=!0;try{const y=Yn.navigator.userAgent;(-1!==y.indexOf("MSIE ")||-1!==y.indexOf("Trident/")||-1!==y.indexOf("Edge/"))&&(gr=!0)}catch{}return gr}function pr(y){return"function"==typeof y}function Su(y){return"number"==typeof y}const Jg={useG:!0},un={},tc={},Du=new RegExp("^"+yt+"(\\w+)(true|false)$"),Ci=qe("propagationStopped");function nc(y,C){const k=(C?C(y):y)+On,_=(C?C(y):y)+Nn,D=yt+k,F=yt+_;un[y]={},un[y][On]=D,un[y][Nn]=F}function wE(y,C,k,_){const D=_&&_.add||Mo,F=_&&_.rm||_i,ee=_&&_.listeners||"eventListeners",J=_&&_.rmAll||"removeAllListeners",re=qe(D),_e="."+D+":",Y="prependListener",de="."+Y+":",De=function(se,z,le){if(se.isRemoved)return;const $e=se.callback;let It;"object"==typeof $e&&$e.handleEvent&&(se.callback=ne=>$e.handleEvent(ne),se.originalDelegate=$e);try{se.invoke(se,z,[le])}catch(ne){It=ne}const tt=se.options;return tt&&"object"==typeof tt&&tt.once&&z[F].call(z,le.type,se.originalDelegate?se.originalDelegate:se.callback,tt),It};function ze(se,z,le){if(!(z=z||y.event))return;const $e=se||z.target||y,It=$e[un[z.type][le?Nn:On]];if(It){const tt=[];if(1===It.length){const ne=De(It[0],$e,z);ne&&tt.push(ne)}else{const ne=It.slice();for(let Re=0;Re<ne.length&&(!z||!0!==z[Ci]);Re++){const be=De(ne[Re],$e,z);be&&tt.push(be)}}if(1===tt.length)throw tt[0];for(let ne=0;ne<tt.length;ne++){const Re=tt[ne];C.nativeScheduleMicroTask(()=>{throw Re})}}}const et=function(se){return ze(this,se,!1)},Ht=function(se){return ze(this,se,!0)};function xt(se,z){if(!se)return!1;let le=!0;z&&void 0!==z.useG&&(le=z.useG);const $e=z&&z.vh;let It=!0;z&&void 0!==z.chkDup&&(It=z.chkDup);let tt=!1;z&&void 0!==z.rt&&(tt=z.rt);let ne=se;for(;ne&&!ne.hasOwnProperty(D);)ne=Jn(ne);if(!ne&&se[D]&&(ne=se),!ne||ne[re])return!1;const Re=z&&z.eventNameToString,be={},Z=ne[re]=ne[D],fe=ne[qe(F)]=ne[F],Ie=ne[qe(ee)]=ne[ee],R=ne[qe(J)]=ne[J];let vt;z&&z.prepend&&(vt=ne[qe(z.prepend)]=ne[z.prepend]);const Oe=le?function(w){if(!be.isExisting)return Z.call(be.target,be.eventName,be.capture?Ht:et,be.options)}:function(w){return Z.call(be.target,be.eventName,w.invoke,be.options)},Be=le?function(w){if(!w.isRemoved){const B=un[w.eventName];let ce;B&&(ce=B[w.capture?Nn:On]);const ae=ce&&w.target[ce];if(ae)for(let oe=0;oe<ae.length;oe++)if(ae[oe]===w){ae.splice(oe,1),w.isRemoved=!0,w.removeAbortListener&&(w.removeAbortListener(),w.removeAbortListener=null),0===ae.length&&(w.allRemoved=!0,w.target[ce]=null);break}}if(w.allRemoved)return fe.call(w.target,w.eventName,w.capture?Ht:et,w.options)}:function(w){return fe.call(w.target,w.eventName,w.invoke,w.options)},mr=z?.diff||function(w,B){const ce=typeof B;return"function"===ce&&w.callback===B||"object"===ce&&w.originalDelegate===B},Pn=Zone[qe("UNPATCHED_EVENTS")],ie=y[qe("PASSIVE_EVENTS")],O=function(w,B,ce,ae,oe=!1,Me=!1){return function(){const Pe=this||y;let xe=arguments[0];z&&z.transferEventName&&(xe=z.transferEventName(xe));let nt=arguments[1];if(!nt)return w.apply(this,arguments);if(ro&&"uncaughtException"===xe)return w.apply(this,arguments);let ct=!1;if("function"!=typeof nt){if(!nt.handleEvent)return w.apply(this,arguments);ct=!0}if($e&&!$e(w,nt,Pe,arguments))return;const Pr=!!ie&&-1!==ie.indexOf(xe),_r=function U(w){if("object"==typeof w&&null!==w){const B={...w};return w.signal&&(B.signal=w.signal),B}return w}(function pe(w,B){return B?"boolean"==typeof w?{capture:w,passive:!0}:w?"object"==typeof w&&!1!==w.passive?{...w,passive:!0}:w:{passive:!0}:w}(arguments[2],Pr)),Dt=_r?.signal;if(Dt?.aborted)return;if(Pn)for(let er=0;er<Pn.length;er++)if(xe===Pn[er])return Pr?w.call(Pe,xe,nt,_r):w.apply(this,arguments);const X=!!_r&&("boolean"==typeof _r||_r.capture),ep=!(!_r||"object"!=typeof _r)&&_r.once,SE=Zone.current;let ku=un[xe];ku||(nc(xe,Re),ku=un[xe]);const tp=ku[X?Nn:On];let oc,wi=Pe[tp],q=!1;if(wi){if(q=!0,It)for(let er=0;er<wi.length;er++)if(mr(wi[er],nt))return}else wi=Pe[tp]=[];const Xn=Pe.constructor.name,Si=tc[Xn];Si&&(oc=Si[xe]),oc||(oc=Xn+B+(Re?Re(xe):xe)),be.options=_r,ep&&(be.options.once=!1),be.target=Pe,be.capture=X,be.eventName=xe,be.isExisting=q;const Di=le?Jg:void 0;Di&&(Di.taskData=be),Dt&&(be.options.signal=void 0);const xn=SE.scheduleEventTask(oc,nt,Di,ce,ae);if(Dt){be.options.signal=Dt;const er=()=>xn.zone.cancelTask(xn);w.call(Dt,"abort",er,{once:!0}),xn.removeAbortListener=()=>Dt.removeEventListener("abort",er)}return be.target=null,Di&&(Di.taskData=null),ep&&(be.options.once=!0),"boolean"!=typeof xn.options&&(xn.options=_r),xn.target=Pe,xn.capture=X,xn.eventName=xe,ct&&(xn.originalDelegate=nt),Me?wi.unshift(xn):wi.push(xn),oe?Pe:void 0}};return ne[D]=O(Z,_e,Oe,Be,tt),vt&&(ne[Y]=O(vt,de,function(w){return vt.call(be.target,be.eventName,w.invoke,be.options)},Be,tt,!0)),ne[F]=function(){const w=this||y;let B=arguments[0];z&&z.transferEventName&&(B=z.transferEventName(B));const ce=arguments[2],ae=!!ce&&("boolean"==typeof ce||ce.capture),oe=arguments[1];if(!oe)return fe.apply(this,arguments);if($e&&!$e(fe,oe,w,arguments))return;const Me=un[B];let Pe;Me&&(Pe=Me[ae?Nn:On]);const xe=Pe&&w[Pe];if(xe)for(let nt=0;nt<xe.length;nt++){const ct=xe[nt];if(mr(ct,oe))return xe.splice(nt,1),ct.isRemoved=!0,0!==xe.length||(ct.allRemoved=!0,w[Pe]=null,ae||"string"!=typeof B)||(w[yt+"ON_PROPERTY"+B]=null),ct.zone.cancelTask(ct),tt?w:void 0}return fe.apply(this,arguments)},ne[ee]=function(){const w=this||y;let B=arguments[0];z&&z.transferEventName&&(B=z.transferEventName(B));const ce=[],ae=Yg(w,Re?Re(B):B);for(let oe=0;oe<ae.length;oe++){const Me=ae[oe];ce.push(Me.originalDelegate?Me.originalDelegate:Me.callback)}return ce},ne[J]=function(){const w=this||y;let B=arguments[0];if(B){z&&z.transferEventName&&(B=z.transferEventName(B));const ce=un[B];if(ce){const Me=w[ce[On]],Pe=w[ce[Nn]];if(Me){const xe=Me.slice();for(let nt=0;nt<xe.length;nt++){const ct=xe[nt];this[F].call(this,B,ct.originalDelegate?ct.originalDelegate:ct.callback,ct.options)}}if(Pe){const xe=Pe.slice();for(let nt=0;nt<xe.length;nt++){const ct=xe[nt];this[F].call(this,B,ct.originalDelegate?ct.originalDelegate:ct.callback,ct.options)}}}}else{const ce=Object.keys(w);for(let ae=0;ae<ce.length;ae++){const Me=Du.exec(ce[ae]);let Pe=Me&&Me[1];Pe&&"removeListener"!==Pe&&this[J].call(this,Pe)}this[J].call(this,"removeListener")}if(tt)return this},Or(ne[D],Z),Or(ne[F],fe),R&&Or(ne[J],R),Ie&&Or(ne[ee],Ie),!0}let Qe=[];for(let se=0;se<k.length;se++)Qe[se]=xt(k[se],_);return Qe}function Yg(y,C){if(!C){const F=[];for(let ee in y){const J=Du.exec(ee);let re=J&&J[1];if(re&&(!C||re===C)){const _e=y[ee];if(_e)for(let Y=0;Y<_e.length;Y++)F.push(_e[Y])}}return F}let k=un[C];k||(nc(C),k=un[C]);const _=y[k[On]],D=y[k[Nn]];return _?D?_.concat(D):_.slice():D?D.slice():[]}function Zg(y,C){const k=y.Event;k&&k.prototype&&C.patchMethod(k.prototype,"stopImmediatePropagation",_=>function(D,F){D[Ci]=!0,_&&_.apply(D,F)})}const xo=qe("zoneTask");function Ii(y,C,k,_){let D=null,F=null;k+=_;const ee={};function J(_e){const Y=_e.data;Y.args[0]=function(){return _e.invoke.apply(this,arguments)};const de=D.apply(y,Y.args);return Su(de)?Y.handleId=de:(Y.handle=de,Y.isRefreshable=pr(de.refresh)),_e}function re(_e){const{handle:Y,handleId:de}=_e.data;return F.call(y,Y??de)}D=Zn(y,C+=_,_e=>function(Y,de){if(pr(de[0])){const De={isRefreshable:!1,isPeriodic:"Interval"===_,delay:"Timeout"===_||"Interval"===_?de[1]||0:void 0,args:de},ze=de[0];de[0]=function(){try{return ze.apply(this,arguments)}finally{const{handle:le,handleId:$e,isPeriodic:It,isRefreshable:tt}=De;!It&&!tt&&($e?delete ee[$e]:le&&(le[xo]=null))}};const et=yi(C,de[0],De,J,re);if(!et)return et;const{handleId:Ht,handle:xt,isRefreshable:Qe,isPeriodic:se}=et.data;if(Ht)ee[Ht]=et;else if(xt&&(xt[xo]=et,Qe&&!se)){const z=xt.refresh;xt.refresh=function(){const{zone:le,state:$e}=et;return"notScheduled"===$e?(et._state="scheduled",le._updateTaskCount(et,1)):"running"===$e&&(et._state="scheduling"),z.call(this)}}return xt??Ht??et}return _e.apply(y,de)}),F=Zn(y,k,_e=>function(Y,de){const De=de[0];let ze;Su(De)?(ze=ee[De],delete ee[De]):(ze=De?.[xo],ze?De[xo]=null:ze=De),ze?.type?ze.cancelFn&&ze.zone.cancelTask(ze):_e.apply(y,de)})}function Is(y,C,k){if(!k||0===k.length)return C;const _=k.filter(F=>F.target===y);if(0===_.length)return C;const D=_[0].ignoreProperties;return C.filter(F=>-1===D.indexOf(F))}function Ts(y,C,k,_){y&&No(y,Is(y,C,k),_)}function Ti(y){return Object.getOwnPropertyNames(y).filter(C=>C.startsWith("on")&&C.length>2).map(C=>C.substring(2))}function io(y,C,k,_,D){const F=Zone.__symbol__(_);if(C[F])return;const ee=C[F]=C[_];C[_]=function(J,re,_e){return re&&re.prototype&&D.forEach(function(Y){const de=`${k}.${_}::`+Y,De=re.prototype;try{if(De.hasOwnProperty(Y)){const ze=y.ObjectGetOwnPropertyDescriptor(De,Y);ze&&ze.value?(ze.value=y.wrapWithCurrentZone(ze.value,de),y._redefineProperty(re.prototype,Y,ze)):De[Y]&&(De[Y]=y.wrapWithCurrentZone(De[Y],de))}else De[Y]&&(De[Y]=y.wrapWithCurrentZone(De[Y],de))}catch{}}),ee.call(C,J,re,_e)},y.attachOriginToPatched(C[_],ee)}const Ss=function Eu(){const y=globalThis,C=!0===y[ln("forceDuplicateZoneCheck")];if(y.Zone&&(C||"function"!=typeof y.Zone.__symbol__))throw new Error("Zone already loaded.");return y.Zone??=function Cu(){const y=Cn.performance;function C(pe){y&&y.mark&&y.mark(pe)}function k(pe,j){y&&y.measure&&y.measure(pe,j)}C("Zone");let _=(()=>{class pe{static __symbol__=ln;static assertZonePatched(){if(Cn.Promise!==be.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let v=pe.current;for(;v.parent;)v=v.parent;return v}static get current(){return fe.zone}static get currentTask(){return Ie}static __load_patch(v,I,V=!1){if(be.hasOwnProperty(v)){const ye=!0===Cn[ln("forceDuplicateZoneCheck")];if(!V&&ye)throw Error("Already loaded patch: "+v)}else if(!Cn["__Zone_disable_"+v]){const ye="Zone:"+v;C(ye),be[v]=I(Cn,pe,Z),k(ye,ye)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(v,I){this._parent=v,this._name=I?I.name||"unnamed":"<root>",this._properties=I&&I.properties||{},this._zoneDelegate=new F(this,this._parent&&this._parent._zoneDelegate,I)}get(v){const I=this.getZoneWith(v);if(I)return I._properties[v]}getZoneWith(v){let I=this;for(;I;){if(I._properties.hasOwnProperty(v))return I;I=I._parent}return null}fork(v){if(!v)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,v)}wrap(v,I){if("function"!=typeof v)throw new Error("Expecting function got: "+v);const V=this._zoneDelegate.intercept(this,v,I),ye=this;return function(){return ye.runGuarded(V,this,arguments,I)}}run(v,I,V,ye){fe={parent:fe,zone:this};try{return this._zoneDelegate.invoke(this,v,I,V,ye)}finally{fe=fe.parent}}runGuarded(v,I=null,V,ye){fe={parent:fe,zone:this};try{try{return this._zoneDelegate.invoke(this,v,I,V,ye)}catch(Oe){if(this._zoneDelegate.handleError(this,Oe))throw Oe}}finally{fe=fe.parent}}runTask(v,I,V){if(v.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(v.zone||xt).name+"; Execution: "+this.name+")");const ye=v,{type:Oe,data:{isPeriodic:Be=!1,isRefreshable:so=!1}={}}=v;if(v.state===Qe&&(Oe===Re||Oe===ne))return;const mr=v.state!=le;mr&&ye._transitionTo(le,z);const Pn=Ie;Ie=ye,fe={parent:fe,zone:this};try{Oe==ne&&v.data&&!Be&&!so&&(v.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,ye,I,V)}catch(ie){if(this._zoneDelegate.handleError(this,ie))throw ie}}finally{const ie=v.state;if(ie!==Qe&&ie!==It)if(Oe==Re||Be||so&&ie===se)mr&&ye._transitionTo(z,le,se);else{const U=ye._zoneDelegates;this._updateTaskCount(ye,-1),mr&&ye._transitionTo(Qe,le,Qe),so&&(ye._zoneDelegates=U)}fe=fe.parent,Ie=Pn}}scheduleTask(v){if(v.zone&&v.zone!==this){let V=this;for(;V;){if(V===v.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${v.zone.name}`);V=V.parent}}v._transitionTo(se,Qe);const I=[];v._zoneDelegates=I,v._zone=this;try{v=this._zoneDelegate.scheduleTask(this,v)}catch(V){throw v._transitionTo(It,se,Qe),this._zoneDelegate.handleError(this,V),V}return v._zoneDelegates===I&&this._updateTaskCount(v,1),v.state==se&&v._transitionTo(z,se),v}scheduleMicroTask(v,I,V,ye){return this.scheduleTask(new ee(tt,v,I,V,ye,void 0))}scheduleMacroTask(v,I,V,ye,Oe){return this.scheduleTask(new ee(ne,v,I,V,ye,Oe))}scheduleEventTask(v,I,V,ye,Oe){return this.scheduleTask(new ee(Re,v,I,V,ye,Oe))}cancelTask(v){if(v.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(v.zone||xt).name+"; Execution: "+this.name+")");if(v.state===z||v.state===le){v._transitionTo($e,z,le);try{this._zoneDelegate.cancelTask(this,v)}catch(I){throw v._transitionTo(It,$e),this._zoneDelegate.handleError(this,I),I}return this._updateTaskCount(v,-1),v._transitionTo(Qe,$e),v.runCount=-1,v}}_updateTaskCount(v,I){const V=v._zoneDelegates;-1==I&&(v._zoneDelegates=null);for(let ye=0;ye<V.length;ye++)V[ye]._updateTaskCount(v.type,I)}}return pe})();const D={name:"",onHasTask:(pe,j,v,I)=>pe.hasTask(v,I),onScheduleTask:(pe,j,v,I)=>pe.scheduleTask(v,I),onInvokeTask:(pe,j,v,I,V,ye)=>pe.invokeTask(v,I,V,ye),onCancelTask:(pe,j,v,I)=>pe.cancelTask(v,I)};class F{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(j,v,I){this._zone=j,this._parentDelegate=v,this._forkZS=I&&(I&&I.onFork?I:v._forkZS),this._forkDlgt=I&&(I.onFork?v:v._forkDlgt),this._forkCurrZone=I&&(I.onFork?this._zone:v._forkCurrZone),this._interceptZS=I&&(I.onIntercept?I:v._interceptZS),this._interceptDlgt=I&&(I.onIntercept?v:v._interceptDlgt),this._interceptCurrZone=I&&(I.onIntercept?this._zone:v._interceptCurrZone),this._invokeZS=I&&(I.onInvoke?I:v._invokeZS),this._invokeDlgt=I&&(I.onInvoke?v:v._invokeDlgt),this._invokeCurrZone=I&&(I.onInvoke?this._zone:v._invokeCurrZone),this._handleErrorZS=I&&(I.onHandleError?I:v._handleErrorZS),this._handleErrorDlgt=I&&(I.onHandleError?v:v._handleErrorDlgt),this._handleErrorCurrZone=I&&(I.onHandleError?this._zone:v._handleErrorCurrZone),this._scheduleTaskZS=I&&(I.onScheduleTask?I:v._scheduleTaskZS),this._scheduleTaskDlgt=I&&(I.onScheduleTask?v:v._scheduleTaskDlgt),this._scheduleTaskCurrZone=I&&(I.onScheduleTask?this._zone:v._scheduleTaskCurrZone),this._invokeTaskZS=I&&(I.onInvokeTask?I:v._invokeTaskZS),this._invokeTaskDlgt=I&&(I.onInvokeTask?v:v._invokeTaskDlgt),this._invokeTaskCurrZone=I&&(I.onInvokeTask?this._zone:v._invokeTaskCurrZone),this._cancelTaskZS=I&&(I.onCancelTask?I:v._cancelTaskZS),this._cancelTaskDlgt=I&&(I.onCancelTask?v:v._cancelTaskDlgt),this._cancelTaskCurrZone=I&&(I.onCancelTask?this._zone:v._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const V=I&&I.onHasTask;(V||v&&v._hasTaskZS)&&(this._hasTaskZS=V?I:D,this._hasTaskDlgt=v,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,I.onScheduleTask||(this._scheduleTaskZS=D,this._scheduleTaskDlgt=v,this._scheduleTaskCurrZone=this._zone),I.onInvokeTask||(this._invokeTaskZS=D,this._invokeTaskDlgt=v,this._invokeTaskCurrZone=this._zone),I.onCancelTask||(this._cancelTaskZS=D,this._cancelTaskDlgt=v,this._cancelTaskCurrZone=this._zone))}fork(j,v){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,j,v):new _(j,v)}intercept(j,v,I){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,j,v,I):v}invoke(j,v,I,V,ye){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,j,v,I,V,ye):v.apply(I,V)}handleError(j,v){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,j,v)}scheduleTask(j,v){let I=v;if(this._scheduleTaskZS)this._hasTaskZS&&I._zoneDelegates.push(this._hasTaskDlgtOwner),I=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,j,v),I||(I=v);else if(v.scheduleFn)v.scheduleFn(v);else{if(v.type!=tt)throw new Error("Task is missing scheduleFn.");et(v)}return I}invokeTask(j,v,I,V){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,j,v,I,V):v.callback.apply(I,V)}cancelTask(j,v){let I;if(this._cancelTaskZS)I=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,j,v);else{if(!v.cancelFn)throw Error("Task is not cancelable");I=v.cancelFn(v)}return I}hasTask(j,v){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,j,v)}catch(I){this.handleError(j,I)}}_updateTaskCount(j,v){const I=this._taskCounts,V=I[j],ye=I[j]=V+v;if(ye<0)throw new Error("More tasks executed then were scheduled.");0!=V&&0!=ye||this.hasTask(this._zone,{microTask:I.microTask>0,macroTask:I.macroTask>0,eventTask:I.eventTask>0,change:j})}}class ee{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(j,v,I,V,ye,Oe){if(this.type=j,this.source=v,this.data=V,this.scheduleFn=ye,this.cancelFn=Oe,!I)throw new Error("callback is not defined");this.callback=I;const Be=this;this.invoke=j===Re&&V&&V.useG?ee.invokeTask:function(){return ee.invokeTask.call(Cn,Be,this,arguments)}}static invokeTask(j,v,I){j||(j=this),R++;try{return j.runCount++,j.zone.runTask(j,v,I)}finally{1==R&&Ht(),R--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Qe,se)}_transitionTo(j,v,I){if(this._state!==v&&this._state!==I)throw new Error(`${this.type} '${this.source}': can not transition to '${j}', expecting state '${v}'${I?" or '"+I+"'":""}, was '${this._state}'.`);this._state=j,j==Qe&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const J=ln("setTimeout"),re=ln("Promise"),_e=ln("then");let De,Y=[],de=!1;function ze(pe){if(De||Cn[re]&&(De=Cn[re].resolve(0)),De){let j=De[_e];j||(j=De.then),j.call(De,pe)}else Cn[J](pe,0)}function et(pe){0===R&&0===Y.length&&ze(Ht),pe&&Y.push(pe)}function Ht(){if(!de){for(de=!0;Y.length;){const pe=Y;Y=[];for(let j=0;j<pe.length;j++){const v=pe[j];try{v.zone.runTask(v,null,null)}catch(I){Z.onUnhandledError(I)}}}Z.microtaskDrainDone(),de=!1}}const xt={name:"NO ZONE"},Qe="notScheduled",se="scheduling",z="scheduled",le="running",$e="canceling",It="unknown",tt="microTask",ne="macroTask",Re="eventTask",be={},Z={symbol:ln,currentZoneFrame:()=>fe,onUnhandledError:vt,microtaskDrainDone:vt,scheduleMicroTask:et,showUncaughtError:()=>!_[ln("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:vt,patchMethod:()=>vt,bindArguments:()=>[],patchThen:()=>vt,patchMacroTask:()=>vt,patchEventPrototype:()=>vt,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>vt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>vt,wrapWithCurrentZone:()=>vt,filterProperties:()=>[],attachOriginToPatched:()=>vt,_redefineProperty:()=>vt,patchCallbacks:()=>vt,nativeScheduleMicroTask:ze};let fe={parent:null,zone:new _(null,null)},Ie=null,R=0;function vt(){}return k("Zone","Zone"),_}(),y.Zone}();(function Mu(y){(function Au(y){y.__load_patch("ZoneAwarePromise",(C,k,_)=>{const D=Object.getOwnPropertyDescriptor,F=Object.defineProperty,J=_.symbol,re=[],_e=!1!==C[J("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],Y=J("Promise"),de=J("then");_.onUnhandledError=U=>{if(_.showUncaughtError()){const O=U&&U.rejection;O?console.error("Unhandled Promise rejection:",O instanceof Error?O.message:O,"; Zone:",U.zone.name,"; Task:",U.task&&U.task.source,"; Value:",O,O instanceof Error?O.stack:void 0):console.error(U)}},_.microtaskDrainDone=()=>{for(;re.length;){const U=re.shift();try{U.zone.runGuarded(()=>{throw U.throwOriginal?U.rejection:U})}catch(O){et(O)}}};const ze=J("unhandledPromiseRejectionHandler");function et(U){_.onUnhandledError(U);try{const O=k[ze];"function"==typeof O&&O.call(this,U)}catch{}}function Ht(U){return U&&"function"==typeof U.then}function xt(U){return U}function Qe(U){return Be.reject(U)}const se=J("state"),z=J("value"),le=J("finally"),$e=J("parentPromiseValue"),It=J("parentPromiseState"),ne=null,be=!1;function fe(U,O){return w=>{try{pe(U,O,w)}catch(B){pe(U,!1,B)}}}const Ie=function(){let U=!1;return function(w){return function(){U||(U=!0,w.apply(null,arguments))}}},R="Promise resolved with itself",vt=J("currentTaskTrace");function pe(U,O,w){const B=Ie();if(U===w)throw new TypeError(R);if(U[se]===ne){let ce=null;try{("object"==typeof w||"function"==typeof w)&&(ce=w&&w.then)}catch(ae){return B(()=>{pe(U,!1,ae)})(),U}if(O!==be&&w instanceof Be&&w.hasOwnProperty(se)&&w.hasOwnProperty(z)&&w[se]!==ne)v(w),pe(U,w[se],w[z]);else if(O!==be&&"function"==typeof ce)try{ce.call(w,B(fe(U,O)),B(fe(U,!1)))}catch(ae){B(()=>{pe(U,!1,ae)})()}else{U[se]=O;const ae=U[z];if(U[z]=w,U[le]===le&&!0===O&&(U[se]=U[It],U[z]=U[$e]),O===be&&w instanceof Error){const oe=k.currentTask&&k.currentTask.data&&k.currentTask.data.__creationTrace__;oe&&F(w,vt,{configurable:!0,enumerable:!1,writable:!0,value:oe})}for(let oe=0;oe<ae.length;)I(U,ae[oe++],ae[oe++],ae[oe++],ae[oe++]);if(0==ae.length&&O==be){U[se]=0;let oe=w;try{throw new Error("Uncaught (in promise): "+function ee(U){return U&&U.toString===Object.prototype.toString?(U.constructor&&U.constructor.name||"")+": "+JSON.stringify(U):U?U.toString():Object.prototype.toString.call(U)}(w)+(w&&w.stack?"\n"+w.stack:""))}catch(Me){oe=Me}_e&&(oe.throwOriginal=!0),oe.rejection=w,oe.promise=U,oe.zone=k.current,oe.task=k.currentTask,re.push(oe),_.scheduleMicroTask()}}}return U}const j=J("rejectionHandledHandler");function v(U){if(0===U[se]){try{const O=k[j];O&&"function"==typeof O&&O.call(this,{rejection:U[z],promise:U})}catch{}U[se]=be;for(let O=0;O<re.length;O++)U===re[O].promise&&re.splice(O,1)}}function I(U,O,w,B,ce){v(U);const ae=U[se],oe=ae?"function"==typeof B?B:xt:"function"==typeof ce?ce:Qe;O.scheduleMicroTask("Promise.then",()=>{try{const Me=U[z],Pe=!!w&&le===w[le];Pe&&(w[$e]=Me,w[It]=ae);const xe=O.run(oe,void 0,Pe&&oe!==Qe&&oe!==xt?[]:[Me]);pe(w,!0,xe)}catch(Me){pe(w,!1,Me)}},w)}const ye=function(){},Oe=C.AggregateError;class Be{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(O){return O instanceof Be?O:pe(new this(null),!0,O)}static reject(O){return pe(new this(null),be,O)}static withResolvers(){const O={};return O.promise=new Be((w,B)=>{O.resolve=w,O.reject=B}),O}static any(O){if(!O||"function"!=typeof O[Symbol.iterator])return Promise.reject(new Oe([],"All promises were rejected"));const w=[];let B=0;try{for(let oe of O)B++,w.push(Be.resolve(oe))}catch{return Promise.reject(new Oe([],"All promises were rejected"))}if(0===B)return Promise.reject(new Oe([],"All promises were rejected"));let ce=!1;const ae=[];return new Be((oe,Me)=>{for(let Pe=0;Pe<w.length;Pe++)w[Pe].then(xe=>{ce||(ce=!0,oe(xe))},xe=>{ae.push(xe),B--,0===B&&(ce=!0,Me(new Oe(ae,"All promises were rejected")))})})}static race(O){let w,B,ce=new this((Me,Pe)=>{w=Me,B=Pe});function ae(Me){w(Me)}function oe(Me){B(Me)}for(let Me of O)Ht(Me)||(Me=this.resolve(Me)),Me.then(ae,oe);return ce}static all(O){return Be.allWithCallback(O)}static allSettled(O){return(this&&this.prototype instanceof Be?this:Be).allWithCallback(O,{thenCallback:B=>({status:"fulfilled",value:B}),errorCallback:B=>({status:"rejected",reason:B})})}static allWithCallback(O,w){let B,ce,ae=new this((xe,nt)=>{B=xe,ce=nt}),oe=2,Me=0;const Pe=[];for(let xe of O){Ht(xe)||(xe=this.resolve(xe));const nt=Me;try{xe.then(ct=>{Pe[nt]=w?w.thenCallback(ct):ct,oe--,0===oe&&B(Pe)},ct=>{w?(Pe[nt]=w.errorCallback(ct),oe--,0===oe&&B(Pe)):ce(ct)})}catch(ct){ce(ct)}oe++,Me++}return oe-=2,0===oe&&B(Pe),ae}constructor(O){const w=this;if(!(w instanceof Be))throw new Error("Must be an instanceof Promise.");w[se]=ne,w[z]=[];try{const B=Ie();O&&O(B(fe(w,!0)),B(fe(w,be)))}catch(B){pe(w,!1,B)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return Be}then(O,w){let B=this.constructor?.[Symbol.species];(!B||"function"!=typeof B)&&(B=this.constructor||Be);const ce=new B(ye),ae=k.current;return this[se]==ne?this[z].push(ae,ce,O,w):I(this,ae,ce,O,w),ce}catch(O){return this.then(null,O)}finally(O){let w=this.constructor?.[Symbol.species];(!w||"function"!=typeof w)&&(w=Be);const B=new w(ye);B[le]=le;const ce=k.current;return this[se]==ne?this[z].push(ce,B,O,O):I(this,ce,B,O,O),B}}Be.resolve=Be.resolve,Be.reject=Be.reject,Be.race=Be.race,Be.all=Be.all;const so=C[Y]=C.Promise;C.Promise=Be;const mr=J("thenPatched");function Pn(U){const O=U.prototype,w=D(O,"then");if(w&&(!1===w.writable||!w.configurable))return;const B=O.then;O[de]=B,U.prototype.then=function(ce,ae){return new Be((Me,Pe)=>{B.call(this,Me,Pe)}).then(ce,ae)},U[mr]=!0}return _.patchThen=Pn,so&&(Pn(so),Zn(C,"fetch",U=>function ie(U){return function(O,w){let B=U.apply(O,w);if(B instanceof Be)return B;let ce=B.constructor;return ce[mr]||Pn(ce),B}}(U))),Promise[k.__symbol__("uncaughtPromiseErrors")]=re,Be})})(y),function Ru(y){y.__load_patch("toString",C=>{const k=Function.prototype.toString,_=qe("OriginalDelegate"),D=qe("Promise"),F=qe("Error"),ee=function(){if("function"==typeof this){const Y=this[_];if(Y)return"function"==typeof Y?k.call(Y):Object.prototype.toString.call(Y);if(this===Promise){const de=C[D];if(de)return k.call(de)}if(this===Error){const de=C[F];if(de)return k.call(de)}}return k.call(this)};ee[_]=k,Function.prototype.toString=ee;const J=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":J.call(this)}})}(y),function ws(y){y.__load_patch("util",(C,k,_)=>{const D=Ti(C);_.patchOnProperties=No,_.patchMethod=Zn,_.bindArguments=no,_.patchMacroTask=ec;const F=k.__symbol__("BLACK_LISTED_EVENTS"),ee=k.__symbol__("UNPATCHED_EVENTS");C[ee]&&(C[F]=C[ee]),C[F]&&(k[F]=k[ee]=C[F]),_.patchEventPrototype=Zg,_.patchEventTarget=wE,_.isIEOrEdge=Po,_.ObjectDefineProperty=Cs,_.ObjectGetOwnPropertyDescriptor=eo,_.ObjectCreate=Kg,_.ArraySlice=Wg,_.patchClass=Oo,_.wrapWithCurrentZone=ge,_.filterProperties=Is,_.attachOriginToPatched=Or,_._redefineProperty=Object.defineProperty,_.patchCallbacks=io,_.getGlobalObjects=()=>({globalSources:tc,zoneSymbolEventNames:un,eventNames:D,isBrowser:Nr,isMix:ko,isNode:ro,TRUE_STR:Nn,FALSE_STR:On,ZONE_SYMBOL_PREFIX:yt,ADD_EVENT_LISTENER_STR:Mo,REMOVE_EVENT_LISTENER_STR:_i})})}(y)})(Ss),function bu(y){y.__load_patch("legacy",C=>{const k=C[y.__symbol__("legacyPatch")];k&&k()}),y.__load_patch("timers",C=>{const k="set",_="clear";Ii(C,k,_,"Timeout"),Ii(C,k,_,"Interval"),Ii(C,k,_,"Immediate")}),y.__load_patch("requestAnimationFrame",C=>{Ii(C,"request","cancel","AnimationFrame"),Ii(C,"mozRequest","mozCancel","AnimationFrame"),Ii(C,"webkitRequest","webkitCancel","AnimationFrame")}),y.__load_patch("blocking",(C,k)=>{const _=["alert","prompt","confirm"];for(let D=0;D<_.length;D++)Zn(C,_[D],(ee,J,re)=>function(_e,Y){return k.current.run(ee,C,Y,re)})}),y.__load_patch("EventTarget",(C,k,_)=>{(function at(y,C){C.patchEventPrototype(y,C)})(C,_),function Xg(y,C){if(Zone[C.symbol("patchEventTarget")])return;const{eventNames:k,zoneSymbolEventNames:_,TRUE_STR:D,FALSE_STR:F,ZONE_SYMBOL_PREFIX:ee}=C.getGlobalObjects();for(let re=0;re<k.length;re++){const _e=k[re],De=ee+(_e+F),ze=ee+(_e+D);_[_e]={},_[_e][F]=De,_[_e][D]=ze}const J=y.EventTarget;J&&J.prototype&&C.patchEventTarget(y,C,[J&&J.prototype])}(C,_);const D=C.XMLHttpRequestEventTarget;D&&D.prototype&&_.patchEventTarget(C,_,[D.prototype])}),y.__load_patch("MutationObserver",(C,k,_)=>{Oo("MutationObserver"),Oo("WebKitMutationObserver")}),y.__load_patch("IntersectionObserver",(C,k,_)=>{Oo("IntersectionObserver")}),y.__load_patch("FileReader",(C,k,_)=>{Oo("FileReader")}),y.__load_patch("on_property",(C,k,_)=>{!function Wt(y,C){if(ro&&!ko||Zone[y.symbol("patchEvents")])return;const k=C.__Zone_ignore_on_properties;let _=[];if(Nr){const D=window;_=_.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const F=[];Ts(D,Ti(D),k&&k.concat(F),Jn(D))}_=_.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let D=0;D<_.length;D++){const F=C[_[D]];F?.prototype&&Ts(F.prototype,Ti(F.prototype),k)}}(_,C)}),y.__load_patch("customElements",(C,k,_)=>{!function rc(y,C){const{isBrowser:k,isMix:_}=C.getGlobalObjects();(k||_)&&y.customElements&&"customElements"in y&&C.patchCallbacks(C,y.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(C,_)}),y.__load_patch("XHR",(C,k)=>{!function _e(Y){const de=Y.XMLHttpRequest;if(!de)return;const De=de.prototype;let et=De[Et],Ht=De[to];if(!et){const Z=Y.XMLHttpRequestEventTarget;if(Z){const fe=Z.prototype;et=fe[Et],Ht=fe[to]}}const xt="readystatechange",Qe="scheduled";function se(Z){const fe=Z.data,Ie=fe.target;Ie[ee]=!1,Ie[re]=!1;const R=Ie[F];et||(et=Ie[Et],Ht=Ie[to]),R&&Ht.call(Ie,xt,R);const vt=Ie[F]=()=>{if(Ie.readyState===Ie.DONE)if(!fe.aborted&&Ie[ee]&&Z.state===Qe){const j=Ie[k.__symbol__("loadfalse")];if(0!==Ie.status&&j&&j.length>0){const v=Z.invoke;Z.invoke=function(){const I=Ie[k.__symbol__("loadfalse")];for(let V=0;V<I.length;V++)I[V]===Z&&I.splice(V,1);!fe.aborted&&Z.state===Qe&&v.call(Z)},j.push(Z)}else Z.invoke()}else!fe.aborted&&!1===Ie[ee]&&(Ie[re]=!0)};return et.call(Ie,xt,vt),Ie[_]||(Ie[_]=Z),Re.apply(Ie,fe.args),Ie[ee]=!0,Z}function z(){}function le(Z){const fe=Z.data;return fe.aborted=!0,be.apply(fe.target,fe.args)}const $e=Zn(De,"open",()=>function(Z,fe){return Z[D]=0==fe[2],Z[J]=fe[1],$e.apply(Z,fe)}),tt=qe("fetchTaskAborting"),ne=qe("fetchTaskScheduling"),Re=Zn(De,"send",()=>function(Z,fe){if(!0===k.current[ne]||Z[D])return Re.apply(Z,fe);{const Ie={target:Z,url:Z[J],isPeriodic:!1,args:fe,aborted:!1},R=yi("XMLHttpRequest.send",z,Ie,se,le);Z&&!0===Z[re]&&!Ie.aborted&&R.state===Qe&&R.invoke()}}),be=Zn(De,"abort",()=>function(Z,fe){const Ie=function ze(Z){return Z[_]}(Z);if(Ie&&"string"==typeof Ie.type){if(null==Ie.cancelFn||Ie.data&&Ie.data.aborted)return;Ie.zone.cancelTask(Ie)}else if(!0===k.current[tt])return be.apply(Z,fe)})}(C);const _=qe("xhrTask"),D=qe("xhrSync"),F=qe("xhrListener"),ee=qe("xhrScheduled"),J=qe("xhrURL"),re=qe("xhrErrorBeforeScheduled")}),y.__load_patch("geolocation",C=>{C.navigator&&C.navigator.geolocation&&function Iu(y,C){const k=y.constructor.name;for(let _=0;_<C.length;_++){const D=C[_],F=y[D];if(F){if(!Za(eo(y,D)))continue;y[D]=(J=>{const re=function(){return J.apply(this,no(arguments,k+"."+D))};return Or(re,J),re})(F)}}}(C.navigator.geolocation,["getCurrentPosition","watchPosition"])}),y.__load_patch("PromiseRejectionEvent",(C,k)=>{function _(D){return function(F){Yg(C,D).forEach(J=>{const re=C.PromiseRejectionEvent;if(re){const _e=new re(D,{promise:F.promise,reason:F.rejection});J.invoke(_e)}})}}C.PromiseRejectionEvent&&(k[qe("unhandledPromiseRejectionHandler")]=_("unhandledrejection"),k[qe("rejectionHandledHandler")]=_("rejectionhandled"))}),y.__load_patch("queueMicrotask",(C,k,_)=>{!function Ei(y,C){C.patchMethod(y,"queueMicrotask",k=>function(_,D){Zone.current.scheduleMicroTask("queueMicrotask",D[0])})}(C,_)})}(Ss)}},Cn=>{Cn(Cn.s=109)}]);